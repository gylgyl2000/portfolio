"use strict";(self.webpackChunkmon_web_dev_wiki=self.webpackChunkmon_web_dev_wiki||[]).push([[8393],{67820:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return d},metadata:function(){return c},toc:function(){return m},default:function(){return u}});var a=n(83117),r=n(80102),s=(n(67294),n(3905)),i=(n(26396),n(58215),n(56222),["components"]),o={id:"Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes",title:"06 - Projet 3 : la Bo\xeete \xe0 Recettes"},d=void 0,c={unversionedId:"Udemy/React-16+_Le_guide_complet/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes",id:"Udemy/React-16+_Le_guide_complet/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes",title:"06 - Projet 3 : la Bo\xeete \xe0 Recettes",description:"Introduction",source:"@site/docs/Udemy/1-React-16+_Le_guide_complet/6-Projet_3-la_boite_a_recettes.mdx",sourceDirName:"Udemy/1-React-16+_Le_guide_complet",slug:"/Udemy/React-16+_Le_guide_complet/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes",permalink:"/Mon_Web_Dev_Wiki/docs/Udemy/React-16+_Le_guide_complet/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes",editUrl:"https://github.com/gylgyl2000/Mon_Web_Dev_Wiki/edit/master/website/docs/Udemy/1-React-16+_Le_guide_complet/6-Projet_3-la_boite_a_recettes.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{id:"Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes",title:"06 - Projet 3 : la Bo\xeete \xe0 Recettes"},sidebar:"UdemySidebar",previous:{title:"05 - Projet 2 : la Chat Box",permalink:"/Mon_Web_Dev_Wiki/docs/Udemy/React-16+_Le_guide_complet/Udemy-React-16+_Le_guide_complet-05-Projet_2-la_chat_box"},next:{title:"07 - Notions avanc\xe9es",permalink:"/Mon_Web_Dev_Wiki/docs/Udemy/React-16+_Le_guide_complet/Udemy-React-16+_Le_guide_complet-07-Notions_avancees"}},m=[{value:"Introduction",id:"introduction",children:[],level:2},{value:"Initialisation du projet",id:"initialisation-du-projet",children:[],level:2},{value:"Cr\xe9er le Header",id:"cr\xe9er-le-header",children:[],level:2},{value:"Remplir le State en un clic",id:"remplir-le-state-en-un-clic",children:[],level:2},{value:"Afficher le State",id:"afficher-le-state",children:[],level:2},{value:"Component Card",id:"component-card",children:[],level:2},{value:"Images dynamiques",id:"images-dynamiques",children:[],level:2},{value:"Connecter l&#39;app avec Firebase",id:"connecter-lapp-avec-firebase",children:[],level:2},{value:"Ajouter une recette",id:"ajouter-une-recette",children:[],level:2},{value:"Formulaire avec React",id:"formulaire-avec-react",children:[],level:2},{value:"Modifier le State via le formulaire",id:"modifier-le-state-via-le-formulaire",children:[],level:2},{value:"Modifier les recettes",id:"modifier-les-recettes",children:[],level:2},{value:"G\xe9rer le formulaire de modification",id:"g\xe9rer-le-formulaire-de-modification",children:[],level:2},{value:"Supprimer une recette",id:"supprimer-une-recette",children:[],level:2},{value:"Activer l&#39;authentification Facebook dans Firebase",id:"activer-lauthentification-facebook-dans-firebase",children:[],level:2},{value:"G\xe9rer l&#39;authentification",id:"g\xe9rer-lauthentification",children:[],level:2},{value:"G\xe9rer la d\xe9connexion",id:"g\xe9rer-la-d\xe9connexion",children:[],level:2},{value:"Persister la connexion entre les sessions",id:"persister-la-connexion-entre-les-sessions",children:[],level:2},{value:"R\xe8gles de s\xe9curit\xe9 de Firebase",id:"r\xe8gles-de-s\xe9curit\xe9-de-firebase",children:[],level:2},{value:"R\xe9sum\xe9",id:"r\xe9sum\xe9",children:[],level:2}],l={toc:m};function u(e){var t=e.components,n=(0,r.Z)(e,i);return(0,s.mdx)("wrapper",(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,s.mdx)("h2",{id:"introduction"},"Introduction"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-01.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"initialisation-du-projet"},"Initialisation du projet"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-02.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"cr\xe9er-le-header"},"Cr\xe9er le Header"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-03.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/Header.js"',title:'"components/Header.js"'},"import React from 'react'\n\nconst Header = ({ pseudo }) => {\n    const formatPseudo = pseudo => /[aeiouy]/i.test(pseudo[0]) ? `d'${pseudo}` : `de ${pseudo}`\n    return (\n        <header>\n            <h1>La bo\xeete \xe0 recettes {formatPseudo(pseudo)}</h1>\n        </header>\n    )\n}\n\nexport default Header\n")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="App.js"',title:'"App.js"'},"import React, { Component } from 'react'\n// CSS\nimport './App.css'\n\nimport Header from './components/Header'\n\nclass App extends Component {\n  state = {\n    pseudo: this.props.match.params.pseudo\n  }\n\n  render () {\n    return (\n      <div className='box'>\n        <Header pseudo={this.state.pseudo} />\n        <div className='cards'>\n          <div className='card'>\n            <h2>Une Carte</h2>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default App\n")),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"remplir-le-state-en-un-clic"},"Remplir le State en un clic"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-04.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/Admin.js"',title:'"components/Admin.js"'},"import React, { Component } from 'react'\n\nexport default class Admin extends Component {\n    render() {\n        return (\n            <footer>\n                <button onClick={this.props.chargerExemple}>Remplir</button>\n            </footer>\n        )\n    }\n}\n")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{4,7,12,15,26-27} title="App.js"',"{4,7,12,15,26-27}":!0,title:'"App.js"'},"import React, { Component } from 'react'\n// CSS\nimport './App.css'\nimport Admin from './components/Admin'\n\nimport Header from './components/Header'\nimport recettes from './recettes'\n\nclass App extends Component {\n  state = {\n    pseudo: this.props.match.params.pseudo,\n    recettes: {}\n  }\n\n  chargerExemple = () => this.setState({ recettes })\n\n  render () {\n    return (\n      <div className='box'>\n        <Header pseudo={this.state.pseudo} />\n        <div className='cards'>\n          <div className='card'>\n            <h2>Une Carte</h2>\n          </div>\n        </div>\n        <Admin\n          chargerExemple={this.chargerExemple} />\n      </div>\n    )\n  }\n}\n\nexport default App\n")),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"afficher-le-state"},"Afficher le State"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-05.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/Card.js"',title:'"components/Card.js"'},'import React from \'react\'\n\nconst Card = ({ details }) => {\n    return (\n        <div className="card">\n            <div className="recette">\n                <h2>{details.nom}</h2>\n            </div>\n        </div>\n    )\n}\n\nexport default Card\n')),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{5,18-19,24} title="App.js"',"{5,18-19,24}":!0,title:'"App.js"'},"import React, { Component } from 'react'\n// CSS\nimport './App.css'\nimport Admin from './components/Admin'\nimport Card from './components/Card'\nimport Header from './components/Header'\nimport recettes from './recettes'\n\nclass App extends Component {\n  state = {\n    pseudo: this.props.match.params.pseudo,\n    recettes: {}\n  }\n\n  chargerExemple = () => this.setState({ recettes })\n\n  render () {\n    const cards = Object.keys(this.state.recettes)\n      .map(key => <Card key={key} details={this.state.recettes[key]} />)\n    return (\n      <div className='box'>\n        <Header pseudo={this.state.pseudo} />\n        <div className='cards'>\n          { cards }\n        </div>\n        <Admin\n          chargerExemple={this.chargerExemple} />\n      </div>\n    )\n  }\n}\n\nexport default App\n")),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"component-card"},"Component Card"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-06.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/Card.js"',title:'"components/Card.js"'},'const Card = ({ details }) => {\n    const ingredients = details.ingredients\n        .split(\',\')\n        .map(item => <li key={item}>{item}</li>)\n\n    const instructions = details.instructions\n        .split(\'\\n\')\n        .map(item => <li key={item}>{item}</li>)\n\n    return (\n        <div className="card">\n            <div className="image">\n                <img src={require(`../img/${details.image}`)} alt={details.nom} />\n            </div>\n            <div className="recette">\n                <h2>{details.nom}</h2>\n                <ul className="liste-ingredients">\n                    {ingredients}\n                </ul>\n                <ol className="liste-instructions">\n                    {instructions}\n                </ol>\n            </div>\n        </div>\n    );\n}\n')),(0,s.mdx)("p",null,"Les images ne s'affiche pas avec ",(0,s.mdx)("inlineCode",{parentName:"p"},"<img src={require(`../img/${details.image}`)} />")," ?",(0,s.mdx)("br",null),"\nPour changer cela, allez \xe0 : node_modules -> react-scripts -> config -> webpack.config.js"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-js"},"{\n          test: [/\\.bmp$/, /\\.gif$/, /\\.jpe?g$/, /\\.png$/],\n          loader: require.resolve('url-loader'),\n          options: {\n            limit: imageInlineSizeLimit,\n            name: 'static/media/[name].[hash:8].[ext]',\n            esModule: false\n          },\n        }\n")),(0,s.mdx)("p",null,"Recherchez la ligne ci-dessus et ajoutez ",(0,s.mdx)("inlineCode",{parentName:"p"},"esModule: false")," dans les options.",(0,s.mdx)("br",null),"\nEnsuite, l'image s'affichera."),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("a",{parentName:"li",href:"https://stackoverflow.com/questions/66428206/react-img-shows-object-module-instead-of-the-image"},"reactjs - React img shows [object Module] instead of the image - Stack Overflow"))),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"images-dynamiques"},"Images dynamiques"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-07.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{10-16,21} title="components/Card.js"',"{10-16,21}":!0,title:'"components/Card.js"'},'const Card = ({ details }) => {\n    const ingredients = details.ingredients\n        .split(\',\')\n        .map(item => <li key={item}>{item}</li>)\n\n    const instructions = details.instructions\n        .split(\'\\n\')\n        .map(item => <li key={item}>{item}</li>)\n\n    const requireImage = chemin => {\n        try {\n            return require(`../img/${chemin}`)\n        } catch (err) {\n            return require(`../img/default.jpeg`)\n        }\n    }\n\n    return (\n        <div className="card">\n            <div className="image">\n                <img src={requireImage(details.image)} alt={details.nom} />\n            </div>\n            <div className="recette">\n                <h2>{details.nom}</h2>\n                <ul className="liste-ingredients">\n                    {ingredients}\n                </ul>\n                <ol className="liste-instructions">\n                    {instructions}\n                </ol>\n            </div>\n        </div>\n    );\n}\n')),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"connecter-lapp-avec-firebase"},"Connecter l'app avec Firebase"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-08.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="base.js"',title:'"base.js"'},"import Rebase from 're-base'\nimport firebase from 'firebase/app'\nimport 'firebase/database'\n\nconst firebaseApp = firebase.initializeApp({\n  apiKey: \"AIzaSyBYKmD4LHkzRlvZlHi64bWMUxPsQbze9A0\",\n  authDomain: \"recettes-app-5f80c.firebaseapp.com\",\n  databaseURL: \"https://recettes-app-5f80c-default-rtdb.europe-west1.firebasedatabase.app\"\n})\n\nconst base = Rebase.createClass(firebaseApp.database())\n\n// This is a named export\nexport { firebaseApp }\n\n// this is a default export\nexport default base\n")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{2,10-15,17-19} title="App.js"',"{2,10-15,17-19}":!0,title:'"App.js"'},"// Firebase\nimport base from './base'\n\nclass App extends Component {\n  state = {\n    pseudo: this.props.match.params.pseudo,\n    recettes: {}\n  }\n\n  componentDidMount () {\n    this.ref = base.syncState(`/${this.state.pseudo}/recettes`, {\n      context: this,\n      state: 'recettes'\n    })\n  }\n\n  componentWillUnmount () {\n    base.removeBinding(this.ref)\n  }\n\n  chargerExemple = () => this.setState({ recettes })\n\n  render () {\n    const cards = Object.keys(this.state.recettes)\n      .map(key => <Card key={key} details={this.state.recettes[key]} />)\n    return (\n      <div className='box'>\n        <Header pseudo={this.state.pseudo} />\n        <div className='cards'>\n          { cards }\n        </div>\n        <Admin\n          chargerExemple={this.chargerExemple} />\n      </div>\n    )\n  }\n}\n")),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"ajouter-une-recette"},"Ajouter une recette"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-09.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{18-22,36} title="App.js"',"{18-22,36}":!0,title:'"App.js"'},"class App extends Component {\n  state = {\n    pseudo: this.props.match.params.pseudo,\n    recettes: {}\n  }\n\n  componentDidMount () {\n    this.ref = base.syncState(`/${this.state.pseudo}/recettes`, {\n      context: this,\n      state: 'recettes'\n    })\n  }\n\n  componentWillUnmount () {\n    base.removeBinding(this.ref)\n  }\n\n  ajouterRecette = recette => {\n    const recettes = { ...this.state.recettes }\n    recettes[`recette-${Date.now()}`] = recette\n    this.setState({ recette })\n  }\n\n  chargerExemple = () => this.setState({ recettes })\n\n  render () {\n    const cards = Object.keys(this.state.recettes)\n      .map(key => <Card key={key} details={this.state.recettes[key]} />)\n    return (\n      <div className='box'>\n        <Header pseudo={this.state.pseudo} />\n        <div className='cards'>\n          { cards }\n        </div>\n        <Admin\n          ajouterRecette={this.ajouterRecette}\n          chargerExemple={this.chargerExemple} />\n      </div>\n    )\n  }\n}\n")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/AjouterRecette.js"',title:'"components/AjouterRecette.js"'},"import React, { Component } from 'react'\n\nexport default class AjouterRecette extends Component {\n    render() {\n        return (\n            <div>\n                <h2>Ajouter recette</h2>\n            </div>\n        )\n    }\n}\n")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{2,7-8,12} title="components/Admin.js"',"{2,7-8,12}":!0,title:'"components/Admin.js"'},"import React, { Component } from 'react'\nimport AjouterRecette from './AjouterRecette'\n\nexport default class Admin extends Component {\n    render() {\n        return (\n            <div className=\"cards\">\n                <AjouterRecette AjouterRecette={this.props.AjouterRecette} />\n                <footer>\n                    <button onClick={this.props.chargerExemple}>Remplir</button>\n                </footer>\n            </div>\n        )\n    }\n}\n")),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"formulaire-avec-react"},"Formulaire avec React"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-10.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/AjouterRecette.js"',title:'"components/AjouterRecette.js"'},'export default class AjouterRecette extends Component {\n    state = {\n        nom: \'\',\n        image: \'\',\n        ingredients: \'\',\n        instructions: \'\'\n    }\n\n    handleChange = event => {\n        const { name, value } = event.target\n        this.setState({ [name]: value })\n    }\n\n    render() {\n        return (\n            <div className="card">\n                <form className="admin-form ajouter-recette">\n                    <input\n                        value={this.state.nom}\n                        onChange={this.handleChange}\n                        name="nom"\n                        type="text"\n                        placeholder="Nom de la recette"\n                    />\n                    <input\n                        value={this.state.image}\n                        onChange={this.handleChange}\n                        name="image"\n                        type="text"\n                        placeholder="Nom de l\'image"\n                    />\n                    <textarea\n                        value={this.state.ingredients}\n                        onChange={this.handleChange}\n                        name="ingredients"\n                        rows="3"\n                        placeholder="Liste des ingr\xe9dients"\n                    />\n                    <textarea\n                        value={this.state.instructions}\n                        onChange={this.handleChange}\n                        name="instructions"\n                        rows="15"\n                        placeholder="Liste des instructions"\n                    />\n                </form>\n            </div>\n        )\n    }\n}\n')),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"modifier-le-state-via-le-formulaire"},"Modifier le State via le formulaire"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-11.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{14-23,30,60} title="components/AjouterRecette.js"',"{14-23,30,60}":!0,title:'"components/AjouterRecette.js"'},'export default class AjouterRecette extends Component {\n    state = {\n        nom: \'\',\n        image: \'\',\n        ingredients: \'\',\n        instructions: \'\'\n    }\n\n    handleChange = event => {\n        const { name, value } = event.target\n        this.setState({ [name]: value })\n    }\n\n    handleSubmit = event => {\n        event.preventDefault()\n        const recette = { ...this.state }\n        this.props.ajouterRecette(recette)\n        // Reset\n        Object.keys(recette).forEach(item => {\n            recette[item] = \'\'\n        })\n        this.setState({ ...recette })\n    }\n\n    render() {\n        return (\n            <div className="card">\n                <form\n                    className="admin-form ajouter-recette"\n                    onSubmit={this.handleSubmit}\n                >\n                    <input\n                        value={this.state.nom}\n                        onChange={this.handleChange}\n                        name="nom"\n                        type="text"\n                        placeholder="Nom de la recette"\n                    />\n                    <input\n                        value={this.state.image}\n                        onChange={this.handleChange}\n                        name="image"\n                        type="text"\n                        placeholder="Nom de l\'image"\n                    />\n                    <textarea\n                        value={this.state.ingredients}\n                        onChange={this.handleChange}\n                        name="ingredients"\n                        rows="3"\n                        placeholder="Liste des ingr\xe9dients"\n                    />\n                    <textarea\n                        value={this.state.instructions}\n                        onChange={this.handleChange}\n                        name="instructions"\n                        rows="15"\n                        placeholder="Liste des instructions"\n                    />\n                    <button type="submit">+ Ajouter une recette</button>\n                </form>\n            </div>\n        )\n    }\n}\n')),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"modifier-les-recettes"},"Modifier les recettes"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-12.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{24-28,42,44} title="App.js"',"{24-28,42,44}":!0,title:'"App.js"'},"class App extends Component {\n  state = {\n    pseudo: this.props.match.params.pseudo,\n    recettes: {}\n  }\n\n  componentDidMount () {\n    this.ref = base.syncState(`/${this.state.pseudo}/recettes`, {\n      context: this,\n      state: 'recettes'\n    })\n  }\n\n  componentWillUnmount () {\n    base.removeBinding(this.ref)\n  }\n\n  ajouterRecette = recette => {\n    const recettes = { ...this.state.recettes }\n    recettes[`recette-${Date.now()}`] = recette\n    this.setState({ recettes })\n  }\n\n  majRecette = (key, newRecette) => {\n    const recettes = { ...this.state.recettes }\n    recettes[key] = newRecette\n    this.setState({ recettes })\n  }\n\n  chargerExemple = () => this.setState({ recettes })\n\n  render () {\n    const cards = Object.keys(this.state.recettes)\n      .map(key => <Card key={key} details={this.state.recettes[key]} />)\n    return (\n      <div className='box'>\n        <Header pseudo={this.state.pseudo} />\n        <div className='cards'>\n          { cards }\n        </div>\n        <Admin\n          recettes={this.state.recettes}\n          ajouterRecette={this.ajouterRecette}\n          majRecette={this.majRecette}\n          chargerExemple={this.chargerExemple} />\n      </div>\n    )\n  }\n}\n")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{3,7,11-19} title="components/Admin.js"',"{3,7,11-19}":!0,title:'"components/Admin.js"'},"import React, { Component } from 'react'\nimport AjouterRecette from './AjouterRecette'\nimport AdminForm from './AdminForm'\n\nexport default class Admin extends Component {\n  render() {\n    const { recettes, ajouterRecette, majRecette, chargerExemple } = this.props\n    return (\n      <div className=\"cards\">\n        <AjouterRecette ajouterRecette={ajouterRecette} />\n        {\n          Object.keys(recettes)\n            .map(key => <AdminForm\n              key={key}\n              id={key}\n              majRecette={majRecette}\n              recettes={recettes}\n            />)\n        }\n        <footer>\n            <button onClick={chargerExemple}>Remplir</button>\n        </footer>\n      </div>\n    )\n  }\n}\n")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/AdminForm"',title:'"components/AdminForm"'},'import React from \'react\'\n\nconst AdminForm = () => {\n  return (\n    <div className="card">\n      <form className="admin-form">\n        <input type="text" name="nom" placeholder="Nom de la recette" />\n        <input type="text" name="image" placeholder="Adresse de l\'image" />\n        <textarea name="ingredients" rows="3" placeholder="Liste des ingr\xe9dients" />\n        <textarea name="instructions" rows="3" placeholder="Liste des instructions" />\n      </form>\n      <button>Supprimer</button>\n    </div>\n  )\n}\n\nexport default AdminForm\n')),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"g\xe9rer-le-formulaire-de-modification"},"G\xe9rer le formulaire de modification"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-13.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/AdminForm"',title:'"components/AdminForm"'},'const AdminForm = ({\n    id: key,\n    majRecette,\n    recettes\n}) => {\n    const recette = recettes[key]\n\n    const handleChange = (event, key) => {\n        const { name, value } = event.target\n        const recette = recettes[key]\n        recette[name] = value\n        majRecette(key, recette)\n    }\n\n    return (\n        <div className="card">\n            <form className="admin-form">\n                <input\n                    value={recette.nom}\n                    onChange={e => handleChange(e, key)}\n                    type="text"\n                    name="nom"\n                    placeholder="Nom de la recette"\n                />\n                <input\n                    value={recette.image}\n                    onChange={e => handleChange(e, key)}\n                    type="text"\n                    name="image"\n                    placeholder="Adresse de l\'image"\n                />\n                <textarea\n                    value={recette.ingredients}\n                    onChange={e => handleChange(e, key)}\n                    name="ingredients"\n                    rows="3"\n                    placeholder="Liste des ingr\xe9dients"\n                />\n                <textarea\n                    value={recette.instructions}\n                    onChange={e => handleChange(e, key)}\n                    name="instructions"\n                    rows="3"\n                    placeholder="Liste des instructions"\n                />\n            </form>\n            <button>Supprimer</button>\n        </div>\n    )\n}\n')),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"supprimer-une-recette"},"Supprimer une recette"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-14.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{30-34,51} title="App.js"',"{30-34,51}":!0,title:'"App.js"'},"class App extends Component {\n  state = {\n    pseudo: this.props.match.params.pseudo,\n    recettes: {}\n  }\n\n  componentDidMount () {\n    this.ref = base.syncState(`/${this.state.pseudo}/recettes`, {\n      context: this,\n      state: 'recettes'\n    })\n  }\n\n  componentWillUnmount () {\n    base.removeBinding(this.ref)\n  }\n\n  ajouterRecette = recette => {\n    const recettes = { ...this.state.recettes }\n    recettes[`recette-${Date.now()}`] = recette\n    this.setState({ recettes })\n  }\n\n  majRecette = (key, newRecette) => {\n    const recettes = { ...this.state.recettes }\n    recettes[key] = newRecette\n    this.setState({ recettes })\n  }\n\n  supprimerRecette = key => {\n    const recettes = { ...this.state.recettes }\n    recettes[key] = null\n    this.setState({ recettes })\n  }\n\n  chargerExemple = () => this.setState({ recettes })\n\n  render () {\n    const cards = Object.keys(this.state.recettes)\n      .map(key => <Card key={key} details={this.state.recettes[key]} />)\n    return (\n      <div className='box'>\n        <Header pseudo={this.state.pseudo} />\n        <div className='cards'>\n          { cards }\n        </div>\n        <Admin\n          recettes={this.state.recettes}\n          ajouterRecette={this.ajouterRecette}\n          majRecette={this.majRecette}\n          supprimerRecette={this.supprimerRecette}\n          chargerExemple={this.chargerExemple} />\n      </div>\n    )\n  }\n}\n")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{3,13} title="components/Admin.js"',"{3,13}":!0,title:'"components/Admin.js"'},'export default class Admin extends Component {\n    render() {\n        const { recettes, ajouterRecette, majRecette, chargerExemple, supprimerRecette } = this.props\n        return (\n            <div className="cards">\n                <AjouterRecette ajouterRecette={ajouterRecette} />\n                {\n                    Object.keys(recettes)\n                        .map(key => <AdminForm\n                            key={key}\n                            id={key}\n                            majRecette={majRecette}\n                            supprimerRecette={supprimerRecette}\n                            recettes={recettes}\n                            />)\n                }\n                <footer>\n                    <button onClick={chargerExemple}>Remplir</button>\n                </footer>\n            </div>\n        )\n    }\n}\n')),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{5,48} title="components/AdminForm.js"',"{5,48}":!0,title:'"components/AdminForm.js"'},'const AdminForm = ({\n    id: key,\n    majRecette,\n    recettes,\n    supprimerRecette\n}) => {\n    const recette = recettes[key]\n\n    const handleChange = (event, key) => {\n        const { name, value } = event.target\n        const recette = recettes[key]\n        recette[name] = value\n        majRecette(key, recette)\n    }\n\n    return (\n        <div className="card">\n            <form className="admin-form">\n                <input\n                    value={recette.nom}\n                    onChange={e => handleChange(e, key)}\n                    type="text"\n                    name="nom"\n                    placeholder="Nom de la recette"\n                />\n                <input\n                    value={recette.image}\n                    onChange={e => handleChange(e, key)}\n                    type="text"\n                    name="image"\n                    placeholder="Adresse de l\'image"\n                />\n                <textarea\n                    value={recette.ingredients}\n                    onChange={e => handleChange(e, key)}\n                    name="ingredients"\n                    rows="3"\n                    placeholder="Liste des ingr\xe9dients"\n                />\n                <textarea\n                    value={recette.instructions}\n                    onChange={e => handleChange(e, key)}\n                    name="instructions"\n                    rows="3"\n                    placeholder="Liste des instructions"\n                />\n            </form>\n            <button onClick={() => supprimerRecette(key)}>Supprimer</button>\n        </div>\n    )\n}\n')),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"activer-lauthentification-facebook-dans-firebase"},"Activer l'authentification Facebook dans Firebase"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-15.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("p",null,"Firebase => Authentification"),(0,s.mdx)("p",null,(0,s.mdx)("a",{parentName:"p",href:"https://developers.facebook.com/"},"https://developers.facebook.com/")),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"g\xe9rer-lauthentification"},"G\xe9rer l'authentification"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-16.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{4,6-8,11-14,16-29,31-37,42-53} title="components/Admin.js"',"{4,6-8,11-14,16-29,31-37,42-53}":!0,title:'"components/Admin.js"'},"import React, { Component } from 'react'\nimport AjouterRecette from './AjouterRecette'\nimport AdminForm from './AdminForm'\nimport Login from './Login'\n\nimport firebase from 'firebase/app'\nimport 'firebase/auth'\nimport base, { firebaseApp } from '../base'\n\nexport default class Admin extends Component {\n  state = {\n    uid: null,\n    chef: null\n  }\n\n  handleAuth = async authData => {\n    const box = await base.fetch(this.props.pseudo, { context: this })\n\n    if (!box.chef) {\n      await base.post(`${this.props.pseudo}/chef`, {\n        data: authData.user.uid\n      })\n    }\n\n    this.setState({\n      uid: authData.user.uid,\n      chef : box.chef || authData.user.uid\n    })\n  }\n\n  authenticate = () => {\n    const authProvider = new firebase.auth.FacebookAuthProvider()\n      firebaseApp\n        .auth()\n        .signInWithPopup(authProvider)\n        .then(this.handleAuth)\n  }\n\n  render() {\n    const { recettes, ajouterRecette, majRecette, chargerExemple, supprimerRecette } = this.props\n\n      // Si l'utilisateur n'est pas connect\xe9\n      if (!this.state.uid) {\n        return <Login authenticate={this.authenticate} />\n      }\n\n      if (this.state.uid !== this.state.chef) {\n        return (\n          <div>\n            <p>Tu n'es pas le chef de cette bo\xeete !</p>\n          </div>\n        )\n      }\n\n    return (\n      <div className=\"cards\">\n        <AjouterRecette ajouterRecette={ajouterRecette} />\n        {\n          Object.keys(recettes)\n            .map(key => <AdminForm\n              key={key}\n              id={key}\n              majRecette={majRecette}\n              supprimerRecette={supprimerRecette}\n              recettes={recettes}\n            />)\n        }\n        <footer>\n          <button onClick={chargerExemple}>Remplir</button>\n        </footer>\n      </div>\n    )\n  }\n}\n")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/Login.js"',title:'"components/Login.js"'},"import React from 'react'\n\nconst Login = ({ authenticate }) => {\n  return (\n    <div className='login'>\n      <h2>Connecte-toi pour cr\xe9er tes recettes !</h2>\n      <button onClick={authenticate} className=\"facebook-button\">\n        Me connecter avec Facebook\n      </button>\n    </div>\n  )\n}\n\nexport default Login\n")),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{48} title="App.js"',"{48}":!0,title:'"App.js"'},"class App extends Component {\n  state = {\n    pseudo: this.props.match.params.pseudo,\n    recettes: {}\n  }\n\n  componentDidMount () {\n    this.ref = base.syncState(`/${this.state.pseudo}/recettes`, {\n      context: this,\n      state: 'recettes'\n    })\n  }\n\n  componentWillUnmount () {\n    base.removeBinding(this.ref)\n  }\n\n  ajouterRecette = recette => {\n    const recettes = { ...this.state.recettes }\n    recettes[`recette-${Date.now()}`] = recette\n    this.setState({ recettes })\n  }\n\n  majRecette = (key, newRecette) => {\n    const recettes = { ...this.state.recettes }\n    recettes[key] = newRecette\n    this.setState({ recettes })\n  }\n\n  supprimerRecette = key => {\n    const recettes = { ...this.state.recettes }\n    recettes[key] = null\n    this.setState({ recettes })\n  }\n\n  chargerExemple = () => this.setState({ recettes })\n\n  render () {\n    const cards = Object.keys(this.state.recettes)\n      .map(key => <Card key={key} details={this.state.recettes[key]} />)\n    return (\n      <div className='box'>\n        <Header pseudo={this.state.pseudo} />\n        <div className='cards'>\n          { cards }\n        </div>\n        <Admin\n          pseudo={this.state.pseudo}\n          recettes={this.state.recettes}\n          ajouterRecette={this.ajouterRecette}\n          majRecette={this.majRecette}\n          supprimerRecette={this.supprimerRecette}\n          chargerExemple={this.chargerExemple} />\n      </div>\n    )\n  }\n}\n")),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"g\xe9rer-la-d\xe9connexion"},"G\xe9rer la d\xe9connexion"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-17.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{30-33,38,49,68} title="components/Admin.js"',"{30-33,38,49,68}":!0,title:'"components/Admin.js"'},"export default class Admin extends Component {\n  state = {\n    uid: null,\n    chef: null\n  }\n\n  handleAuth = async authData => {\n    const box = await base.fetch(this.props.pseudo, { context: this })\n\n    if (!box.chef) {\n      await base.post(`${this.props.pseudo}/chef`, {\n        data: authData.user.uid\n      })\n    }\n\n    this.setState({\n      uid: authData.user.uid,\n      chef : box.chef || authData.user.uid\n    })\n  }\n\n  authenticate = () => {\n    const authProvider = new firebase.auth.FacebookAuthProvider()\n    firebaseApp\n      .auth()\n      .signInWithPopup(authProvider)\n      .then(this.handleAuth)\n  }\n\n  logout = async () => {\n    await firebase.auth().signOut()\n    this.setState({ uid: null })\n  }\n\n  render() {\n    const { recettes, ajouterRecette, majRecette, chargerExemple, supprimerRecette } = this.props\n\n    const logout = <button onClick={this.logout}>D\xe9connexion</button>\n\n    // Si l'utilisateur n'est pas connect\xe9\n    if (!this.state.uid) {\n      return <Login authenticate={this.authenticate} />\n    }\n\n    if (this.state.uid !== this.state.chef) {\n      return (\n        <div>\n          <p>Tu n'es pas le chef de cette bo\xeete !</p>\n          {logout}\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"cards\">\n        <AjouterRecette ajouterRecette={ajouterRecette} />\n        {\n          Object.keys(recettes)\n            .map(key => <AdminForm\n              key={key}\n              id={key}\n              majRecette={majRecette}\n              supprimerRecette={supprimerRecette}\n              recettes={recettes}\n            />)\n          }\n          <footer>\n            {logout}\n            <button onClick={chargerExemple}>Remplir</button>\n          </footer>\n      </div>\n    )\n  }\n}\n")),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"persister-la-connexion-entre-les-sessions"},"Persister la connexion entre les sessions"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-18.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'{7-13} title="components/Admin.js"',"{7-13}":!0,title:'"components/Admin.js"'},"export default class Admin extends Component {\n  state = {\n    uid: null,\n    chef: null\n  }\n\n  componentDidMount () {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.handleAuth({ user })\n      }\n    })\n  }\n\n  handleAuth = async authData => {\n    const box = await base.fetch(this.props.pseudo, { context: this })\n\n    if (!box.chef) {\n      await base.post(`${this.props.pseudo}/chef`, {\n        data: authData.user.uid\n      })\n    }\n\n    this.setState({\n      uid: authData.user.uid,\n      chef : box.chef || authData.user.uid\n    })\n  }\n\n  authenticate = () => {\n    const authProvider = new firebase.auth.FacebookAuthProvider()\n    firebaseApp\n      .auth()\n      .signInWithPopup(authProvider)\n      .then(this.handleAuth)\n  }\n\n  logout = async () => {\n    await firebase.auth().signOut()\n    this.setState({ uid: null })\n  }\n\n  render() {\n    const { recettes, ajouterRecette, majRecette, chargerExemple, supprimerRecette } = this.props\n\n    const logout = <button onClick={this.logout}>D\xe9connexion</button>\n\n    // Si l'utilisateur n'est pas connect\xe9\n    if (!this.state.uid) {\n      return <Login authenticate={this.authenticate} />\n    }\n\n    if (this.state.uid !== this.state.chef) {\n      return (\n        <div>\n          <p>Tu n'es pas le chef de cette bo\xeete !</p>\n          {logout}\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"cards\">\n        <AjouterRecette ajouterRecette={ajouterRecette} />\n        {\n          Object.keys(recettes)\n            .map(key => <AdminForm\n              key={key}\n              id={key}\n              majRecette={majRecette}\n              supprimerRecette={supprimerRecette}\n              recettes={recettes}\n            />)\n          }\n          <footer>\n            {logout}\n            <button onClick={chargerExemple}>Remplir</button>\n          </footer>\n      </div>\n    )\n  }\n}\n")),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"r\xe8gles-de-s\xe9curit\xe9-de-firebase"},"R\xe8gles de s\xe9curit\xe9 de Firebase"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-19.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-jsx",metastring:'title="Code des r\xe8gles de Firebase"',title:'"Code',des:!0,"r\xe8gles":!0,de:!0,'Firebase"':!0},'{\n  "rules": {\n    ".read": true,\n    ".write": "!data.exists()",\n    "$box": {\n      ".write": "auth != null && (!data.exists() || data.child(\'chef\').val() === auth.uid)",\n      ".read": true\n    }\n  }\n}\n')),(0,s.mdx)("hr",null),(0,s.mdx)("h2",{id:"r\xe9sum\xe9"},"R\xe9sum\xe9"),(0,s.mdx)("video",{height:"auto",width:"100%",controls:!0},(0,s.mdx)("source",{src:"https://monwikidevweb.la-loutre.fr/data/udemy/video/Udemy-React-16+_Le_guide_complet-06-Projet_3-la_boite_a_recettes-20.mp4",type:"video/mp4"})),(0,s.mdx)("br",null),(0,s.mdx)("br",null))}u.isMDXComponent=!0}}]);