"use strict";(self.webpackChunkmon_web_dev_wiki=self.webpackChunkmon_web_dev_wiki||[]).push([[6696],{97897:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return u},contentTitle:function(){return l},metadata:function(){return m},toc:function(){return d},default:function(){return c}});var a=t(83117),s=t(80102),i=(t(67294),t(3905)),r=(t(26396),t(58215),t(56222)),o=["components"],u={sidebar_position:5},l="G\xe9rez les donn\xe9es de votre application",m={unversionedId:"OpenClassrooms/Creez_un_reseau_social_d_entreprise/Creez_une_application_web_avec_Vue-js/Gerez_les_donnees_de_votre_application",id:"OpenClassrooms/Creez_un_reseau_social_d_entreprise/Creez_une_application_web_avec_Vue-js/Gerez_les_donnees_de_votre_application",title:"G\xe9rez les donn\xe9es de votre application",description:"D\xe9couvrez le principe de state management",source:"@site/docs/OpenClassrooms/7-Creez_un_reseau_social_d_entreprise/1-Creez_une_application_web_avec_Vue-js/4-Gerez_les_donnees_de_votre_application.mdx",sourceDirName:"OpenClassrooms/7-Creez_un_reseau_social_d_entreprise/1-Creez_une_application_web_avec_Vue-js",slug:"/OpenClassrooms/Creez_un_reseau_social_d_entreprise/Creez_une_application_web_avec_Vue-js/Gerez_les_donnees_de_votre_application",permalink:"/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Creez_un_reseau_social_d_entreprise/Creez_une_application_web_avec_Vue-js/Gerez_les_donnees_de_votre_application",editUrl:"https://github.com/gylgyl2000/Mon_Web_Dev_Wiki/edit/master/website/docs/OpenClassrooms/7-Creez_un_reseau_social_d_entreprise/1-Creez_une_application_web_avec_Vue-js/4-Gerez_les_donnees_de_votre_application.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"openClassroomsSidebar",previous:{title:"Cr\xe9ez des composants r\xe9utilisables dans Vue.js",permalink:"/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Creez_un_reseau_social_d_entreprise/Creez_une_application_web_avec_Vue-js/Creez_des_composants_reutilisables_dans_Vue-js"},next:{title:"R\xe9sum\xe9 du cours",permalink:"/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Creez_un_reseau_social_d_entreprise/Creez_une_application_web_avec_Vue-js/Resume_du_cours"}},d=[{value:"D\xe9couvrez le principe de state management",id:"d\xe9couvrez-le-principe-de-state-management",children:[{value:"src/components/GroceryList.vue",id:"srccomponentsgrocerylistvue",children:[],level:5},{value:"R\xe9cup\xe9rez vos datas \xe0 la source unique de v\xe9rit\xe9",id:"r\xe9cup\xe9rez-vos-datas-\xe0-la-source-unique-de-v\xe9rit\xe9",children:[],level:3},{value:"Entra\xeenez-vous",id:"entra\xeenez-vous",children:[{value:"Instructions",id:"instructions",children:[],level:4}],level:3},{value:"En r\xe9sum\xe9",id:"en-r\xe9sum\xe9",children:[],level:3}],level:2},{value:"Cr\xe9ez un data store centralis\xe9 avec Vuex",id:"cr\xe9ez-un-data-store-centralis\xe9-avec-vuex",children:[{value:"Installez Vuex",id:"installez-vuex",children:[{value:"src/main.js",id:"srcmainjs",children:[],level:4}],level:3},{value:"Rencontrez\xa0store/index.js",id:"rencontrezstoreindexjs",children:[],level:3},{value:"Configurez Vuex",id:"configurez-vuex",children:[],level:3},{value:"Entra\xeenez-vous",id:"entra\xeenez-vous-1",children:[{value:"Instructions",id:"instructions-1",children:[],level:4}],level:3},{value:"En r\xe9sum\xe9",id:"en-r\xe9sum\xe9-1",children:[],level:3}],level:2},{value:"R\xe9cup\xe9rez des donn\xe9es depuis Vuex",id:"r\xe9cup\xe9rez-des-donn\xe9es-depuis-vuex",children:[{value:"Stockez des donn\xe9es dans Vuex",id:"stockez-des-donn\xe9es-dans-vuex",children:[],level:3},{value:"R\xe9cup\xe9rez des donn\xe9es dans Vuex",id:"r\xe9cup\xe9rez-des-donn\xe9es-dans-vuex",children:[{value:"Utilisez <code>$store</code>",id:"utilisez-store",children:[],level:4},{value:"Utilisez <code>mapState</code>",id:"utilisez-mapstate",children:[],level:4}],level:3},{value:"D\xe9couvrez\xa0les getters",id:"d\xe9couvrezles-getters",children:[],level:3},{value:"Entra\xeenez-vous",id:"entra\xeenez-vous-2",children:[{value:"Instructions",id:"instructions-2",children:[],level:4}],level:3},{value:"En r\xe9sum\xe9",id:"en-r\xe9sum\xe9-2",children:[],level:3}],level:2},{value:"Modifiez vos donn\xe9es dans Vuex",id:"modifiez-vos-donn\xe9es-dans-vuex",children:[{value:"D\xe9couvrez les mutations",id:"d\xe9couvrez-les-mutations",children:[{value:"D\xe9finissez\xa0une mutation",id:"d\xe9finissezune-mutation",children:[],level:4},{value:"Actez une mutation",id:"actez-une-mutation",children:[],level:4}],level:3},{value:"D\xe9couvrez les actions",id:"d\xe9couvrez-les-actions",children:[],level:3},{value:"D\xe9finissez une action",id:"d\xe9finissez-une-action",children:[],level:3},{value:"D\xe9couvrez l&#39;utilit\xe9 des actions",id:"d\xe9couvrez-lutilit\xe9-des-actions",children:[{value:"Utilisez les actions dans les composants",id:"utilisez-les-actions-dans-les-composants",children:[],level:4}],level:3},{value:"Entra\xeenez-vous",id:"entra\xeenez-vous-3",children:[{value:"Instructions",id:"instructions-3",children:[],level:4}],level:3},{value:"En r\xe9sum\xe9",id:"en-r\xe9sum\xe9-3",children:[],level:3}],level:2},{value:"R\xe9sum\xe9 de la partie 4",id:"r\xe9sum\xe9-de-la-partie-4",children:[],level:2},{value:"Quiz : G\xe9rez les donn\xe9es de votre application",id:"quiz--g\xe9rez-les-donn\xe9es-de-votre-application",children:[{value:"Comp\xe9tences \xe9valu\xe9es",id:"comp\xe9tences-\xe9valu\xe9es",children:[],level:4},{value:"Question 1 : Pourquoi la gestion d&#39;\xe9tat (<em>state management</em>) est-elle importante ?",id:"question-1--pourquoi-la-gestion-d\xe9tat-state-management-est-elle-importante-",children:[],level:4},{value:"Question 2 : Quelle partie de Vuex est charg\xe9e d&#39;apporter directement des modifications au data store ?",id:"question-2--quelle-partie-de-vuex-est-charg\xe9e-dapporter-directement-des-modifications-au-data-store-",children:[],level:4},{value:"Question 3 : Quelle partie de Vuex est responsable de la gestion des donn\xe9es dans le store ?",id:"question-3--quelle-partie-de-vuex-est-responsable-de-la-gestion-des-donn\xe9es-dans-le-store-",children:[],level:4},{value:"Question 4 : Quelle partie de Vuex est responsable de la gestion de la logique qui peut d\xe9clencher des changements dans le data store ?",id:"question-4--quelle-partie-de-vuex-est-responsable-de-la-gestion-de-la-logique-qui-peut-d\xe9clencher-des-changements-dans-le-data-store-",children:[],level:4},{value:"Question 5 : Quel est le mot cl\xe9 pour d\xe9clencher une mutation ?",id:"question-5--quel-est-le-mot-cl\xe9-pour-d\xe9clencher-une-mutation-",children:[],level:4},{value:"Question 6 : Actuellement, un d\xe9veloppeur utilise les getters de la mani\xe8re suivante :",id:"question-6--actuellement-un-d\xe9veloppeur-utilise-les-getters-de-la-mani\xe8re-suivante-",children:[],level:4},{value:"Question 7 : Un d\xe9veloppeur essaie de d\xe9bugger le code suivant :",id:"question-7--un-d\xe9veloppeur-essaie-de-d\xe9bugger-le-code-suivant-",children:[],level:4},{value:"Question 8 : Quelle est la syntaxe la plus courante pour acc\xe9der aux actions d&#39;un store Vuex dans un composant ?",id:"question-8--quelle-est-la-syntaxe-la-plus-courante-pour-acc\xe9der-aux-actions-dun-store-vuex-dans-un-composant-",children:[],level:4}],level:2}],p={toc:d};function c(e){var n=e.components,t=(0,s.Z)(e,o);return(0,i.mdx)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"g\xe9rez-les-donn\xe9es-de-votre-application"},"G\xe9rez les donn\xe9es de votre application"),(0,i.mdx)("h2",{id:"d\xe9couvrez-le-principe-de-state-management"},"D\xe9couvrez le principe de state management"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/6390311-creez-une-application-web-avec-vue-js/6865336-decouvrez-le-principe-de-state-management"},"D\xe9couvrez le principe de state management - Cr\xe9ez une application web avec Vue.js - OpenClassrooms")),(0,i.mdx)("p",null,(0,i.mdx)("img",{parentName:"p",src:"https://user.oc-static.com/upload/2020/05/20/1589959826441_Bannee-dimension-720-798-04.png",alt:null})),(0,i.mdx)("p",null,"Lorsque l'on travaille avec des applications monopages (SPA), le concept de ",(0,i.mdx)("em",{parentName:"p"},"state management")," (gestion d'\xe9tat)\xa0est un sujet couramment abord\xe9."),(0,i.mdx)("p",null,"Et m\xeame si ce sujet peut souvent mener \xe0 des discussions tr\xe8s complexes, le principal objectif recherch\xe9 par tous est le suivant :"),(0,i.mdx)("blockquote",null,(0,i.mdx)("p",{parentName:"blockquote"},"s'assurer que l'application utilise les bonnes donn\xe9es \xe0 tout moment.")),(0,i.mdx)("p",null,"Sur cette base, nous pouvons d\xe9finir le ",(0,i.mdx)("strong",{parentName:"p"},"state")," (ou ",(0,i.mdx)("em",{parentName:"p"},"\xe9tat"),", en fran\xe7ais)\xa0comme un instantan\xe9 du data store \xe0 un moment donn\xe9. De multiples\nstates sont utilis\xe9s \xe0 travers une application, ce qui explique la complexit\xe9 inh\xe9rente \xe0 la gestion de ces \xe9l\xe9ments. Apr\xe8s tout, chaque\ncomposant utilis\xe9 contient sa propre propri\xe9t\xe9 ",(0,i.mdx)("inlineCode",{parentName:"p"},"data"),", ce qui signifie qu'il g\xe8re son propre state. Une fois que l'on ajoute la complexit\xe9 du\npassage de donn\xe9es entre composants, cela devient effectivement tr\xe8s compliqu\xe9."),(0,i.mdx)("p",null,"Pour illustrer cela, combien y a-t-il d'instances de state repr\xe9sent\xe9es dans l'exemple suivant ?"),(0,i.mdx)("h5",{id:"srccomponentsgrocerylistvue"},"src/components/GroceryList.vue"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html"},"<template>\n    <div>\n        <h1>{{ pageTitle }}</h1>\n        <ul>\n            <ListItem\n                v-for=\"item in list\"\n                :key=\"item\"\n                :item=\"item\"\n            />\n        </ul>\n    </div>\n</template>\n<script>\nimport ListItem from './components/ListItem.vue'\nexport default {\n    name: 'GroceryList',\n    components: {\n        ListItem\n    },\n    data() {\n        return {\n            list: ['pommes', 'bananes', 'cerises'],\n            pageTitle: 'Ma liste de courses'\n        }\n    }\n}\n<\/script>\n")),(0,i.mdx)("p",null,"\xc0 premi\xe8re vue, il semblerait qu'il y ait deux instances d'\xe9tat : le composant parent ",(0,i.mdx)("inlineCode",{parentName:"p"},"<GroceryList>"),"\xa0et le composant enfant ",(0,i.mdx)("inlineCode",{parentName:"p"},"<ListItem>"),".\nPourtant, il s'av\xe8re que nous sommes en r\xe9alit\xe9 en pr\xe9sence de 4 instances de state au total :"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"GroceryList."),(0,i.mdx)("li",{parentName:"ol"},'ListItem item="pommes".'),(0,i.mdx)("li",{parentName:"ol"},'ListItem item="bananes".'),(0,i.mdx)("li",{parentName:"ol"},'ListItem item="cerises".')),(0,i.mdx)("p",null,"Pour comprendre cela, imaginez que le composant ",(0,i.mdx)("inlineCode",{parentName:"p"},"<ListItem>")," ait \xe9t\xe9 d\xe9fini comme suit :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html"},'<template>\n    <div>\n        <input type="checkbox" v-model="isPurchased" />\n        <label>{{ item }}</label>\n    </div>\n</template>\n<script>\nexport default {\n    name: \'ListItem\',\n    props: {\n        item: String\n    },\n    data() {\n        return {\n            isPurchased: false\n        }\n    }\n}\n<\/script>\n')),(0,i.mdx)("p",null,"Comme vous pouvez l'imaginer, chaque article de ",(0,i.mdx)("inlineCode",{parentName:"p"},"<GroceryList>"),"\xa0doit pouvoir g\xe9rer le fait qu'il a \xe9t\xe9 achet\xe9 ou non. Si les composants enfants\npartageaient un\xa0state\xa0unique, alors le fait de cocher un seul article mettrait automatiquement \xe0 jour les autres composants \ud83d\ude31."),(0,i.mdx)("h3",{id:"r\xe9cup\xe9rez-vos-datas-\xe0-la-source-unique-de-v\xe9rit\xe9"},"R\xe9cup\xe9rez vos datas \xe0 la source unique de v\xe9rit\xe9"),(0,i.mdx)("p",null,"Dans les discussions autour de la gestion\xa0du state, et parmi les termes couramment cit\xe9s, appara\xeet l'id\xe9e d'une \xab source unique de v\xe9rit\xe9 \xbb\n(qui est aussi parfois abr\xe9g\xe9e en \xab SSoT \xbb pour ",(0,i.mdx)("em",{parentName:"p"},"Single Source of Truth"),"). Le concept fondamental derri\xe8re une source unique de v\xe9rit\xe9 est\nd'\xe9viter la duplication inutile de donn\xe9es dans l'application."),(0,i.mdx)("p",null,"Bien que cela puisse para\xeetre anodin \xe0 premi\xe8re vue, le fait de stocker plusieurs copies des m\xeames donn\xe9es dans une application est souvent la\nprincipale cause de\xa0bugs dans un syst\xe8me, car cela permet l'existence de diff\xe9rents jeux des \xab m\xeames \xbb donn\xe9es en m\xeame temps. Au lieu de\nn'avoir \xe0 mettre \xe0 jour qu'un seul jeu de donn\xe9es, l'application devra g\xe9rer plusieurs jeux de donn\xe9es, ce qui est probl\xe9matique, car :"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"du point de vue du code, cela s'av\xe8re bien plus difficile \xe0 g\xe9rer, car il existe une d\xe9pendance qu'il est facile d'oublier \xe0 mesure que le\nsyst\xe8me se complexifie ;"),(0,i.mdx)("li",{parentName:"ul"},"des bugs apparaissent en plus grand nombre \xe0 la suite de cette fragmentation.")),(0,i.mdx)("p",null,"C'est\xa0pour cette raison que\xa0le concept de source unique de v\xe9rit\xe9 est essentiel au succ\xe8s de tout syst\xe8me de gestion du state."),(0,i.mdx)("h3",{id:"entra\xeenez-vous"},"Entra\xeenez-vous"),(0,i.mdx)("p",null,"Vous trouverez le code source des exercices dans ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/amandinelemoult2109/Vue-fr"},"le repo GitHub du cours"),", dans le dossier\n",(0,i.mdx)("inlineCode",{parentName:"p"},"cafe-with-a-view"),". Pour commencer, consultez la branche ",(0,i.mdx)("inlineCode",{parentName:"p"},"P4C1-Begin"),"."),(0,i.mdx)("h4",{id:"instructions"},"Instructions"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"\xc9valuez le state actuel de l'application et d\xe9terminez o\xf9 se trouvent les diff\xe9rentes propri\xe9t\xe9s des donn\xe9es."),(0,i.mdx)("li",{parentName:"ol"},"Cr\xe9ez un plan ou un document visuel repr\xe9sentant la structure du state de l'application.")),(0,i.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,i.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,i.mdx)("h5",{parentName:"div"},(0,i.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,i.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Analyse du state de Cafe with a Vue")),(0,i.mdx)("div",{parentName:"div",className:"admonition-content"},(0,i.mdx)("p",{parentName:"div"},(0,i.mdx)("strong",{parentName:"p"},"Donn\xe9es Globales")),(0,i.mdx)("p",{parentName:"div"},"Voici les donn\xe9es qui ont le plus besoin d'\xeatre partag\xe9es entre plusieurs composants au fur et \xe0 mesure o\xf9 l'application grossit :"),(0,i.mdx)("ul",{parentName:"div"},(0,i.mdx)("li",{parentName:"ul"},"Restaurant Name"),(0,i.mdx)("li",{parentName:"ul"},"Menu Items"),(0,i.mdx)("li",{parentName:"ul"},"Shopping Cart")),(0,i.mdx)("p",{parentName:"div"},(0,i.mdx)("strong",{parentName:"p"},"Donn\xe9es Locales")),(0,i.mdx)("p",{parentName:"div"},"Les informations ci-dessous sont typiquement contenues dans une seule page donc n'ont pas besoin d'\xeatre partag\xe9es entre plusieurs composants :"),(0,i.mdx)("ul",{parentName:"div"},(0,i.mdx)("li",{parentName:"ul"},"Contact")),(0,i.mdx)("p",{parentName:"div"},(0,i.mdx)("strong",{parentName:"p"},"Note")," : Il s'agit ici d'une interpr\xe9tation possible de comment les donn\xe9es sont organis\xe9es. Il y a plusieurs moyens de le faire, et sentez\nvous libre de tester diff\xe9rentes id\xe9es quand vous construisez des applications."))),(0,i.mdx)("h3",{id:"en-r\xe9sum\xe9"},"En r\xe9sum\xe9"),(0,i.mdx)("p",null,"Dans notre vision du syst\xe8me de\xa0gestionnaire de state id\xe9al, ce dernier devrait \xeatre capable de :"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"cr\xe9er un espace de stockage de donn\xe9es unique qui servira de source unique de v\xe9rit\xe9 pour toutes les donn\xe9es partag\xe9es ;"),(0,i.mdx)("li",{parentName:"ul"},"permettre \xe0 n'importe quel composant\xa0de r\xe9cup\xe9rer des donn\xe9es directement ;"),(0,i.mdx)("li",{parentName:"ul"},"permettre \xe0 n'importe quel composant de modifier le data store unique directement.")),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Par chance, l'\xe9cosyst\xe8me Vue.js dispose d'un syst\xe8me de\xa0state management\xa0capable de faire cela \xe0 notre place : Vuex. H\xe2te d'en savoir plus ?\nRendez-vous au prochain chapitre ! \ud83d\ude80")),(0,i.mdx)("hr",null),(0,i.mdx)("h2",{id:"cr\xe9ez-un-data-store-centralis\xe9-avec-vuex"},"Cr\xe9ez un data store centralis\xe9 avec Vuex"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/6390311-creez-une-application-web-avec-vue-js/6869761-creez-un-data-store-centralise-avec-vuex"},"Cr\xe9ez un data store centralis\xe9 avec Vuex - Cr\xe9ez une application web avec Vue.js - OpenClassrooms")),(0,i.mdx)("p",null,(0,i.mdx)("img",{parentName:"p",src:"https://user.oc-static.com/upload/2020/05/20/15899598448174_Bannee-dimension-720-798-04.png",alt:null})),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Vuex")," est un gestionnaire d'\xe9tat et une biblioth\xe8que pour les applications Vue.js. En d'autres termes, le but unique de Vuex est de nous\naider \xe0 cr\xe9er un store centralis\xe9 qui nous permettra d'avoir cette \"source unique de v\xe9rit\xe9\" pour r\xe9cup\xe9rer nos datas."),(0,i.mdx)("h3",{id:"installez-vuex"},"Installez Vuex"),(0,i.mdx)("p",null,"Gr\xe2ce \xe0 Vue CLI, il suffit d'ex\xe9cuter la commande suivante dans notre terminal pour ajouter Vuex \xe0 notre projet :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},"vue add vuex\n")),(0,i.mdx)("p",null,"Une fois Vuex ajout\xe9 \xe0 votre application par Vue CLI, vous devriez voir un r\xe9sultat similaire dans votre terminal :"),(0,i.mdx)("figure",null,(0,i.mdx)("img",{src:"https://user.oc-static.com/upload/2020/04/03/15859090743929_15694861994517_vuex-install.png",alt:"Output de l'installation de Vuex dans le terminal"}),(0,i.mdx)("figcaption",null,"Ce que vous devriez voir dans votre terminal")),(0,i.mdx)("p",null,"Cela signifie que Vuex est bien install\xe9 dans votre application. Tout \xe7a en un clic, on s'en sort bien, non \ud83d\ude0e ? Maintenant, voyons voir quels\nchangements ont \xe9t\xe9 apport\xe9s \xe0 notre application."),(0,i.mdx)("h4",{id:"srcmainjs"},"src/main.js"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"import Vue from 'vue'\nimport App from './App.vue'\nimport store from './store'\n\nVue.config.productionTip \\= false\n\nnew Vue({\n    store,\n    render: h => h(App)\n}).$mount('#app')\n")),(0,i.mdx)("p",null,"En regardant le fichier ",(0,i.mdx)("inlineCode",{parentName:"p"},"main.js")," de plus pr\xe8s, vous remarquerez que le plugin a introduit le ",(0,i.mdx)("inlineCode",{parentName:"p"},"store"),"\xa0en tant que nouvelle configuration sur\nnotre instance de Vue. De la m\xeame mani\xe8re que nous configurerions une propri\xe9t\xe9 ",(0,i.mdx)("inlineCode",{parentName:"p"},"data"),"\xa0pour mettre en place un nouveau data store, vous pouvez\nconsid\xe9rer cette propri\xe9t\xe9 ",(0,i.mdx)("inlineCode",{parentName:"p"},"store"),"\xa0comme\xa0le data store\xa0global que nous allons configurer avec Vuex."),(0,i.mdx)("p",null,"Jetons un \u0153il au fichier dans lequel toute la magie Vuex a lieu : ",(0,i.mdx)("inlineCode",{parentName:"p"},"src/store.js"),"."),(0,i.mdx)("h3",{id:"rencontrezstoreindexjs"},"Rencontrez\xa0store/index.js"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n\n    },\n    mutations: {\n\n    },\n    actions: {\n\n    }\n})\n")),(0,i.mdx)("p",null,"En parcourant ",(0,i.mdx)("inlineCode",{parentName:"p"},"store/index.js"),", vous remarquerez une nouvelle ligne de code que nous n'avions pas encore rencontr\xe9e :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"Vue.use(Vuex)\n")),(0,i.mdx)("p",null,"Cette syntaxe est utilis\xe9e pour le ",(0,i.mdx)("a",{parentName:"p",href:"https://fr.vuejs.org/v2/guide/plugins.html"},"syst\xe8me de plugins Vue"),". Cette m\xe9thode permet d'ajouter une\nfonctionnalit\xe9 globale \xe0 notre instance de Vue. Et comme notre but est d'ajouter un data store global dans notre application, le syst\xe8me de\nplugin est parfait pour ajouter Vuex \xe0 notre application."),(0,i.mdx)("p",null,"Ensuite, comme pour la mise en place d'une nouvelle instance de Vue avec ",(0,i.mdx)("inlineCode",{parentName:"p"},"new Vue()"),", Vuex est install\xe9 de la m\xeame mani\xe8re avec\xa0",(0,i.mdx)("inlineCode",{parentName:"p"},"new Vuex.Store()"),".\nEt vous pouvez \xe9galement lui passer des options de configuration, exactement comme pour une nouvelle instance de Vue."),(0,i.mdx)("h3",{id:"configurez-vuex"},"Configurez Vuex"),(0,i.mdx)("p",null,"Comme nous le voyons dans ",(0,i.mdx)("inlineCode",{parentName:"p"},"store/index.js"),", l'initialisation d'un nouveau store Vuex ne n\xe9cessite qu'une seule configuration. Cela se fait par\nun objet contenant trois cl\xe9s : (1) state, (2) mutations et (3) actions."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n\n    },\n    mutations: {\n\n    },\n    actions: {\n\n    }\n})\n")),(0,i.mdx)("h3",{id:"entra\xeenez-vous-1"},"Entra\xeenez-vous"),(0,i.mdx)("p",null,"Vous trouverez le code source des exercices dans ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/amandinelemoult2109/Vue-fr"},"le repo GitHub du cours"),", dans le dossier\n",(0,i.mdx)("inlineCode",{parentName:"p"},"cafe-with-a-view"),". Pour commencer, consultez la branche ",(0,i.mdx)("inlineCode",{parentName:"p"},"P4C2-Begin"),"."),(0,i.mdx)("h4",{id:"instructions-1"},"Instructions"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"Ajoutez Vuex \xe0 l'application."),(0,i.mdx)("li",{parentName:"ol"},"V\xe9rifiez que\xa0la boilerplate pour le store est bien pr\xe9sente dans un fichier comme ",(0,i.mdx)("inlineCode",{parentName:"li"},"store/index.js"),".")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript",metastring:'title="store/index.js"',title:'"store/index.js"'},"import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n    },\n    mutations: {\n    },\n    actions: {\n    },\n    modules: {\n    }\n})\n")),(0,i.mdx)("h3",{id:"en-r\xe9sum\xe9-1"},"En r\xe9sum\xe9"),(0,i.mdx)("p",null,"Dans ce chapitre, nous avons appris :"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"ce qu'est Vuex : une biblioth\xe8que de gestion d'\xe9tat permettant de cr\xe9er un store centralis\xe9 qui deviendra la seule source de v\xe9rit\xe9 de notre\napp ;"),(0,i.mdx)("li",{parentName:"ul"},"comment installer Vuex sur notre application ;"),(0,i.mdx)("li",{parentName:"ul"},"le fonctionnement de la structure de Vuex.")),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Maintenant que nous avons ajout\xe9 Vuex \xe0 notre projet avec succ\xe8s, il est temps de d\xe9couvrir son fonctionnement ! C'est parti dans le chapitre\nsuivant ! \ud83d\ude80")),(0,i.mdx)("hr",null),(0,i.mdx)("h2",{id:"r\xe9cup\xe9rez-des-donn\xe9es-depuis-vuex"},"R\xe9cup\xe9rez des donn\xe9es depuis Vuex"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/6390311-creez-une-application-web-avec-vue-js/6870051-recuperez-des-donnees-depuis-vuex"},"R\xe9cup\xe9rez des donn\xe9es depuis Vuex - Cr\xe9ez une application web avec Vue.js - OpenClassrooms")),(0,i.mdx)("p",null,(0,i.mdx)("img",{parentName:"p",src:"https://user.oc-static.com/upload/2020/05/20/15899602015333_Bannee-dimension-720-798-04.png",alt:null})),(0,i.mdx)("p",null,"Maintenant que nous avons install\xe9 Vuex\xa0dans\xa0notre application, il est temps pour nous de comprendre son fonctionnement. Et comme Vuex nous\nsert de store global, nous devrions commencer par apprendre d\xe8s maintenant comment stocker et r\xe9cup\xe9rer les donn\xe9es qui s'y trouvent.\nCommen\xe7ons tout de suite ! \ud83d\ude80"),(0,i.mdx)("h3",{id:"stockez-des-donn\xe9es-dans-vuex"},"Stockez des donn\xe9es dans Vuex"),(0,i.mdx)("p",null,"Dans Vuex, notre data store\xa0est d\xe9fini en tant que\xa0",(0,i.mdx)("inlineCode",{parentName:"p"},"state"),"\xa0dans l'objet de configuration ",(0,i.mdx)("inlineCode",{parentName:"p"},"store/index.js"),".\xa0Il s'agit d'un nouveau\xa0terme \xe0\napprendre, mais vous pouvez comparer cela \xe0 la propri\xe9t\xe9 ",(0,i.mdx)("inlineCode",{parentName:"p"},"data"),"\xa0que nous utilisons depuis le d\xe9but."),(0,i.mdx)(r.fG,{vimeoId:"413530181",mdxType:"Vimeo"}),(0,i.mdx)("br",null),(0,i.mdx)("figure",null,(0,i.mdx)("img",{src:"https://user.oc-static.com/upload/2020/04/27/15879920195864_15694885347961_Screen_Shot_2019-08-12_at_7.57.01_PM.png",alt:"Une comparaison entre le state\xa0du store Vuex et le data store d'un objet de config standard Vue"}),(0,i.mdx)("figcaption",null,"Une comparaison entre le state\xa0du store Vuex et le data store d'un objet de config standard Vue")),(0,i.mdx)("p",null,"Lorsqu'il s'agit de stocker des donn\xe9es dans Vuex, c'est aussi simple que d'ajouter des paires cl\xe9-valeur, comme vous le feriez dans tout autre\nobjet JavaScript normal."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"export default new Vuex.Store({\n    state: {\n        month: 8,\n        day: 12,\n        year: 2008\n    }\n})\n")),(0,i.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,i.mdx)("h5",{parentName:"div"},(0,i.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,i.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"?")),(0,i.mdx)("div",{parentName:"div",className:"admonition-content"},(0,i.mdx)("p",{parentName:"div"},"Du coup, cela veut dire que je devrais tout mettre dans le state Vuex plut\xf4t que dans le data store des composants ?"))),(0,i.mdx)("p",null,"Il peut para\xeetre tentant de tout mettre dans le store global ; mais ce n'est pas ce qu'il faut faire, car une partie de ce qui rend\nl'architecture par composants aussi puissante est sa capacit\xe9 \xe0\xa0d\xe9couper un certain nombre de sujets. L'id\xe9e est de remonter les donn\xe9es \xe0 un\nniveau global\xa0uniquement\xa0lorsque vous constaterez qu'il est n\xe9cessaire d'acc\xe9der aux donn\xe9es \xe0 partir de plusieurs composants."),(0,i.mdx)("h3",{id:"r\xe9cup\xe9rez-des-donn\xe9es-dans-vuex"},"R\xe9cup\xe9rez des donn\xe9es dans Vuex"),(0,i.mdx)("p",null,"Maintenant que nous savons comment d\xe9finir les donn\xe9es dans Vuex, l'\xe9tape suivante consiste naturellement \xe0 d\xe9terminer comment acc\xe9der \xe0 nos\ndonn\xe9es depuis nos composants. Il existe deux fa\xe7ons de faire."),(0,i.mdx)("h4",{id:"utilisez-store"},"Utilisez ",(0,i.mdx)("inlineCode",{parentName:"h4"},"$store")),(0,i.mdx)("p",null,"Au fur et \xe0 mesure que vous allez approfondir des techniques plus avanc\xe9es de Vue et que vous d\xe9velopperez vos connaissances, vous d\xe9couvrirez\ndes propri\xe9t\xe9s qui sont pr\xe9c\xe9d\xe9es du symbole dollar. En voici quelques exemples :"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"this.$options"),"\xa0;"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"this.$parent"),"\xa0;"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"this.$children"),"\xa0;"),(0,i.mdx)("li",{parentName:"ul"},"etc.")),(0,i.mdx)("p",null,"Il s'agit de propri\xe9t\xe9s sp\xe9cifiques \xe0 l'instance de Vue sur laquelle vous travaillez ; elles sont pr\xe9c\xe9d\xe9es du signe dollar afin de garantir\nque ces m\xe9thodes sont bien utilis\xe9es comme pr\xe9vu."),(0,i.mdx)("p",null,"Comme notre ",(0,i.mdx)("inlineCode",{parentName:"p"},"store"),"\xa0Vuex est inject\xe9 \xe0 un niveau global \xe0 travers tous nos composants, cela signifie que nous avons acc\xe8s \xe0 une propri\xe9t\xe9\n",(0,i.mdx)("inlineCode",{parentName:"p"},"$store"),"\xa0qui nous permettra d'acc\xe9der directement \xe0 Vuex dans sa totalit\xe9."),(0,i.mdx)("p",null,"Si on reprend notre exemple situ\xe9 plus haut, nous pourrions acc\xe9der \xe0 notre ",(0,i.mdx)("inlineCode",{parentName:"p"},"state"),"\xa0via ",(0,i.mdx)("inlineCode",{parentName:"p"},"$store"),"\xa0par ce qui suit :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html"},"<template>\n    <p>La date stock\xe9e dans Vuex est le {{ $store.state.day }}-{{ $store.state.month }}-{{ $store.state.year }}.</p>\n</template>\n")),(0,i.mdx)("p",null,"Cependant, notre template commence \xe0 \xeatre un peu encombr\xe9. Il serait pratique d'avoir un moyen plus simple de\xa0faire r\xe9f\xe9rence au\xa0store,\nn'est-ce pas ? Eh bien, heureusement pour nous, il y a : ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapState"),"\xa0!"),(0,i.mdx)("h4",{id:"utilisez-mapstate"},"Utilisez ",(0,i.mdx)("inlineCode",{parentName:"h4"},"mapState")),(0,i.mdx)("p",null,"Vuex nous fournit un moyen d'associer\xa0le state \xe0 des variables que nous pouvons appeler dans nos composants, \xe9vitant ainsi de devoir appeler\n",(0,i.mdx)("inlineCode",{parentName:"p"},"$store"),"\xa0\xe0 chaque fois : ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapState"),". Cette m\xe9thode nous permet de demander \xe0 Vuex les propri\xe9t\xe9s de state\xa0de notre choix, et il les ajoutera \xe0\nnos propri\xe9t\xe9s calcul\xe9es."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"export default new Vuex.Store({\n    state: {\n        month: 8,\n        day: 12,\n        year: 2008\n    }\n}\n")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html"},"<template>\n    <p>La date stock\xe9e dans Vuex est le {{ day }}-{{ month }}-{{ year }}.</p>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n    computed: {\n        ...mapState(['year', 'month', 'day'])\n    }\n}\n<\/script>\n")),(0,i.mdx)("p",null,"::\ud83d\udc81\nVous pouvez remarquer que j'utilise ici la ",(0,i.mdx)("a",{parentName:"p",href:"https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Op%C3%A9rateurs/Syntaxe_d%C3%A9composition"},"syntaxe\xa0de d\xe9composition"),"\n(",(0,i.mdx)("em",{parentName:"p"},"spread operator"),") \"...\" avant mapState. Cela n'est pas obligatoire, mais il est courant d'utiliser cette syntaxe\xa0de d\xe9composition pour\nd\xe9finir d'autres propri\xe9t\xe9s calcul\xe9es.\n:::"),(0,i.mdx)("p",null,"En cas de conflit sur les noms, vous aurez peut-\xeatre besoin de donner un nom diff\xe9rent \xe0 vos variables\xa0du state Vuex dans votre composant, ce\nqui est facilement r\xe9alisable en\xa0switchant l'argument depuis un tableau vers un objet, comme ici :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html"},"<template>\n    <p>La date stock\xe9e dans Vuex est le {{ day }}-{{ uniqueMonth }}-{{ customYear }}.</p>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n    computed: {\n        ...mapState({\n            customYear: 'year',\n            uniqueMonth: 'month',\n            day: 'day'\n        })\n    }\n}\n<\/script>\n")),(0,i.mdx)("p",null,"Dans cet objet, la cl\xe9 repr\xe9sente le nouveau nom que vous voulez utiliser pour r\xe9f\xe9rencer votre valeur, tandis que la valeur correspond \xe0 la\npropri\xe9t\xe9 de state que Vuex doit r\xe9f\xe9rencer."),(0,i.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,i.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,i.mdx)("h5",{parentName:"div"},(0,i.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,i.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.mdx)("div",{parentName:"div",className:"admonition-content"},(0,i.mdx)("p",{parentName:"div"},"Pour plus d'informations sur\xa0le state dans Vuex,\xa0vous pouvez consulter ",(0,i.mdx)("a",{parentName:"p",href:"https://vuex.vuejs.org/fr/guide/state.html"},"la documentation officielle sur state"),"."))),(0,i.mdx)("p",null,"Ceci \xe9tant dit, vous remarquerez probablement que nous sommes en train d'assembler notre date manuellement. Si cette date \xe9tait r\xe9f\xe9renc\xe9e \xe0\nplusieurs endroits dans l'application, cela serait tr\xe8s difficile \xe0 maintenir. Si seulement il existait un moyen de d\xe9finir des propri\xe9t\xe9s\ncalcul\xe9es dans un store Vuex..."),(0,i.mdx)("h3",{id:"d\xe9couvrezles-getters"},"D\xe9couvrez\xa0les getters"),(0,i.mdx)("p",null,"Lorsque ",(0,i.mdx)("inlineCode",{parentName:"p"},"store.js"),"\xa0est\xa0g\xe9n\xe9r\xe9 \xe0 la base, il laisse de c\xf4t\xe9 une des propri\xe9t\xe9s qui est tr\xe8s utile dans de nombreux sc\xe9narios : les ",(0,i.mdx)("strong",{parentName:"p"},"\xab getters \xbb,\nou ",(0,i.mdx)("em",{parentName:"strong"},"accesseurs")),". Les ",(0,i.mdx)("strong",{parentName:"p"},"accesseurs"),"\xa0peuvent \xeatre vus comme\xa0l'\xe9quivalent de la propri\xe9t\xe9 calcul\xe9e (",(0,i.mdx)("em",{parentName:"p"},"computed"),") dans Vue."),(0,i.mdx)(r.fG,{vimeoId:"413530280",mdxType:"Vimeo"}),(0,i.mdx)("br",null),(0,i.mdx)("figure",null,(0,i.mdx)("img",{src:"https://user.oc-static.com/upload/2020/05/04/15885823079235_15694889633907_Screen_Shot_2019-08-12_at_7.56.52_PM.png",alt:"Une comparaison entre le getters du store Vuex et la propri\xe9t\xe9 computed dans une configuration Vue classique"}),(0,i.mdx)("figcaption",null,"Une comparaison entre le getters du store Vuex et la propri\xe9t\xe9 computed dans une configuration Vue classique")),(0,i.mdx)("p",null,"Cette comparaison montre la mani\xe8re dont les accesseurs dans un store Vuex correspondent th\xe9oriquement \xe0 la propri\xe9t\xe9 calcul\xe9e dans un objet de\nconfiguration Vue standard."),(0,i.mdx)("p",null,"Ainsi, dans notre exemple de date, voil\xe0 la mani\xe8re avec laquelle nous d\xe9finirions notre date format\xe9e :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"export default new Vuex.Store({\n    state: {\n        month: 7,\n        day: 23,\n        year: 2010\n    },\n    getters: {\n        formattedDate: state => {\n            return `${state.day}-${state.month}-${state.year}`\n        }\n    }\n}\n")),(0,i.mdx)("p",null,"Comme vous pouvez le voir dans l'exemple, chaque ",(0,i.mdx)("strong",{parentName:"p"},"accesseur")," est une fonction qui re\xe7oit le ",(0,i.mdx)("strong",{parentName:"p"},"state"),"\xa0comme argument et retourne une valeur \xe0\nlaquelle nous pourrons acc\xe9der plus tard."),(0,i.mdx)("p",null,"Ensuite, nous pouvons simplifier notre code encore davantage dans le composant, gr\xe2ce \xe0 ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapGetters"),", qui fonctionne comme ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapState"),"."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html"},"<template>\n    <p>La date stock\xe9e dans Vuex est le {{ formattedDate }}.</p>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nexport default {\n    computed: {\n        ...mapGetters(['formattedDate'])\n    }\n}\n<\/script>\n")),(0,i.mdx)("p",null,"Et tout comme ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapState"),", ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapGetters"),"\xa0peut \xe9galement prendre un objet qui vous permet de d\xe9finir des noms personnalis\xe9s pour les accesseurs\nque vous r\xe9f\xe9rencez."),(0,i.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,i.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,i.mdx)("h5",{parentName:"div"},(0,i.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,i.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.mdx)("div",{parentName:"div",className:"admonition-content"},(0,i.mdx)("p",{parentName:"div"},"Pour plus d'informations sur les accesseurs, vous pouvez consulter ",(0,i.mdx)("a",{parentName:"p",href:"https://vuex.vuejs.org/fr/guide/getters.html"},"la documentation officielle sur les accesseurs"),"."))),(0,i.mdx)("h3",{id:"entra\xeenez-vous-2"},"Entra\xeenez-vous"),(0,i.mdx)("p",null,"Vous trouverez le code source des exercices dans ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/amandinelemoult2109/Vue-fr"},"le repo GitHub du cours"),", dans le dossier\n",(0,i.mdx)("inlineCode",{parentName:"p"},"cafe-with-a-view"),". Pour commencer, consultez la branche ",(0,i.mdx)("inlineCode",{parentName:"p"},"P4C3-Begin"),"."),(0,i.mdx)("h4",{id:"instructions-2"},"Instructions"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"Migrez les donn\xe9es du ",(0,i.mdx)("inlineCode",{parentName:"li"},"shoppingCart"),"\xa0vers Vuex."),(0,i.mdx)("li",{parentName:"ol"},"Migrez les donn\xe9es relatives \xe0 ",(0,i.mdx)("inlineCode",{parentName:"li"},"restaurantName"),"\xa0vers Vuex."),(0,i.mdx)("li",{parentName:"ol"},"Migrez les donn\xe9es de ",(0,i.mdx)("inlineCode",{parentName:"li"},"simpleMenu"),"\xa0vers Vuex."),(0,i.mdx)("li",{parentName:"ol"},"Migrez ",(0,i.mdx)("inlineCode",{parentName:"li"},"copyright")," vers les accesseurs (",(0,i.mdx)("em",{parentName:"li"},"getters"),").")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html",metastring:'title="views/Home.vue"',title:'"views/Home.vue"'},'...\n<script>\nimport MenuItem from "../components/MenuItem"\n\nexport default {\n    name: "Home",\n    components: {\n        MenuItem\n    },\n    data() {\n        return {\n            restaurantName: "La belle vue",\n            shoppingCart: 0,\n            simpleMenu: [\n                {\n                    name: "Croissant",\n                    image: {\n                        source: "/images/crossiant.jpg",\n                        alt: "Un croissant"\n                    },\n                    inStock: true,\n                    quantity: 1,\n                    price: 2.99\n                },\n                {\n                    name: "Baguette de pain",\n                    image: {\n                        source: "/images/french-baguette.jpeg",\n                        alt: "Quatre baguettes de pain"\n                    },\n                    inStock: true,\n                    quantity: 1,\n                    price: 3.99\n                },\n                {\n                    name: "\xc9clair",\n                    image: {\n                        source: "/images/eclair.jpg",\n                        alt: "\xc9clair au chocolat"\n                    },\n                    inStock: false,\n                    quantity: 1,\n                    price: 4.99\n                }\n            ]\n        }\n    },\n    computed: {\n        copyright() {\n            const currentYear = new Date().getFullYear()\n\n            return `Copyright ${this.restaurantName} ${currentYear}`\n        }\n    },\n    methods: {\n        addToShoppingCart(amount) {\n            this.shoppingCart += amount\n        }\n    }\n}\n<\/script>\n')),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html",metastring:'title="views/Home.vue"',title:'"views/Home.vue"'},'...\n<script>\nimport MenuItem from "../components/MenuItem"\nimport { mapGetters, mapState } from "vuex"\n\nexport default {\n    name: "Home",\n    components: {\n        MenuItem\n    },\n    computed: {\n        ...mapGetters({\n            copyright: "copyright"\n        }),\n        ...mapState({\n            restaurantName: "restaurantName",\n            shoppingCart: "shoppingCart",\n            simpleMenu: "simpleMenu"\n        })\n    },\n    methods: {\n        addToShoppingCart(amount) {\n            this.shoppingCart += amount\n        }\n    }\n}\n<\/script>\n')),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript",metastring:'title="store/index.js"',title:'"store/index.js"'},'import Vue from "vue"\nimport Vuex from "vuex"\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n        restaurantName: "La belle vue",\n        shoppingCart: 0,\n        simpleMenu: [\n            {\n                name: "Croissant",\n                image: {\n                    source: "/images/crossiant.jpg",\n                    alt: "Un croissant"\n                },\n                inStock: true,\n                quantity: 1,\n                price: 2.99\n            },\n            {\n                name: "Baguette de pain",\n                image: {\n                    source: "/images/french-baguette.jpeg",\n                    alt: "Quatre baguettes de pain"\n                },\n                inStock: true,\n                quantity: 1,\n                price: 3.99\n            },\n            {\n                name: "\xc9clair",\n                image: {\n                    source: "/images/eclair.jpg",\n                    alt: "\xc9clair au chocolat"\n                },\n                inStock: false,\n                quantity: 1,\n                price: 4.99\n            }\n        ]\n    },\n    getters: {\n        copyright: (state) => {\n            const currentYear = new Date().getFullYear()\n\n            return `Copyright ${state.restaurantName} ${currentYear}`\n        }\n    },\n    mutations: {},\n    actions: {},\n    modules: {}\n})\n')),(0,i.mdx)("h3",{id:"en-r\xe9sum\xe9-2"},"En r\xe9sum\xe9"),(0,i.mdx)("p",null,"Dans ce chapitre, vous avez appris \xe0 :"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"d\xe9finir le data store\xa0dans Vuex avec ",(0,i.mdx)("strong",{parentName:"li"},"state")," ;"),(0,i.mdx)("li",{parentName:"ul"},"r\xe9cup\xe9rer des propri\xe9t\xe9s depuis Vuex dans vos composants avec ",(0,i.mdx)("inlineCode",{parentName:"li"},"$store"),"\xa0;"),(0,i.mdx)("li",{parentName:"ul"},"d\xe9finir des propri\xe9t\xe9s calcul\xe9es \xe0 l'aide d'",(0,i.mdx)("strong",{parentName:"li"},"accesseurs")," dans Vuex ;"),(0,i.mdx)("li",{parentName:"ul"},"r\xe9cup\xe9rer le ",(0,i.mdx)("strong",{parentName:"li"},"state")," depuis Vuex avec mapState ;"),(0,i.mdx)("li",{parentName:"ul"},"r\xe9cup\xe9rer des accesseurs depuis Vuex avec mapGetters.")),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Dans le chapitre suivant, nous verrons comment mettre \xe0 jour et modifier notre store dans Vuex avec les mutations et les actions. Alors,\nrendez-vous au chapitre suivant !")),(0,i.mdx)("hr",null),(0,i.mdx)("h2",{id:"modifiez-vos-donn\xe9es-dans-vuex"},"Modifiez vos donn\xe9es dans Vuex"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/6390311-creez-une-application-web-avec-vue-js/6870776-modifiez-vos-donnees-dans-vuex"},"Modifiez vos donn\xe9es dans Vuex - Cr\xe9ez une application web avec Vue.js - OpenClassrooms")),(0,i.mdx)("p",null,(0,i.mdx)("img",{parentName:"p",src:"https://user.oc-static.com/upload/2020/05/20/15899602304117_Bannee-dimension-720-798-04.png",alt:null})),(0,i.mdx)("h3",{id:"d\xe9couvrez-les-mutations"},"D\xe9couvrez les mutations"),(0,i.mdx)("p",null,"Dans le chapitre pr\xe9c\xe9dent, nous avons appris \xe0 d\xe9finir notre espace de stockage de donn\xe9es dans Vuex avec ",(0,i.mdx)("inlineCode",{parentName:"p"},"state"),"\xa0et des accesseurs, mais\n\xe9galement \xe0 r\xe9cup\xe9rer nos donn\xe9es avec des m\xe9thodes comme ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapState"),"\xa0et ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapGetters"),". Dans ce chapitre, nous allons passer \xe0 l'\xe9tape suivante\ndans la gestion de notre data store\xa0: mettre \xe0 jour et modifier nos donn\xe9es dans Vuex avec les ",(0,i.mdx)("strong",{parentName:"p"},"mutations"),"."),(0,i.mdx)(r.fG,{vimeoId:"413530387",mdxType:"Vimeo"}),(0,i.mdx)("br",null),(0,i.mdx)("p",null,"Comme nous l'avons vu dans la structure initiale de store.js :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n    },\n    mutations: {\n    },\n    actions: {\n    }\n})\n")),(0,i.mdx)("p",null,"La deuxi\xe8me cl\xe9 d\xe9finie dans le store est appel\xe9e ",(0,i.mdx)("strong",{parentName:"p"},(0,i.mdx)("em",{parentName:"strong"},"mutation")),". Comme son nom l'indique, elle contiendra un objet de toutes les propri\xe9t\xe9s\nresponsables\xa0de modifications du ",(0,i.mdx)("inlineCode",{parentName:"p"},"state"),"."),(0,i.mdx)("h4",{id:"d\xe9finissezune-mutation"},"D\xe9finissez\xa0une mutation"),(0,i.mdx)("p",null,"Si nous prenons l'exemple traditionnel du compteur, nous pouvons d\xe9finir une mutation comme suit :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"export default new Vuex.Store({\n    state: {\n        count: 0\n    },\n    mutations: {\n        INCREASE_COUNT(state) {\n            state.count += 1\n        }\n    },\n    actions: {\n    }\n})\n")),(0,i.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,i.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,i.mdx)("h5",{parentName:"div"},(0,i.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,i.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.mdx)("div",{parentName:"div",className:"admonition-content"},(0,i.mdx)("p",{parentName:"div"},"La convention de nommage pour les mutations consiste \xe0 utiliser uniquement des majuscules avec des underscores pour s\xe9parer les mots. Cela\nfait partie des bonnes pratiques et permet d'indiquer clairement qu'il ne s'agit pas de fonctions normales \xe0 appeler par hasard."))),(0,i.mdx)("p",null,"Par d\xe9faut, la mutation re\xe7oit le ",(0,i.mdx)("inlineCode",{parentName:"p"},"state"),"\xa0en premier argument. Ce dernier peut ensuite \xeatre utilis\xe9 pour effectuer les modifications\nn\xe9cessaires. Dans l'exemple ci-dessus, nous ne faisons qu'incr\xe9menter\xa0",(0,i.mdx)("inlineCode",{parentName:"p"},"state.count"),"\xa0de 1."),(0,i.mdx)("p",null,"Cependant,\xa0 cette technique a ses limites car nous pourrions envisager de rendre la valeur incr\xe9ment\xe9e dynamique. Heureusement, les mutations\npeuvent prendre un deuxi\xe8me argument : le param\xe8tre ",(0,i.mdx)("strong",{parentName:"p"},"payload"),"."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"export default new Vuex.Store({\n    state: {\n        count: 0\n    },\n    mutations: {\n        INCREASE_COUNT(state, payload) {\n            state.count += Number(payload)\n        }\n    },\n    actions: {\n    }\n})\n")),(0,i.mdx)("p",null,"Dans l'exemple r\xe9vis\xe9, nous autorisons maintenant l'utilisateur \xe0 :"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"transmettre\xa0de combien nous voulons que ",(0,i.mdx)("inlineCode",{parentName:"li"},"state.count"),"\xa0soit incr\xe9ment\xe9e ;"),(0,i.mdx)("li",{parentName:"ul"},"fixer une valeur par d\xe9faut de 1, au cas o\xf9 l'utilisateur oublie de transmettre une valeur ;"),(0,i.mdx)("li",{parentName:"ul"},"convertir la valeur en nombre pour qu'elle ne s'ajoute pas comme cha\xeene de caract\xe8res par accident.")),(0,i.mdx)("h4",{id:"actez-une-mutation"},"Actez une mutation"),(0,i.mdx)("p",null,"Lorsqu'il s'agit de modifier le state d'une application, il est ",(0,i.mdx)("strong",{parentName:"p"},"essentiel")," que cela soit fait au bon moment. En d'autres termes, une\nattention et un soin particuliers sont accord\xe9s \xe0 ces \xe9v\xe9nements, afin de s'assurer que toute erreur soit facilement identifi\xe9e. Par\ncons\xe9quent, plut\xf4t que d'invoquer la mutation comme une fonction normale, nous utilisons une action sp\xe9ciale : ",(0,i.mdx)("strong",{parentName:"p"},"commit"),"."),(0,i.mdx)("p",null,"Lorsqu'une mutation est act\xe9e, l'action commit prend deux param\xe8tres :"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"nom de la mutation ;"),(0,i.mdx)("li",{parentName:"ul"},"payload (facultatif).")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"this.$store.commit('INCREMENT_COUNT', 2)\n")),(0,i.mdx)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,i.mdx)("h5",{parentName:"div"},(0,i.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,i.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.mdx)("div",{parentName:"div",className:"admonition-content"},(0,i.mdx)("p",{parentName:"div"},"En revanche, m\xeame s'il est techniquement possible d'appeler des mutations directement \xe0 partir des composants, je ne vais pas vous le montrer,\ncar ce n'est pas consid\xe9r\xe9 comme une bonne pratique dans les applications Vue.js."))),(0,i.mdx)("p",null,"Lorsqu'une mutation est act\xe9e, la modification est faite imm\xe9diatement. En d'autres termes, les mutations Vuex sont ",(0,i.mdx)("strong",{parentName:"p"},"synchrones"),", ce qui\nsignifie qu'il n'est par exemple pas possible de r\xe9cup\xe9rer des donn\xe9es d'une API dans une mutation."),(0,i.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,i.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,i.mdx)("h5",{parentName:"div"},(0,i.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,i.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.mdx)("div",{parentName:"div",className:"admonition-content"},(0,i.mdx)("p",{parentName:"div"},"L'avantage, c'est que votre\xa0state se transforme en timeline historique, dans laquelle vous pouvez retracer les modifications apport\xe9es \xe0 ce\nstate, chaque mutation se produisant \xe9tape par \xe9tape."))),(0,i.mdx)("p",null,"Bien s\xfbr, vous vous demandez probablement de quelle mani\xe8re il faudrait acter les mutations.\xa0Pour r\xe9pondre \xe0 cette question, nous allons\xa0devoir\nparler des ",(0,i.mdx)("strong",{parentName:"p"},"actions"),"."),(0,i.mdx)("h3",{id:"d\xe9couvrez-les-actions"},"D\xe9couvrez les actions"),(0,i.mdx)("p",null,"Jusqu'\xe0 pr\xe9sent, nous avons appris que :"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"State"),"\xa0contient notre\xa0data store global ;"),(0,i.mdx)("li",{parentName:"ul"},"les accesseurs (",(0,i.mdx)("em",{parentName:"li"},"getters"),") servent de propri\xe9t\xe9s calcul\xe9es \xe0 nos espaces de stockage de donn\xe9es ;"),(0,i.mdx)("li",{parentName:"ul"},"les mutations nous permettent de mettre \xe0 jour/modifier le state.")),(0,i.mdx)("p",null,"La derni\xe8re pi\xe8ce du puzzle est les ",(0,i.mdx)("strong",{parentName:"p"},"actions"),". Elles nous servent \xe0\xa0coordonner la logique derri\xe8re les mutations. En d'autres termes, elles\nsont similaires \xe0 la propri\xe9t\xe9 ",(0,i.mdx)("inlineCode",{parentName:"p"},"methods"),"\xa0dans une instance de Vue."),(0,i.mdx)(r.fG,{vimeoId:"413530448",mdxType:"Vimeo"}),(0,i.mdx)("br",null),(0,i.mdx)("figure",null,(0,i.mdx)("img",{src:"https://user.oc-static.com/upload/2020/04/27/1587999992018_15694897862639_Screen_Shot_2019-08-12_at_7.55.31_PM.png",alt:"Les actions dans le store Vuex sont similaires \xe0 la propri\xe9t\xe9\xa0methods\xa0dans une instance Vue"}),(0,i.mdx)("figcaption",null,"Les actions dans le store Vuex sont similaires \xe0 la propri\xe9t\xe9\xa0methods\xa0dans une instance Vue")),(0,i.mdx)("h3",{id:"d\xe9finissez-une-action"},"D\xe9finissez une action"),(0,i.mdx)("p",null,"Pour continuer avec notre exemple de compteur, nous pourrions d\xe9finir notre action de la fa\xe7on suivante :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"export default new Vuex.Store({\n    state: {\n        count: 0\n    },\n    mutations: {\n        INCREASE_COUNT(state, amount = 1) {\n            state.count += Number(amount)\n        }\n    },\n    actions: {\n        incrementCount(context, amount) {\n            context.commit('INCREMENT_COUNT', amount)\n        }\n    }\n})\n")),(0,i.mdx)("p",null,"Une action est compos\xe9e d'un nom, du param\xe8tre ",(0,i.mdx)("inlineCode",{parentName:"p"},"context"),"\xa0et d'un ",(0,i.mdx)("strong",{parentName:"p"},"payload")," optionnel (comme\xa0pour les mutations). Dans l'exemple ci-dessus :"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"incrementCount")," est le nom de l'action ;"),(0,i.mdx)("li",{parentName:"ul"},"le param\xe8tre ",(0,i.mdx)("inlineCode",{parentName:"li"},"context"),"\xa0nous donne acc\xe8s aux m\xeames m\xe9thodes et propri\xe9t\xe9s dans l'instance du store Vuex (par exemple, commit, state, getters,\netc.) ;"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"amount"),"\xa0est le payload que nous devons transmettre \xe0 la mutation, afin qu'elle augmente de la bonne valeur.")),(0,i.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,i.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,i.mdx)("h5",{parentName:"div"},(0,i.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,i.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.mdx)("div",{parentName:"div",className:"admonition-content"},(0,i.mdx)("p",{parentName:"div"},"Comme je l'ai fait dans cet exemple, vous pouvez renommer le payload comme vous le souhaitez. Cependant, sachez simplement qu'il est d\xe9sign\xe9\ncomme le ",(0,i.mdx)("em",{parentName:"p"},"payload")," lorsque l'on parle d'une impl\xe9mentation."))),(0,i.mdx)("h3",{id:"d\xe9couvrez-lutilit\xe9-des-actions"},"D\xe9couvrez l'utilit\xe9 des actions"),(0,i.mdx)("p",null,"Sur la base de l'exemple ci-dessus, vous vous demandez peut-\xeatre pourquoi ne pas simplement appeler la mutation directement. Mais que se\npasserait-il lorsqu'il faut diminuer le ",(0,i.mdx)("inlineCode",{parentName:"p"},"count")," d'une certaine valeur ?"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"export default new Vuex.Store({\n    state: {\n        count: 0\n    },\n    mutations: {\n        INCREASE_COUNT(state, amount = 1) {\n            state.count += Number(amount)\n        },\n        DECREASE_COUNT(state, amount = 1) {\n            state.count -= Number(amount)\n        }\n    },\n    actions: {\n        incrementCount(context, amount) {\n            context.commit('INCREMENT_COUNT', amount)\n        }\n    }\n})\n")),(0,i.mdx)("p",null,"Une certaine logique est n\xe9cessaire pour d\xe9terminer quand d\xe9clencher chaque mutation. Pour tenir compte de cela,\xa0rendons\xa0notre action\ng\xe9n\xe9rique de la mani\xe8re suivante :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"export default new Vuex.Store({\n    state: {\n        count: 0\n    },\n    mutations: {\n        INCREASE_COUNT(state, amount = 1) {\n            state.count += Number(amount)\n        },\n        DECREASE_COUNT(state, amount = 1) {\n            state.count -= Number(amount)\n        }\n    },\n    actions: {\n        updateCount(context, amount) {\n            if (amount >= 0) {\n                context.commit('INCREASE_COUNT', amount)\n            } else {\n                context.commit('DECREASE_COUNT', amount)\n            }\n        }\n    }\n})\n")),(0,i.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,i.mdx)("h5",{parentName:"div"},(0,i.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,i.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"?")),(0,i.mdx)("div",{parentName:"div",className:"admonition-content"},(0,i.mdx)("p",{parentName:"div"},"Pourquoi ne pas simplement r\xe9unir les mutations en une seule ?"))),(0,i.mdx)("p",null,"Nous pourrions\xa0rendre la mutation g\xe9n\xe9rique \xe0 quelque chose comme ",(0,i.mdx)("inlineCode",{parentName:"p"},"CHANGE_COUNT"),", mais en regardant l'historique, cela\xa0nous fournirait moins\nde d\xe9tails, ce qui rend les choses plus difficiles \xe0 d\xe9bugger. Par cons\xe9quent, il est pr\xe9f\xe9rable que les mutations gardent un seul usage.\nLaissez la logique aux actions."),(0,i.mdx)("p",null,"De plus, comme le param\xe8tre ",(0,i.mdx)("inlineCode",{parentName:"p"},"context"),"\xa0peut \xeatre utilis\xe9 pour acc\xe9der \xe0 de nombreuses propri\xe9t\xe9s diff\xe9rentes du store Vuex, vous allez\nd\xe9couvrir une technique de codage courante qui est l'",(0,i.mdx)("a",{parentName:"p",href:"https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Op%C3%A9rateurs/Affecter_par_d%C3%A9composition"},"affectation par d\xe9composition"),"\n(",(0,i.mdx)("em",{parentName:"p"},"desctructuring"),", en anglais). Elle est faite pour simplifier le code et le rendre plus facile \xe0 lire. Avec notre exemple, cela ressemblerait\n\xe0 ce qui suit :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"export default new Vuex.Store({\n    state: {\n        count: 0\n    },\n    mutations: {\n        INCREASE_COUNT(state, amount = 1) {\n            state.count += Number(amount)\n        },\n        DECREASE_COUNT(state, amount = 1) {\n            state.count -= Number(amount)\n        }\n    },\n    actions: {\n        updateCount({ commit }, amount) {\n            if (amount >= 0) {\n                commit('INCREASE_COUNT', amount)\n            } else {\n                commit('DECREASE_COUNT', amount)\n            }\n        }\n    }\n})\n")),(0,i.mdx)("p",null,"En plus de nous donner la libert\xe9 de d\xe9terminer la logique du moment o\xf9 les mutations sont d\xe9clench\xe9es, les ",(0,i.mdx)("inlineCode",{parentName:"p"},"actions")," sont ",(0,i.mdx)("strong",{parentName:"p"},"asynchrones"),".\nCela signifie que vous ne pouvez appeler des API et acter des mutations qu'en cas de r\xe9ussite. Ou en fonction de ce que vous souhaitez r\xe9aliser."),(0,i.mdx)("p",null,"Maintenant que nous savons comment d\xe9finir les actions, la question suivante se pose : comment les utiliser dans nos composants ?"),(0,i.mdx)("h4",{id:"utilisez-les-actions-dans-les-composants"},"Utilisez les actions dans les composants"),(0,i.mdx)("p",null,"Tout comme il existe un terme sp\xe9cial pour invoquer les mutations (c'est-\xe0-dire acter ou \xab\xa0commit \xbb), il existe aussi un terme sp\xe9cial pour\nles actions : ",(0,i.mdx)("strong",{parentName:"p"},"propager (",(0,i.mdx)("em",{parentName:"strong"},"dispatch"),")"),". En d'autres termes, vous envoyez l'action pour ex\xe9cuter une t\xe2che. Donc, si vous vouliez propager une\naction depuis votre composant, cela ressemblerait \xe0 ce qui suit :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html"},"<template>\n    <div>\n        <p>{{ count }}</p>\n        <button @click=\"sendUpdateCountAction\">Increment</button>\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n    computed: {\n        ...mapState(['count'])\n    },\n    methods: {\n        sendUpdateCountAction() {\n            this.$store.dispatch('updateCount')\n        }\n    }\n}\n<\/script>\n")),(0,i.mdx)("p",null,"Cependant, comme pour ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapState"),"\xa0et ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapGetters"),", il existe un \xe9quivalent pour les actions : ",(0,i.mdx)("inlineCode",{parentName:"p"},"mapActions"),"."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html"},"<template>\n    <div>\n        <p>{{ count }}</p>\n        <button @click=\"updateCount\">Increment</button>\n    </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex'\n\nexport default {\n    computed: {\n        ...mapState(['count'])\n    },\n    methods: {\n        ...mapActions(['updateCount'])\n    }\n}\n<\/script>\n")),(0,i.mdx)("p",null,"Vous connaissez maintenant les principaux \xe9l\xe9ments de Vuex !"),(0,i.mdx)("h3",{id:"entra\xeenez-vous-3"},"Entra\xeenez-vous"),(0,i.mdx)("p",null,"Vous trouverez le code source des exercices dans ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/amandinelemoult2109/Vue-fr"},"le repo GitHub du cours"),", dans le dossier\n",(0,i.mdx)("inlineCode",{parentName:"p"},"cafe-with-a-view"),". Pour commencer, consultez la branche ",(0,i.mdx)("inlineCode",{parentName:"p"},"P4C4-Begin"),"."),(0,i.mdx)("h4",{id:"instructions-3"},"Instructions"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"Migrez l'\xe9v\xe9nement d'ajout au panier de ",(0,i.mdx)("inlineCode",{parentName:"li"},"Home.vue"),"\xa0et ",(0,i.mdx)("inlineCode",{parentName:"li"},"MenuItem.vue"),"\xa0vers Vuex."),(0,i.mdx)("li",{parentName:"ol"},"Cr\xe9ez une mutation qui\xa0met \xe0 jour le ",(0,i.mdx)("inlineCode",{parentName:"li"},"state"),"\xa0du shoppingCart."),(0,i.mdx)("li",{parentName:"ol"},"Cr\xe9ez une action qui peut \xeatre d\xe9clench\xe9e depuis ",(0,i.mdx)("inlineCode",{parentName:"li"},"MenuItem.vue"),"\xa0qui met \xe0 jour le panier d'achat dans ",(0,i.mdx)("inlineCode",{parentName:"li"},"Home.vue"),".")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html",metastring:'{8,47-51} title="views/Home.vue"',"{8,47-51}":!0,title:'"views/Home.vue"'},'<template>\n    <div>\n        ...\n        <section class="menu">\n            <h2>Menu</h2>\n            <MenuItem\n                v-for="item in simpleMenu"\n                @add-items-to-cart="addToShoppingCart" \x3c!--  supprimer --\x3e\n                :name="item.name"\n                :image="item.image"\n                :price="item.price"\n                :quantity="item.quantity"\n                :inStock="item.inStock"\n                :key="item.name"\n            />\n        </section>\n\n        <div class="shopping-cart">\n            <h2>Panier: {{ shoppingCart }} articles</h2>\n        </div>\n\n        <footer class="footer">\n            <p>{{ copyright }}</p>\n        </footer>\n    </div>\n</template>\n\n<script>\nimport MenuItem from "../components/MenuItem"\nimport { mapGetters, mapState } from "vuex"\n\nexport default {\n    name: "Home",\n    components: {\n        MenuItem\n    },\n    computed: {\n        ...mapGetters({\n            copyright: "copyright"\n        }),\n        ...mapState({\n            restaurantName: "restaurantName",\n            shoppingCart: "shoppingCart",\n            simpleMenu: "simpleMenu"\n        })\n    },\n    methods: {                                  \x3c!-- Supprimer --\x3e\n        addToShoppingCart(amount) {\n            this.shoppingCart += amount\n        }\n    }\n}\n<\/script>\n')),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html",metastring:'{8-11} title="components/MenuItem.vue"',"{8-11}":!0,title:'"components/MenuItem.vue"'},'<script>\nimport { mapActions } from "vuex" \x3c!-- Ajouter --\x3e\nimport BaseButton from "./BaseButton.vue"\n\nexport default {\n    ...\n    methods: {\n        \x3c!-- updateShoppingCart(quantity) {             \x3c!-- Modifier --\x3e\n            this.$emit("add-items-to-cart", quantity)\n        } --\x3e\n        ...mapActions(["updateShoppingCart"])\n    },\n    ...\n}\n<\/script>\n')),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript",metastring:'{17-26} title="storee/index.js"',"{17-26}":!0,title:'"storee/index.js"'},'import Vue from "vue"\nimport Vuex from "vuex"\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n        ...\n    },\n    getters: {\n        copyright: (state) => {\n            const currentYear = new Date().getFullYear()\n\n            return `Copyright ${state.restaurantName} ${currentYear}`\n        }\n    },\n    mutations: {\n        ADD_ITEMS_TO_SHOPPING_CART(state, amount) {\n            state.shoppingCart += amount\n        }\n    },\n    actions: {\n        updateShoppingCart({ commit }, amount) {\n            commit("ADD_ITEMS_TO_SHOPPING_CART", amount)\n        }\n    },\n    modules: {}\n})\n')),(0,i.mdx)("h3",{id:"en-r\xe9sum\xe9-3"},"En r\xe9sum\xe9"),(0,i.mdx)("p",null,"Dans ce chapitre, vous avez d\xe9couvert :"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"ce que sont les mutations et les actions ;"),(0,i.mdx)("li",{parentName:"ul"},"comment utiliser les mutations pour mettre \xe0 jour le state ;"),(0,i.mdx)("li",{parentName:"ul"},"comment utiliser les actions pour g\xe9rer vos mutations ;"),(0,i.mdx)("li",{parentName:"ul"},"comment d\xe9clarer et utiliser des actions dans vos composants.")),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"C'est maintenant le moment de passer en revue nos acquis de la partie. Rendez-vous au prochain chapitre !")),(0,i.mdx)("hr",null),(0,i.mdx)("h2",{id:"r\xe9sum\xe9-de-la-partie-4"},"R\xe9sum\xe9 de la partie 4"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/6390311-creez-une-application-web-avec-vue-js/6871196-resume-de-la-partie-4"},"R\xe9sum\xe9 de la partie 4 - Cr\xe9ez une application web avec Vue.js - OpenClassrooms")),(0,i.mdx)("p",null,(0,i.mdx)("img",{parentName:"p",src:"https://user.oc-static.com/upload/2020/05/20/15899603266314_Bannee-dimension-720-798-04.png",alt:null})),(0,i.mdx)("p",null,"Dans cette partie du cours, nous avons appris comment ",(0,i.mdx)("strong",{parentName:"p"},"g\xe9rer le state global d'une application avec Vuex"),"."),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Configurer une application Vue pour utiliser ",(0,i.mdx)("strong",{parentName:"li"},"Vuex")," avec Vue CLI."),(0,i.mdx)("li",{parentName:"ul"},"D\xe9finir et r\xe9cup\xe9rer des donn\xe9es depuis le ",(0,i.mdx)("strong",{parentName:"li"},"state")," (\xe9tat) de Vuex."),(0,i.mdx)("li",{parentName:"ul"},"D\xe9finir et r\xe9cup\xe9rer des donn\xe9es calcul\xe9es depuis les ",(0,i.mdx)("strong",{parentName:"li"},"accesseurs")," (getters) de Vuex."),(0,i.mdx)("li",{parentName:"ul"},"D\xe9finir et acter des modifications du state\xa0de Vuex avec les ",(0,i.mdx)("strong",{parentName:"li"},"mutations"),"."),(0,i.mdx)("li",{parentName:"ul"},"D\xe9finir et propager des mutations avec les ",(0,i.mdx)("strong",{parentName:"li"},"actions")," Vuex.")),(0,i.mdx)("p",null,"F\xe9licitations ! Vous avez maintenant acquis une comp\xe9tence essentielle pour construire une application qui scale \xe0 grande \xe9chelle.\xa0C'est\nmaintenant le bon moment pour tester vos connaissances avec un quiz pr\xe9par\xe9 juste pour vous. Bonne chance ! \ud83c\udf40"),(0,i.mdx)("hr",null),(0,i.mdx)("h2",{id:"quiz--g\xe9rez-les-donn\xe9es-de-votre-application"},"Quiz : G\xe9rez les donn\xe9es de votre application"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/6390311-creez-une-application-web-avec-vue-js/exercises/3851"},"G\xe9rez les donn\xe9es de votre application - OpenClassrooms")),(0,i.mdx)("h4",{id:"comp\xe9tences-\xe9valu\xe9es"},"Comp\xe9tences \xe9valu\xe9es"),(0,i.mdx)("i",{class:"bi bi-check2-circle"})," G\xe9rer les donn\xe9es d'une application",(0,i.mdx)("hr",null),(0,i.mdx)("h4",{id:"question-1--pourquoi-la-gestion-d\xe9tat-state-management-est-elle-importante-"},"Question 1 : Pourquoi la gestion d'\xe9tat (",(0,i.mdx)("em",{parentName:"h4"},"state management"),") est-elle importante ?"),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Attention, plusieurs r\xe9ponses sont possibles.")),(0,i.mdx)("i",{class:"bi bi-check-square-fill"})," La synchronisation des donn\xe9es d'une application peut devenir trop complexe \xe0 mesure qu'une application se d\xe9veloppe et s'\xe9tend.",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-check-square-fill"})," Cela nous permet de cr\xe9er une source unique de v\xe9rit\xe9 pour les donn\xe9es de notre application.",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-square"})," Elle garantit que toutes les copies de donn\xe9es sont ind\xe9pendantes les unes des autres.",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-check-square-fill"})," Les composants de notre application doivent pouvoir acc\xe9der aux donn\xe9es et les mettre \xe0 jour, quel que soit leur emplacement dans la codebase.",(0,i.mdx)("br",null),(0,i.mdx)("br",null),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Il est difficile de synchroniser les donn\xe9es \xe0 mesure qu'une application se d\xe9veloppe\xa0et prend de l'ampleur. Les mod\xe8les de gestion d'\xe9tat\ntels que Vuex sont essentiels pour r\xe9ussir \xe0 construire une application \xe0 plus grande \xe9chelle. La r\xe9ussite de la gestion d'un state est tr\xe8s\nsouvent li\xe9e au respect du principe de source unique de v\xe9rit\xe9.")),(0,i.mdx)("hr",null),(0,i.mdx)("h4",{id:"question-2--quelle-partie-de-vuex-est-charg\xe9e-dapporter-directement-des-modifications-au-data-store-"},"Question 2 : Quelle partie de Vuex est charg\xe9e d'apporter directement des modifications au data store ?"),(0,i.mdx)("i",{class:"bi bi-circle"})," Le state",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," Les getters",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," Les actions",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-record-circle"})," Les mutations",(0,i.mdx)("br",null),(0,i.mdx)("br",null),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Les mutations sont la seule fa\xe7on d'apporter des changements au store Vuex.")),(0,i.mdx)("hr",null),(0,i.mdx)("h4",{id:"question-3--quelle-partie-de-vuex-est-responsable-de-la-gestion-des-donn\xe9es-dans-le-store-"},"Question 3 : Quelle partie de Vuex est responsable de la gestion des donn\xe9es dans le store ?"),(0,i.mdx)("i",{class:"bi bi-record-circle"})," Le state",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," Les getters",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," Les actions",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," Les mutations",(0,i.mdx)("br",null),(0,i.mdx)("br",null),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Vuex utilise le state comme data store, ce qui est analogue \xe0 la propri\xe9t\xe9 ",(0,i.mdx)("inlineCode",{parentName:"em"},"data"),"\xa0que nous utilisons dans les instances de Vue.")),(0,i.mdx)("hr",null),(0,i.mdx)("h4",{id:"question-4--quelle-partie-de-vuex-est-responsable-de-la-gestion-de-la-logique-qui-peut-d\xe9clencher-des-changements-dans-le-data-store-"},"Question 4 : Quelle partie de Vuex est responsable de la gestion de la logique qui peut d\xe9clencher des changements dans le data store ?"),(0,i.mdx)("i",{class:"bi bi-circle"})," Le state",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," Les getters",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-record-circle"})," Les actions",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," Les mutations",(0,i.mdx)("br",null),(0,i.mdx)("br",null),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Comme la seule responsabilit\xe9 d'une mutation est la mise \xe0 jour du store, la responsabilit\xe9 des actions est de g\xe9rer la logique et de\nd\xe9clencher\xa0les appels asynchrones, ce qui peut d\xe9clencher autant de mutations que n\xe9cessaire.")),(0,i.mdx)("hr",null),(0,i.mdx)("h4",{id:"question-5--quel-est-le-mot-cl\xe9-pour-d\xe9clencher-une-mutation-"},"Question 5 : Quel est le mot cl\xe9 pour d\xe9clencher une mutation ?"),(0,i.mdx)("i",{class:"bi bi-circle"})," ",(0,i.mdx)("code",null,"trigger"),(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-record-circle"})," ",(0,i.mdx)("code",null,"commit"),(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," initiate",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," call",(0,i.mdx)("br",null),(0,i.mdx)("br",null),(0,i.mdx)("p",null,"_Le mot cl\xe9 ",(0,i.mdx)("inlineCode",{parentName:"p"},"commit"),"\xa0permet d'appeler des mutations."),(0,i.mdx)("hr",null),(0,i.mdx)("h4",{id:"question-6--actuellement-un-d\xe9veloppeur-utilise-les-getters-de-la-mani\xe8re-suivante-"},"Question 6 : Actuellement, un d\xe9veloppeur utilise les getters de la mani\xe8re suivante :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n        price: 40\n    },\n    getters: {\n        getPrice: state => state.price\n    }\n})\n")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Qu\u2019est-ce qui est incorrect ?")),(0,i.mdx)("i",{class:"bi bi-circle"})," Les getters ne doivent \xeatre utilis\xe9s que pour les fonctions asynchrones.",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-record-circle"})," Les getters sont destin\xe9s \xe0 \xeatre utilis\xe9s comme des propri\xe9t\xe9s calcul\xe9es plut\xf4t que de simplement r\xe9cup\xe9rer un \xe9tat, puisque l'on peut y acc\xe9der directement par des m\xe9thodes comme mapState.",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," Les getters doivent \xeatre utilis\xe9s pour faire muter l'\xe9tat.",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," Il n'y a pas de probl\xe8me avec ce code.",(0,i.mdx)("br",null),(0,i.mdx)("br",null),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Les getters sont utilis\xe9s pour calculer l'\xe9tat d\xe9riv\xe9 sur la base de l'\xe9tat actuel du store. Les exemples comprennent le filtrage d'une liste\nd'articles ou le renvoi de la longueur de la liste. SI vous voulez en apprendre plus, vous pouvez jeter un \u0153il \xe0 la ",(0,i.mdx)("a",{parentName:"em",href:"https://vuex.vuejs.org/fr/guide/getters.html"},"documentation officielle des getters (ou accesseurs, en fran\xe7ais)."),".")),(0,i.mdx)("hr",null),(0,i.mdx)("h4",{id:"question-7--un-d\xe9veloppeur-essaie-de-d\xe9bugger-le-code-suivant-"},"Question 7 : Un d\xe9veloppeur essaie de d\xe9bugger le code suivant :"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n        price: 40\n    },\n    mutations: {\n        fetchPrice (state) {\n            const response = fetch('/api/price')\n            state = response\n        }\n    }\n})\n")),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Attention, plusieurs r\xe9ponses sont possibles.")),(0,i.mdx)("i",{class:"bi bi-check-square-fill"})," Les mutations sont des transactions synchrones.",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-check-square-fill"})," Les mutations ne peuvent pas contenir de code asynchrone comme la r\xe9cup\xe9ration de donn\xe9es \xe0 partir d'une API.",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-check-square-fill"})," Elles doivent utiliser une ",(0,i.mdx)("code",null,"action")," pour r\xe9cup\xe9rer les donn\xe9es et ensuite\xa0acter une mutation avec ",(0,i.mdx)("code",null,"commit")," qui met \xe0 jour l'\xe9tat.",(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-square"})," Elles doivent utiliser des getters \xe0 la place des mutations.",(0,i.mdx)("br",null),(0,i.mdx)("br",null),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Les mutations sont uniquement destin\xe9es \xe0 la mise \xe0 jour de l'\xe9tat, alors que les actions asynchrones n\xe9cessitent l'utilisateur d'actions.")),(0,i.mdx)("hr",null),(0,i.mdx)("h4",{id:"question-8--quelle-est-la-syntaxe-la-plus-courante-pour-acc\xe9der-aux-actions-dun-store-vuex-dans-un-composant-"},"Question 8 : Quelle est la syntaxe la plus courante pour acc\xe9der aux actions d'un store Vuex dans un composant ?"),(0,i.mdx)("i",{class:"bi bi-circle"})," ",(0,i.mdx)("code",null,"...generateActions()"),(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," ",(0,i.mdx)("code",null,"...listActions()"),(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-record-circle"})," ",(0,i.mdx)("code",null,"...mapActions()"),(0,i.mdx)("br",null),(0,i.mdx)("i",{class:"bi bi-circle"})," ",(0,i.mdx)("code",null,"...getActions()"),(0,i.mdx)("br",null),(0,i.mdx)("br",null),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Bien que vous puissiez acc\xe9der aux actions de Vuex via ",(0,i.mdx)("inlineCode",{parentName:"em"},"this.$store.dispatch"),", il est plus courant d'utiliser ",(0,i.mdx)("inlineCode",{parentName:"em"},"map")," pour d\xe9finir les\npropri\xe9t\xe9s que vous souhaitez voir disponibles dans Vue.")))}c.isMDXComponent=!0}}]);