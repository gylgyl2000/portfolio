"use strict";(self.webpackChunkmon_web_dev_wiki=self.webpackChunkmon_web_dev_wiki||[]).push([[8902],{69478:function(e,l,n){n.r(l),n.d(l,{frontMatter:function(){return r},contentTitle:function(){return d},metadata:function(){return m},toc:function(){return u},default:function(){return c}});var a=n(87462),i=n(63366),t=(n(67294),n(3905)),s=["components"],r={sidebar_position:2},d="OpenClassrooms",m={unversionedId:"Aide-memoire/MySQL/OpenClassrooms",id:"Aide-memoire/MySQL/OpenClassrooms",title:"OpenClassrooms",description:"Sources :",source:"@site/docs/Aide-memoire/MySQL/OpenClassrooms.mdx",sourceDirName:"Aide-memoire/MySQL",slug:"/Aide-memoire/MySQL/OpenClassrooms",permalink:"/Mon_Web_Dev_Wiki/docs/Aide-memoire/MySQL/OpenClassrooms",editUrl:"https://github.com/gylgyl2000/Mon_Web_Dev_Wiki/edit/master/website/docs/Aide-memoire/MySQL/OpenClassrooms.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"AideMemoireSidebar",previous:{title:"Accueil",permalink:"/Mon_Web_Dev_Wiki/docs/Aide-memoire/MySQL/accueil"},next:{title:"devhints",permalink:"/Mon_Web_Dev_Wiki/docs/Aide-memoire/MySQL/devhints"}},u=[{value:"Installer MySQL",id:"installer-mysql",children:[{value:"V\xe9rifiez si MySQL est install\xe9",id:"v\xe9rifiez-si-mysql-est-install\xe9",children:[],level:3},{value:"D\xe9marrer MySQL et activer au d\xe9marrage",id:"d\xe9marrer-mysql-et-activer-au-d\xe9marrage",children:[],level:3},{value:"D\xe9finir le mot de passe root pour MySQL",id:"d\xe9finir-le-mot-de-passe-root-pour-mysql",children:[],level:3},{value:"V\xe9rifier la version de MySQL",id:"v\xe9rifier-la-version-de-mysql",children:[],level:3},{value:"Acc\xe9der au shell MySQL",id:"acc\xe9der-au-shell-mysql",children:[],level:3},{value:"Cr\xe9er un utilisateur sur MySQL",id:"cr\xe9er-un-utilisateur-sur-mysql",children:[],level:3}],level:2},{value:"Cr\xe9er une base <code>CREATE DATABASE</code>",id:"cr\xe9er-une-base-create-database",children:[],level:2},{value:"S\xe9lectionner la base <code>USE</code>",id:"s\xe9lectionner-la-base-use",children:[],level:2},{value:"Lister les bases de donn\xe9es <code>SHOW DATABASE</code>",id:"lister-les-bases-de-donn\xe9es-show-database",children:[],level:2},{value:"Cr\xe9er une table <code>CREATE TABLE</code>",id:"cr\xe9er-une-table-create-table",children:[],level:2},{value:"Voir les tables <code>SHOW TABLES</code>",id:"voir-les-tables-show-tables",children:[],level:2},{value:"Voir le contenu d&#39;une table <code>SHOW COLUMNS</code>",id:"voir-le-contenu-dune-table-show-columns",children:[],level:2},{value:"Ins\xe9rez des objets <code>INSERT INTO</code> <code>VALUES</code>",id:"ins\xe9rez-des-objets-insert-into-values",children:[],level:2},{value:"Lire les objets <code>SELECT</code>",id:"lire-les-objets-select",children:[],level:2},{value:"Mettez \xe0 jour un objet <code>UPDATE</code>",id:"mettez-\xe0-jour-un-objet-update",children:[],level:2},{value:"Supprimez un objet <code>DELETE FROM</code>",id:"supprimez-un-objet-delete-from",children:[],level:2},{value:"S\xe9lectionner un objet <code>SELECT</code> <code>FROM</code> <code>WHERE</code>",id:"s\xe9lectionner-un-objet-select-from-where",children:[{value:"S\xe9lectionner un objet unique",id:"s\xe9lectionner-un-objet-unique",children:[],level:3},{value:"S\xe9lectionner un objet avec crit\xe8re de comparaison",id:"s\xe9lectionner-un-objet-avec-crit\xe8re-de-comparaison",children:[],level:3},{value:"S\xe9lectionner un objet avec comparaison de texte <code>SELECT</code> <code>FROM</code> <code>WHERE</code> <code>LIKE</code>",id:"s\xe9lectionner-un-objet-avec-comparaison-de-texte-select-from-where-like",children:[],level:3}],level:2},{value:"Ordonner des objets <code>ORDER BY</code>",id:"ordonner-des-objets-order-by",children:[],level:2},{value:"Comptez le nombre d\u2019objets <code>SELECT COUNT</code>",id:"comptez-le-nombre-dobjets-select-count",children:[],level:2},{value:"Effectuez des op\xe9rations sur des donn\xe9es chiffr\xe9es <code>AVG</code> <code>SUM</code> <code>MAX</code> <code>MIN</code>",id:"effectuez-des-op\xe9rations-sur-des-donn\xe9es-chiffr\xe9es-avg-sum-max-min",children:[],level:2},{value:"Sauvegardez les requ\xeates <code>CREATE VIEW</code>",id:"sauvegardez-les-requ\xeates-create-view",children:[],level:2},{value:"Extraire des informations <code>JOIN</code>",id:"extraire-des-informations-join",children:[{value:"Via une relation 1 \xe0 plusieurs",id:"via-une-relation-1-\xe0-plusieurs",children:[],level:3},{value:"Via une relation plusieurs \xe0 plusieurs",id:"via-une-relation-plusieurs-\xe0-plusieurs",children:[],level:3}],level:2},{value:"Modifiez la structure d\u2019un objet <code>ALTER TABLE</code>",id:"modifiez-la-structure-dun-objet-alter-table",children:[{value:"Ajoutez un champ <code>ADD</code>",id:"ajoutez-un-champ-add",children:[],level:3},{value:"Supprimez un champ <code>DROP</code>",id:"supprimez-un-champ-drop",children:[],level:3},{value:"Modifiez un champ <code>MODIFY</code>",id:"modifiez-un-champ-modify",children:[],level:3},{value:"Renommez un champ <code>CHANGE</code>",id:"renommez-un-champ-change",children:[],level:3}],level:2},{value:"Ajoutez une relation un \xe0 plusieurs",id:"ajoutez-une-relation-un-\xe0-plusieurs",children:[],level:2},{value:"Ajoutez une relation plusieurs \xe0 plusieurs",id:"ajoutez-une-relation-plusieurs-\xe0-plusieurs",children:[],level:2},{value:"Suppression d&#39;un objet unique <code>ON DELETE</code>",id:"suppression-dun-objet-unique-on-delete",children:[],level:2},{value:"Mise \xe0 jour d&#39;un objet <code>ON UPDATE</code>",id:"mise-\xe0-jour-dun-objet-on-update",children:[],level:2}],o={toc:u};function c(e){var l=e.components,n=(0,i.Z)(e,s);return(0,t.mdx)("wrapper",(0,a.Z)({},o,n,{components:l,mdxType:"MDXLayout"}),(0,t.mdx)("h1",{id:"openclassrooms"},"OpenClassrooms"),(0,t.mdx)("p",null,(0,t.mdx)("strong",{parentName:"p"},"Sources :")),(0,t.mdx)("ul",null,(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("a",{parentName:"li",href:"https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/"},"MySQL :: A Quick Guide to Using the MySQL APT Repository - MySQL Documentation")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("a",{parentName:"li",href:"https://likegeeks.com/mysql-on-linux-beginners-tutorial/"},"MySQL On Linux (Beginners Tutorial) - Like Geeks"))),(0,t.mdx)("p",null,(0,t.mdx)("strong",{parentName:"p"},"Failed to restart mysql.service: Unit mysql.service is masked.")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-shell"},"systemctl unmask mysql.service\nservice mysql start\n")),(0,t.mdx)("h2",{id:"installer-mysql"},"Installer MySQL"),(0,t.mdx)("p",null,"Mettre \xe0 jour APT :"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"sudo apt update\n")),(0,t.mdx)("p",null,"Installer :"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"sudo apt install mysql-server\n")),(0,t.mdx)("blockquote",null,(0,t.mdx)("pre",{parentName:"blockquote"},(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"sudo apt install mysql-community-server\n"))),(0,t.mdx)("h3",{id:"v\xe9rifiez-si-mysql-est-install\xe9"},"V\xe9rifiez si MySQL est install\xe9"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"mysql --version\n")),(0,t.mdx)("h3",{id:"d\xe9marrer-mysql-et-activer-au-d\xe9marrage"},"D\xe9marrer MySQL et activer au d\xe9marrage"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"sudo systemctl start mysql\n")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"sudo service mysql start\n")),(0,t.mdx)("p",null,"Si vous red\xe9marrez le syst\xe8me, vous remarquerez que MySQL ne fonctionne pas. Nous devons donc lui permettre de s'ex\xe9cuter au d\xe9marrage\ndu syst\xe8me."),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"sudo systemctl enable mysql\n")),(0,t.mdx)("p",null,"V\xe9rifiez si MySQL est en cours d'ex\xe9cution"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"sudo systemctl status mysql\n")),(0,t.mdx)("p",null,"Red\xe9marrer MySQL"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"sudo systemctl restart mysql\n")),(0,t.mdx)("h3",{id:"d\xe9finir-le-mot-de-passe-root-pour-mysql"},"D\xe9finir le mot de passe root pour MySQL"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"sudo mysql_secure_installation\n")),(0,t.mdx)("h3",{id:"v\xe9rifier-la-version-de-mysql"},"V\xe9rifier la version de MySQL"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"mysql --version\n")),(0,t.mdx)("h3",{id:"acc\xe9der-au-shell-mysql"},"Acc\xe9der au shell MySQL"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sh",metastring:'title="shell"',title:'"shell"'},"sudo mysql -u root -p\n")),(0,t.mdx)("p",null,"-u : avec un utilisateur => ici, l'utilisateur root.",(0,t.mdx)("br",null),"\n-p : dire \xe0 MySQL qu'on va taper le mot de passe de l'utilisateur."),(0,t.mdx)("h3",{id:"cr\xe9er-un-utilisateur-sur-mysql"},"Cr\xe9er un utilisateur sur MySQL"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql"},"mysql> CREATE USER 'user'@'localhost' IDENTIFIED BY 'password';\n")),(0,t.mdx)("p",null,"Remplacez \xab utilisateur \xbb par le nom d'utilisateur de votre choix. 'localhost' est l'h\xf4te sur lequel vous allez cr\xe9er l'utilisateur. Et dans\n\xab mot de passe \xbb, entrez le mot de passe de ce nouvel utilisateur. De m\xeame, il est recommand\xe9 que ce soit un mot de passe fort."),(0,t.mdx)("h2",{id:"cr\xe9er-une-base-create-database"},"Cr\xe9er une base ",(0,t.mdx)("inlineCode",{parentName:"h2"},"CREATE DATABASE")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> CREATE DATABASE nomdelabase;\n")),(0,t.mdx)("h2",{id:"s\xe9lectionner-la-base-use"},"S\xe9lectionner la base ",(0,t.mdx)("inlineCode",{parentName:"h2"},"USE")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> USE nomdelabase;\n")),(0,t.mdx)("h2",{id:"lister-les-bases-de-donn\xe9es-show-database"},"Lister les bases de donn\xe9es ",(0,t.mdx)("inlineCode",{parentName:"h2"},"SHOW DATABASE")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> SHOW DATABASE\n")),(0,t.mdx)("h2",{id:"cr\xe9er-une-table-create-table"},"Cr\xe9er une table ",(0,t.mdx)("inlineCode",{parentName:"h2"},"CREATE TABLE")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> CREATE TABLE utilisateur (\n    -> id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    -> nom VARCHAR(100),\n    -> prenom VARCHAR(100),\n    -> email VARCHAR(255) NOT NULL UNIQUE\n    -> );\n")),(0,t.mdx)("h2",{id:"voir-les-tables-show-tables"},"Voir les tables ",(0,t.mdx)("inlineCode",{parentName:"h2"},"SHOW TABLES")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> SHOW TABLES;\n")),(0,t.mdx)("h2",{id:"voir-le-contenu-dune-table-show-columns"},"Voir le contenu d'une table ",(0,t.mdx)("inlineCode",{parentName:"h2"},"SHOW COLUMNS")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> SHOW COLUMNS FROM nomdelatable;\n")),(0,t.mdx)("h2",{id:"ins\xe9rez-des-objets-insert-into-values"},"Ins\xe9rez des objets ",(0,t.mdx)("inlineCode",{parentName:"h2"},"INSERT INTO")," ",(0,t.mdx)("inlineCode",{parentName:"h2"},"VALUES")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> INSERT INTO utilisateur (`nom`, `prenom`, `email`)\nVALUES\n('Doe', 'John', 'john@yahoo.fr'),\n('Smith', 'Jane', 'jane@hotmail.com'),\n('Dupont', 'Sebastien', 'sebastien@orange.fr'),\n('Martin', 'Emilie', 'emilie@gmail.com');\n")),(0,t.mdx)("h2",{id:"lire-les-objets-select"},"Lire les objets ",(0,t.mdx)("inlineCode",{parentName:"h2"},"SELECT")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> SELECT * FROM utilisateur;\n")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> SELECT `nom`, `prenom`, `email` FROM utilisateur;\n")),(0,t.mdx)("h2",{id:"mettez-\xe0-jour-un-objet-update"},"Mettez \xe0 jour un objet ",(0,t.mdx)("inlineCode",{parentName:"h2"},"UPDATE")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> UPDATE `utilisateur` SET `email` = 'quentind@gmail.com' WHERE `id` = '1';\n")),(0,t.mdx)("h2",{id:"supprimez-un-objet-delete-from"},"Supprimez un objet ",(0,t.mdx)("inlineCode",{parentName:"h2"},"DELETE FROM")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> DELETE FROM `utilisateur` WHERE `id` = '2';\n")),(0,t.mdx)("h2",{id:"s\xe9lectionner-un-objet-select-from-where"},"S\xe9lectionner un objet ",(0,t.mdx)("inlineCode",{parentName:"h2"},"SELECT")," ",(0,t.mdx)("inlineCode",{parentName:"h2"},"FROM")," ",(0,t.mdx)("inlineCode",{parentName:"h2"},"WHERE")),(0,t.mdx)("h3",{id:"s\xe9lectionner-un-objet-unique"},"S\xe9lectionner un objet unique"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> SELECT * FROM aliment WHERE id = 4;\nmysql> SELECT * FROM aliment WHERE nom = \u201cpoire\u201d;\n")),(0,t.mdx)("h3",{id:"s\xe9lectionner-un-objet-avec-crit\xe8re-de-comparaison"},"S\xe9lectionner un objet avec crit\xe8re de comparaison"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"mysql> SELECT * FROM aliment WHERE calories < 90;\nmysql> SELECT * FROM aliment WHERE calories > 90;\nmysql> SELECT * FROM aliment WHERE calories >= 90;\nmysql> SELECT * FROM aliment WHERE calories <= 90;\n")),(0,t.mdx)("h3",{id:"s\xe9lectionner-un-objet-avec-comparaison-de-texte-select-from-where-like"},"S\xe9lectionner un objet avec comparaison de texte ",(0,t.mdx)("inlineCode",{parentName:"h3"},"SELECT")," ",(0,t.mdx)("inlineCode",{parentName:"h3"},"FROM")," ",(0,t.mdx)("inlineCode",{parentName:"h3"},"WHERE")," ",(0,t.mdx)("inlineCode",{parentName:"h3"},"LIKE")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},'/* Texte se terminant par "gmail.com" */\nmysql> SELECT * FROM utilisateur WHERE email LIKE \u201c%gmail.com\u201d;\n/* Texte commen\xe7ant par "gmail.com" */\nmysql> SELECT * FROM utilisateur WHERE email LIKE \u201cgmail.com%\u201d;\n/* Texte contenant "gmail.com" au d\xe9but ou \xe0 la fin */\nmysql> SELECT * FROM utilisateur WHERE email LIKE \u201c%gmail.com%\u201d;\n')),(0,t.mdx)("h2",{id:"ordonner-des-objets-order-by"},"Ordonner des objets ",(0,t.mdx)("inlineCode",{parentName:"h2"},"ORDER BY")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"/* Ordonner une colonne par ordre croissant */\nmysql> SELECT * FROM aliment ORDER BY calories ASC;\nmysql> SELECT * FROM utilisateurs ORDER BY prenom ASC\n/* Ordonner une colonne par ordre d\xe9croissant */\nmysql> SELECT * FROM aliment ORDER BY calories DESC;\nmysql> SELECT * FROM utilisateurs ORDER BY prenom DESC;\n/* Combinaison de commandes */\nmysql> SELECT * FROM aliment WHERE calories < 90 ORDER BY calories DESC;\n")),(0,t.mdx)("h2",{id:"comptez-le-nombre-dobjets-select-count"},"Comptez le nombre d\u2019objets ",(0,t.mdx)("inlineCode",{parentName:"h2"},"SELECT COUNT")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},'mysql> SELECT COUNT(*) FROM utilisateur WHERE email LIKE "%gmail.com";\n')),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"/* Compter tous les utilisateurs */\nmysql> SELECT COUNT(*) FROM utilisateur;\n/* Compter tous les noms de famille */\nmysql> SELECT COUNT(nom) FROM utilisateur;\n/* Compter uniquement les noms de familles diff\xe9rents */\nmysql> SELECT COUNT(DISTINCT nom) FROM utilisateur;\n")),(0,t.mdx)("h2",{id:"effectuez-des-op\xe9rations-sur-des-donn\xe9es-chiffr\xe9es-avg-sum-max-min"},"Effectuez des op\xe9rations sur des donn\xe9es chiffr\xe9es ",(0,t.mdx)("inlineCode",{parentName:"h2"},"AVG")," ",(0,t.mdx)("inlineCode",{parentName:"h2"},"SUM")," ",(0,t.mdx)("inlineCode",{parentName:"h2"},"MAX")," ",(0,t.mdx)("inlineCode",{parentName:"h2"},"MIN")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"/* Conna\xeetre la moyenne de teneur en sucre des aliments */\nmysql> SELECT AVG(sucre) FROM aliment;\n/* Conna\xeetre la somme de teneur en sucre des aliments */\nmysql> SELECT SUM(sucre) FROM aliment;\n/* Conna\xeetre le maximum de teneur en sucre des aliments */\nmysql> SELECT MAX(sucre) FROM aliment;\n/* Conna\xeetre le minimum de teneur en sucre des aliments */\nmysql> SELECT MIN(sucre) FROM aliment;\n/* Conna\xeetre la teneur moyenne en calories des aliments de 30 kcal ou plus */\nmysql> SELECT AVG(calories) FROM aliment WHERE calories >= 30;\n")),(0,t.mdx)("h2",{id:"sauvegardez-les-requ\xeates-create-view"},"Sauvegardez les requ\xeates ",(0,t.mdx)("inlineCode",{parentName:"h2"},"CREATE VIEW")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},'/* Les utilisateurs dont l\u2019adresse mail est une adresse Gmail */\nmysql> CREATE VIEW utilisateurs_gmail_vw AS SELECT * FROM utilisateur WHERE email LIKE "%gmail.com";\n/* R\xe9cup\xe9rer les utilisateurs avec une adresse Gmail */\nmysql> SELECT * FROM utilisateurs_gmail_vw;\n/* afficher les utilisateurs dont l\u2019adresse e-mail est une adresse Gmail ET dont le pr\xe9nom contient la lettre \u201cm\u201d */\nmysql> SELECT * FROM utilisateurs_gmail_vw WHERE prenom LIKE "%m%";\n')),(0,t.mdx)("h2",{id:"extraire-des-informations-join"},"Extraire des informations ",(0,t.mdx)("inlineCode",{parentName:"h2"},"JOIN")),(0,t.mdx)("h3",{id:"via-une-relation-1-\xe0-plusieurs"},"Via une relation 1 \xe0 plusieurs"),(0,t.mdx)("p",null,"Sp\xe9cifier \xe0 MySQL de joindre les tables \u201cutilisateur\u201d et \u201clangue\u201d en lui pr\xe9cisant que l\u2019id de langue et langue_id de l\u2019utilisateur doivent\n\xeatre \xe9gaux."),(0,t.mdx)("p",null,"Extraire tous les utilisateurs avec les langues qui leur sont associ\xe9es."),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},'/* Tout s\xe9lectionner dans la table "utilisateur" */\nSELECT * FROM `utilisateur`\n/* Joindre la table "langue" */\nJOIN `langue`\n/* Pr\xe9ciser que l\'`id` de `langue` est le champ `langue_id` de la table `utilisateur`. */\nON `utilisateur`.`langue_id` = `langue`.`id`;\n')),(0,t.mdx)("h3",{id:"via-une-relation-plusieurs-\xe0-plusieurs"},"Via une relation plusieurs \xe0 plusieurs"),(0,t.mdx)("p",null,"La ",(0,t.mdx)("strong",{parentName:"p"},"table de liaison")," sert \xe0 stocker des relations entre un utilisateur et un aliment pr\xe9cis."),(0,t.mdx)("p",null,"Relier tous les utilisateurs aux aliments qu\u2019ils ont scann\xe9s."),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},'/* Tout s\xe9lectionner dans la table "utilisateur" */\nSELECT * FROM `utilisateur`\n/* Joindre la table de liaison "utilisateur_aliment" */\nJOIN `utilisateur_aliment`\n/* Pr\xe9ciser que l\'`id` de `utilisateur` est le champ `utilisateur_id` de la table de liaison `utilisateur_aliment` */\nON (utilisateur.id = utilisateur_aliment.utilisateur_id)\n/* Joindre la table "aliment" */\nJOIN `aliment`\n/* Pr\xe9ciser que l\'`id` de `aliment` est la champ `utilisateur_id` de la table de liaison `utilisateur_aliment` */\nON (aliment.id = utilisateur_aliment.utilisateur_id)\n')),(0,t.mdx)("h2",{id:"modifiez-la-structure-dun-objet-alter-table"},"Modifiez la structure d\u2019un objet ",(0,t.mdx)("inlineCode",{parentName:"h2"},"ALTER TABLE")),(0,t.mdx)("h3",{id:"ajoutez-un-champ-add"},"Ajoutez un champ ",(0,t.mdx)("inlineCode",{parentName:"h3"},"ADD")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"ALTER TABLE langue ADD code VARCHAR(100);\n")),(0,t.mdx)("h3",{id:"supprimez-un-champ-drop"},"Supprimez un champ ",(0,t.mdx)("inlineCode",{parentName:"h3"},"DROP")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"ALTER TABLE utilisateur DROP nom;\n")),(0,t.mdx)("h3",{id:"modifiez-un-champ-modify"},"Modifiez un champ ",(0,t.mdx)("inlineCode",{parentName:"h3"},"MODIFY")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"ALTER TABLE utilisateur MODIFY email VARCHAR(500) NOT NULL;\n")),(0,t.mdx)("h3",{id:"renommez-un-champ-change"},"Renommez un champ ",(0,t.mdx)("inlineCode",{parentName:"h3"},"CHANGE")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql",metastring:'title="sql"',title:'"sql"'},"ALTER TABLE langue CHANGE code code_pays VARCHAR(100);\n")),(0,t.mdx)("h2",{id:"ajoutez-une-relation-un-\xe0-plusieurs"},"Ajoutez une relation un \xe0 plusieurs"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql"},"/* Cr\xe9er une nouvelle table */\nCREATE TABLE reduction (\nid INT NOT NULL AUTO_INCREMENT PRIMARY KEY,\nvaleur VARCHAR(100) NOT NULL\n);\n\n/* Ins\xe9rer des valeurs */\nINSERT INTO reduction (valeur) VALUES ('-30%');\nINSERT INTO reduction (valeur) VALUES ('-50%');\n\n/* R\xe9sultat */\nSELECT * FROM reduction;\n+----+--------+\n| id | valeur |\n+----+--------+\n|  1 | -30%   |\n|  2 | -50%   |\n+----+--------+\n\n/* Ajouter un champ \xe0 la table */\nALTER TABLE aliment\nADD reduction_id INT;\n\n/* Modifier ce champ pour lier la r\xe9f\xe9rence */\nALTER TABLE aliment\nADD FOREIGN KEY (reduction_id)\nREFERENCES reduction (id)\nON DELETE SET NULL;\n\n/* R\xe9sultat */\nSELECT * FROM aliment WHERE id=1;\n+----+-------+-------------+-------+----------+----------+-----------+------+--------------+\n| id | nom   | marque      | sucre | calories | graisses | proteines | bio  | reduction_id |\n+----+-------+-------------+-------+----------+----------+-----------+------+--------------+\n|  1 | pomme | sans marque |  19.1 |       72 |      0.2 |       0.4 |    0 |         NULL |\n+----+-------+-------------+-------+----------+----------+-----------+------+--------------+\n\n/* Ajouter la relation de l'objet */\nUPDATE aliment SET reduction_id = 1 WHERE id = 1;\n\n/* R\xe9sultat */\nSELECT * FROM aliment WHERE id=1;\n+----+-------+-------------+-------+----------+----------+-----------+------+--------------+\n| id | nom   | marque      | sucre | calories | graisses | proteines | bio  | reduction_id |\n+----+-------+-------------+-------+----------+----------+-----------+------+--------------+\n|  1 | pomme | sans marque |  19.1 |       72 |      0.2 |       0.4 |    0 |            1 |\n+----+-------+-------------+-------+----------+----------+-----------+------+--------------+\n\n/* V\xe9rifier */\nSELECT * from aliment\nJOIN reduction\nON aliment.reduction_id = reduction.id\nWHERE aliment.id = 1;\n+----+-------+-------------+-------+----------+----------+-----------+------+--------------+----+--------+\n| id | nom   | marque      | sucre | calories | graisses | proteines | bio  | reduction_id | id | valeur |\n+----+-------+-------------+-------+----------+----------+-----------+------+--------------+----+--------+\n|  1 | pomme | sans marque |  19.1 |       72 |      0.2 |       0.4 |    0 |            1 |  1 | -30%   |\n+----+-------+-------------+-------+----------+----------+-----------+------+--------------+----+--------+\n")),(0,t.mdx)("h2",{id:"ajoutez-une-relation-plusieurs-\xe0-plusieurs"},"Ajoutez une relation plusieurs \xe0 plusieurs"),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql"},"/* Cr\xe9er une nouvelle table */\nCREATE TABLE appareil (\nid INT NOT NULL AUTO_INCREMENT PRIMARY KEY,\ntype VARCHAR(100) NOT NULL\n);\n\n/* Ins\xe9rer des valeurs */\nINSERT INTO appareil (type) VALUES ('iphone');\n\nINSERT INTO appareil (type) VALUES ('android');\n\nINSERT INTO appareil (type) VALUES ('pc');\n\nINSERT INTO appareil (type) VALUES ('mac');\n\n/* R\xe9sultat */\nSELECT * FROM appareil;\n+----+---------+\n| id | type    |\n+----+---------+\n|  1 | iphone  |\n|  2 | android |\n|  3 | pc      |\n|  4 | mac     |\n+----+---------+\n\n/* Cr\xe9er une table de liaison */\nCREATE TABLE utilisateur_appareil (\nutilisateur_id INT NOT NULL,\nappareil_id INT NOT NULL,\n\nFOREIGN KEY (utilisateur_id)\nREFERENCES utilisateur (id)\nON DELETE RESTRICT\nON UPDATE CASCADE,\n\nFOREIGN KEY (appareil_id)\nREFERENCES appareil (id)\nON DELETE RESTRICT\nON UPDATE CASCADE,\n\nPRIMARY KEY (utilisateur_id, appareil_id)\n);\n\n/* V\xe9rifier la cr\xe9ation de la table de liaison */\nSELECT * FROM utilisateur_appareil;\nEmpty set (0.00 sec)\n\n/* V\xe9rifier la table */\nSELECT * FROM utilisateur WHERE id = 1;\n+----+---------+------------------+-----------+\n| id | prenom  | email            | langue_id |\n+----+---------+------------------+-----------+\n|  1 | quentin | qentin@gmail.com |         1 |\n+----+---------+------------------+-----------+\n\n/* Ajouter des relations */\nINSERT INTO utilisateur_appareil (utilisateur_id, appareil_id) VALUES (1, 2);\n\nINSERT INTO utilisateur_appareil (utilisateur_id, appareil_id) VALUES (1, 4);\n\n/* R\xe9sultat */\nSELECT * FROM utilisateur_appareil;\n+----------------+-------------+\n| utilisateur_id | appareil_id |\n+----------------+-------------+\n|              1 |           2 |\n|              1 |           4 |\n+----------------+-------------+\n\n/* Retrouver les relations */\nSELECT * FROM utilisateur\nJOIN utilisateur_appareil\nON utilisateur.id = utilisateur_appareil.utilisateur_id\nJOIN appareil\nON appareil.id = utilisateur_appareil.appareil_id\nWHERE utilisateur.id = 1;\n+----+---------+------------------+-----------+----------------+-------------+----+---------+\n| id | prenom  | email            | langue_id | utilisateur_id | appareil_id | id | type    |\n+----+---------+------------------+-----------+----------------+-------------+----+---------+\n|  1 | quentin | qentin@gmail.com |         1 |              1 |           2 |  2 | android |\n|  1 | quentin | qentin@gmail.com |         1 |              1 |           4 |  4 | mac     |\n+----+---------+------------------+-----------+----------------+-------------+----+---------+\n")),(0,t.mdx)("h2",{id:"suppression-dun-objet-unique-on-delete"},"Suppression d'un objet unique ",(0,t.mdx)("inlineCode",{parentName:"h2"},"ON DELETE")),(0,t.mdx)("p",null,(0,t.mdx)("strong",{parentName:"p"},"Emp\xeache la suppression sous condition")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql"},"ON DELETE RESTRICT;\nou\nON DELETE NO ACTION;\n")),(0,t.mdx)("p",null,(0,t.mdx)("strong",{parentName:"p"},"Supprime la famille et remplace les objets par NULL")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql"},"ON DELETE SET NULL;\n")),(0,t.mdx)("p",null,(0,t.mdx)("strong",{parentName:"p"},"Supprime tous les objets reli\xe9s")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql"},"ON DELETE CASCADE;\n")),(0,t.mdx)("h2",{id:"mise-\xe0-jour-dun-objet-on-update"},"Mise \xe0 jour d'un objet ",(0,t.mdx)("inlineCode",{parentName:"h2"},"ON UPDATE")),(0,t.mdx)("p",null,(0,t.mdx)("strong",{parentName:"p"},"Emp\xeache la mise \xe0 jour sous condition")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql"},"ON UPDATE RESTRICT;\nou\nON UPDATE NO ACTION;\n")),(0,t.mdx)("p",null,(0,t.mdx)("strong",{parentName:"p"},"Met \xe0 jour la famille et remplace les objets par NULL")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql"},"ON UPDATE SET NULL;\n")),(0,t.mdx)("p",null,(0,t.mdx)("strong",{parentName:"p"},"Met \xe0 jour tous les objets reli\xe9s")),(0,t.mdx)("pre",null,(0,t.mdx)("code",{parentName:"pre",className:"language-sql"},"ON UPDATE CASCADE;\n")))}c.isMDXComponent=!0}}]);