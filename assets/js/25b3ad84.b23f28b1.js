"use strict";(self.webpackChunkmon_web_dev_wiki=self.webpackChunkmon_web_dev_wiki||[]).push([[6471],{4464:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return l},contentTitle:function(){return d},metadata:function(){return m},toc:function(){return u},default:function(){return c}});var s=a(87462),t=a(63366),r=(a(67294),a(3905)),o=(a(9877),a(58215),a(56222)),i=["components"],l={id:"5-Solutionnez_des_bugs_sur_l_API",title:"Solutionnez des bugs sur l\u2019API"},d="Solutionnez des bugs sur l\u2019API",m={unversionedId:"OpenClassrooms/Construisez_un_site_e-commerce/Deboguez_l_interface_de_votre_site_internet/5-Solutionnez_des_bugs_sur_l_API",id:"OpenClassrooms/Construisez_un_site_e-commerce/Deboguez_l_interface_de_votre_site_internet/5-Solutionnez_des_bugs_sur_l_API",title:"Solutionnez des bugs sur l\u2019API",description:"R\xe9cup\xe9rez des donn\xe9es sur une API externe",source:"@site/docs/OpenClassrooms/5-Construisez_un_site_e-commerce/4-Deboguez_l_interface_de_votre_site_internet/5-Solutionnez_des_bugs_sur_l_API.mdx",sourceDirName:"OpenClassrooms/5-Construisez_un_site_e-commerce/4-Deboguez_l_interface_de_votre_site_internet",slug:"/OpenClassrooms/Construisez_un_site_e-commerce/Deboguez_l_interface_de_votre_site_internet/5-Solutionnez_des_bugs_sur_l_API",permalink:"/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Deboguez_l_interface_de_votre_site_internet/5-Solutionnez_des_bugs_sur_l_API",editUrl:"https://github.com/gylgyl2000/Mon_Web_Dev_Wiki/edit/master/website/docs/OpenClassrooms/5-Construisez_un_site_e-commerce/4-Deboguez_l_interface_de_votre_site_internet/5-Solutionnez_des_bugs_sur_l_API.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"5-Solutionnez_des_bugs_sur_l_API",title:"Solutionnez des bugs sur l\u2019API"},sidebar:"openClassroomsSidebar",previous:{title:"R\xe9solvez des bugs sur le DOM",permalink:"/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Deboguez_l_interface_de_votre_site_internet/4-Resolvez_des_bugs_sur_le_DOM"},next:{title:"D\xe9boguez une application",permalink:"/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Deboguez_l_interface_de_votre_site_internet/6-Deboguez_une_application"}},u=[{value:"R\xe9cup\xe9rez des donn\xe9es sur une API externe",id:"r\xe9cup\xe9rez-des-donn\xe9es-sur-une-api-externe",children:[{value:"R\xe9cup\xe9rez des donn\xe9es m\xe9t\xe9o",id:"r\xe9cup\xe9rez-des-donn\xe9es-m\xe9t\xe9o",children:[{value:"D\xe9couvrez l\u2019API WeatherStack",id:"d\xe9couvrez-lapi-weatherstack",children:[],level:4},{value:"D\xe9couvrez l\u2019int\xe9gration de l\u2019API WeatherStack sur notre projet fil rouge",id:"d\xe9couvrez-lint\xe9gration-de-lapi-weatherstack-sur-notre-projet-fil-rouge",children:[],level:4}],level:3},{value:"Comprenez les messages d\u2019erreur d\u2019une API externe",id:"comprenez-les-messages-derreur-dune-api-externe",children:[{value:"D\xe9couvrez les messages d\u2019erreur provenant d\u2019une API",id:"d\xe9couvrez-les-messages-derreur-provenant-dune-api",children:[],level:4}],level:3},{value:"\xc0 vous de jouer !",id:"\xe0-vous-de-jouer-",children:[{value:"Simplifiez vos probl\xe8mes en les isolant",id:"simplifiez-vos-probl\xe8mes-en-les-isolant",children:[],level:4},{value:"Utilisez l\u2019onglet r\xe9seau du navigateur",id:"utilisez-longlet-r\xe9seau-du-navigateur",children:[],level:4},{value:"Attrapez vos erreurs",id:"attrapez-vos-erreurs",children:[],level:4}],level:3},{value:"En r\xe9sum\xe9",id:"en-r\xe9sum\xe9",children:[],level:3}],level:2},{value:"R\xe9cup\xe9rez des donn\xe9es sur une API interne",id:"r\xe9cup\xe9rez-des-donn\xe9es-sur-une-api-interne",children:[{value:"R\xe9cup\xe9rez des donn\xe9es de g\xe9olocalisation",id:"r\xe9cup\xe9rez-des-donn\xe9es-de-g\xe9olocalisation",children:[{value:"D\xe9couvrez l\u2019API de g\xe9olocalisation",id:"d\xe9couvrez-lapi-de-g\xe9olocalisation",children:[],level:4},{value:"Int\xe9grez l\u2019API de g\xe9olocalisation dans le projet fil rouge",id:"int\xe9grez-lapi-de-g\xe9olocalisation-dans-le-projet-fil-rouge",children:[],level:4}],level:3},{value:"Comprenez les messages d\u2019erreur d\u2019une API interne",id:"comprenez-les-messages-derreur-dune-api-interne",children:[{value:"D\xe9couvrez comment les erreurs sont g\xe9r\xe9es sur l\u2019API de g\xe9olocalisation",id:"d\xe9couvrez-comment-les-erreurs-sont-g\xe9r\xe9es-sur-lapi-de-g\xe9olocalisation",children:[],level:4}],level:3},{value:"\xc0 vous de jouer !",id:"\xe0-vous-de-jouer--1",children:[],level:3},{value:"En r\xe9sum\xe9",id:"en-r\xe9sum\xe9-1",children:[],level:3}],level:2},{value:"Quiz : Solutionnez des bugs sur l\u2019API",id:"quiz--solutionnez-des-bugs-sur-lapi",children:[{value:"Comp\xe9tences \xe9valu\xe9es",id:"comp\xe9tences-\xe9valu\xe9es",children:[],level:4},{value:"Question 1 : Qu\u2019appelle-t-on le &quot;mocking&quot; quand on parle d\u2019API ?",id:"question-1--quappelle-t-on-le-mocking-quand-on-parle-dapi-",children:[],level:4},{value:"Question 2 : Dans cette question, vous allez devoir utiliser Postman et r\xe9aliser un call HTTP aupr\xe8s de l\u2019API de WeatherStack.",id:"question-2--dans-cette-question-vous-allez-devoir-utiliser-postman-et-r\xe9aliser-un-call-http-aupr\xe8s-de-lapi-de-weatherstack",children:[],level:4},{value:"Question 3 : Pour cette question, vous allez peut-\xeatre devoir faire un tour sur le MDN",id:"question-3--pour-cette-question-vous-allez-peut-\xeatre-devoir-faire-un-tour-sur-le-mdn",children:[],level:4},{value:"Question 4 : Pour cette question, vous aurez besoin de changer de branche.\xa0:)",id:"question-4--pour-cette-question-vous-aurez-besoin-de-changer-de-branche",children:[],level:4},{value:"Question 5 : Quand on travaille avec une API Interne au navigateur, telle que l\u2019API de WebStorage, de canvas ou celle de g\xe9olocalisation, les messages d\u2019erreur sont-ils les m\xeames ?",id:"question-5--quand-on-travaille-avec-une-api-interne-au-navigateur-telle-que-lapi-de-webstorage-de-canvas-ou-celle-de-g\xe9olocalisation-les-messages-derreur-sont-ils-les-m\xeames-",children:[],level:4},{value:"Question 6 : Pour cette question, vous aurez besoin de changer de branche.\xa0:)",id:"question-6--pour-cette-question-vous-aurez-besoin-de-changer-de-branche",children:[],level:4},{value:"Question 7 : Pour cette question, vous aurez besoin de changer de branche.\xa0:)",id:"question-7--pour-cette-question-vous-aurez-besoin-de-changer-de-branche",children:[],level:4},{value:"Question 8 : Pour cette question, vous aurez besoin de changer de branche.\xa0:)",id:"question-8--pour-cette-question-vous-aurez-besoin-de-changer-de-branche",children:[],level:4}],level:2}],p={toc:u};function c(e){var n=e.components,a=(0,t.Z)(e,i);return(0,r.mdx)("wrapper",(0,s.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"solutionnez-des-bugs-sur-lapi"},"Solutionnez des bugs sur l\u2019API"),(0,r.mdx)("h2",{id:"r\xe9cup\xe9rez-des-donn\xe9es-sur-une-api-externe"},"R\xe9cup\xe9rez des donn\xe9es sur une API externe"),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/7159296-deboguez-l-interface-de-votre-site-internet/7282431-recuperez-des-donnees-sur-une-api-externe"},"R\xe9cup\xe9rez des donn\xe9es sur une API externe - D\xe9boguez l\u2019interface de votre site internet - OpenClassrooms")),(0,r.mdx)(o.fG,{vimeoId:"566960324",mdxType:"Vimeo"}),(0,r.mdx)("br",null),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Quand on est d\xe9veloppeur ou d\xe9veloppeuse front-end, on travaille quotidiennement avec des API"),". On s\u2019en sert pour r\xe9cup\xe9rer des donn\xe9es, par\nexemple, des donn\xe9es m\xe9t\xe9o ou des s\xe9ances de cin\xe9ma, mais aussi pour communiquer avec des fonctionnalit\xe9s du navigateur, pour se g\xe9olocaliser\npar exemple."),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},'Si le concept d\u2019API vous est \xe9tranger, je vous invite \xe0 regarder le cours "',(0,r.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/6573181-adoptez-les-api-rest-pour-vos-projets-web"},"Adoptez les API REST pour vos projets web"),'",\nsur les API, avant de revenir ici.\xa0',(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/clin.png",alt:";)"})))),(0,r.mdx)("p",null,"Dans cette partie, nous allons voir ensemble comment ",(0,r.mdx)("strong",{parentName:"p"},"d\xe9boguer une API externe"),", autrement dit quand on fait une requ\xeate \xe0 un service externe,\nmais aussi comment ",(0,r.mdx)("strong",{parentName:"p"},"d\xe9boguer une API interne"),", c\u2019est-\xe0-dire une API int\xe9gr\xe9e au navigateur."),(0,r.mdx)("h3",{id:"r\xe9cup\xe9rez-des-donn\xe9es-m\xe9t\xe9o"},"R\xe9cup\xe9rez des donn\xe9es m\xe9t\xe9o"),(0,r.mdx)("p",null,"Notre projet Fa\xe7adia comporte une page d\xe9di\xe9e \xe0 chaque capteur. Sur cette page, nous faisons semblant de r\xe9cup\xe9rer les donn\xe9es d\u2019une API\ninterne via le fichier ",(0,r.mdx)("inlineCode",{parentName:"p"},"data/facade-detail-data.json"),". En plus de cet appel, nous faisons aussi un deuxi\xe8me appel API pour r\xe9cup\xe9rer les\ndonn\xe9es m\xe9t\xe9o."),(0,r.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"?")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Nous faisons l\u2019appel en direct ou nous passons par un fichier l\xe0-aussi ?"))),(0,r.mdx)("p",null,"Bonne question !"),(0,r.mdx)("p",null,"En fait, nous faisons les deux :"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"j\u2019ai cr\xe9\xe9 un fichier ",(0,r.mdx)("inlineCode",{parentName:"li"},"weather-api-mocked-data.json"),"\xa0qui correspond aux donn\xe9es renvoy\xe9es par l\u2019API. Cela m\u2019\xe9vite de d\xe9passer le quota et\nsurtout de donner ma cl\xe9 d\u2019API en public."),(0,r.mdx)("li",{parentName:"ul"},"un fichier existe et nous permet d\u2019appeler l\u2019API directement. Nous verrons ensemble comment le faire fonctionner prochainement.\xa0",(0,r.mdx)("img",{parentName:"li",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"}))),(0,r.mdx)("p",null,"Donc, pour revenir \xe0 Fa\xe7adia, voici la page d\xe9di\xe9e aux capteurs :"),(0,r.mdx)("figure",null,(0,r.mdx)("img",{src:"https://user.oc-static.com/upload/2021/06/17/16239231874186_image3.png",alt:"Le premier tableau contient les donn\xe9es du capteur, le deuxi\xe8me les donn\xe9es du bulletin M\xe9t\xe9o"}),(0,r.mdx)("figcaption",null,"Le premier tableau contient les donn\xe9es du capteur, le deuxi\xe8me les donn\xe9es du bulletin M\xe9t\xe9o")),(0,r.mdx)("p",null,"Pour r\xe9cup\xe9rer les donn\xe9es m\xe9t\xe9o, je passe par une API : ",(0,r.mdx)("a",{parentName:"p",href:"https://weatherstack.com/"},"WeatherStack"),"."),(0,r.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"?")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Comment fonctionne cette derni\xe8re ?"))),(0,r.mdx)("p",null,"Les prochains paragraphes vont \xeatre d\xe9di\xe9s \xe0 la prise en main de l\u2019API et \xe0 son fonctionnement."),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},'Nous allons utiliser Postman pour comprendre comment fonctionne l\u2019API. Si vous n\u2019\xeates pas \xe0 l\u2019aise avec l\u2019outil, regardez le cours\n"',(0,r.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/6573181-adoptez-les-api-rest-pour-vos-projets-web"},"Adoptez les API REST pour vos projets web"),'" de\nKassandre Pedro o\xf9 vous d\xe9couvrirez le concept d\u2019API REST et comment fonctionne Postman.'))),(0,r.mdx)("h4",{id:"d\xe9couvrez-lapi-weatherstack"},"D\xe9couvrez l\u2019API WeatherStack"),(0,r.mdx)("figure",null,(0,r.mdx)("img",{src:"https://user.oc-static.com/upload/2021/06/17/16239232552792_image18.png",alt:"Screenshot, page d'accueil de l'API WeatherStack"}),(0,r.mdx)("figcaption",null,"WeatherStack est une API m\xe9t\xe9o compl\xe8te et gratuite. Plut\xf4t cool, non ?")),(0,r.mdx)("p",null,"Avant de se lancer dans le code pour voir comment cette API est int\xe9gr\xe9e, une bonne pratique de d\xe9veloppement est de ",(0,r.mdx)("a",{parentName:"p",href:"https://weatherstack.com/"},"d\xe9couvrir l\u2019API avec Postman et de parcourir la documentation"),"."),(0,r.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"?")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Pourquoi est-ce que nous avons d\u2019abord utilis\xe9 l\u2019API via Postman avant de l\u2019utiliser directement via le JavaScript ?"),(0,r.mdx)("p",{parentName:"div"},"N\u2019est-ce pas plus rapide de le faire directement via le JavaScript ?"))),(0,r.mdx)("p",null,"C\u2019est une bonne question.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("p",null,"D\xe9couvrir une API via Postman vous permet le plus souvent de bien comprendre comment elle fonctionne avant de vous lancer dans le code. Par\nexemple, si l\u2019API que vous utilisez ne fonctionne pas, pr\xe9f\xe9rez-vous perdre quelques minutes sur Postman ou plusieurs heures sur le JavaScript ?\n\xc7a arrive beaucoup plus souvent qu\u2019on peut le croire.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("p",null,"De plus, cela va souvent vous permettre de tester les requ\xeates et de d\xe9couvrir le format de r\xe9ponse. Il arrive parfois que les r\xe9ponses ne\ncorrespondent pas totalement aux attentes."),(0,r.mdx)("p",null,"Dans la vid\xe9o ci-dessous, nous allons voir ensemble comment prendre en main l\u2019API et notamment :"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"cr\xe9er un compte ;"),(0,r.mdx)("li",{parentName:"ul"},"parcourir la documentation ;"),(0,r.mdx)("li",{parentName:"ul"},"faire une requ\xeate via Postman et d\xe9couvrir le format de r\xe9ponse.")),(0,r.mdx)(o.fG,{vimeoId:"566589667",mdxType:"Vimeo"}),(0,r.mdx)("br",null),(0,r.mdx)("p",null,"Avant de passer \xe0 la suite, je vous invite \xe0 continuer \xe0 tester l\u2019API avec Postman. Parcourez la documentation et tentez des choses. Cela vous\npermettra de bien comprendre comment l\u2019API fonctionne.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("h4",{id:"d\xe9couvrez-lint\xe9gration-de-lapi-weatherstack-sur-notre-projet-fil-rouge"},"D\xe9couvrez l\u2019int\xe9gration de l\u2019API WeatherStack sur notre projet fil rouge"),(0,r.mdx)("p",null,"Maintenant que vous avez vu comment requ\xeater l\u2019API WeatherStack et le format de ses r\xe9ponses, nous allons pouvoir nous int\xe9resser \xe0 son\nint\xe9gration c\xf4t\xe9 JavaScript."),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},'Dans ce cours, nous allons utiliser la m\xe9thode fetch ainsi que les promesses. Si vous n\u2019\xeates pas familier avec elles, la partie 2 du cours\n"',(0,r.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/5543061-ecrivez-du-javascript-pour-le-web"},"\xc9crivez du JavaScript pour le web"),"\u201d vous permettra\nd\u2019acqu\xe9rir les bases.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})))),(0,r.mdx)("p",null,"Comme je vous le pr\xe9cisais pr\xe9c\xe9demment, j\u2019ai deux mani\xe8res de r\xe9cup\xe9rer les donn\xe9es m\xe9t\xe9o :"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},'soit via le fichier de donn\xe9es "mock\xe9es" que j\u2019utilise. Il m\u2019\xe9vite de faire trop de requ\xeates quand je fais mes tests.'),(0,r.mdx)("li",{parentName:"ul"},"soit via une fonction d\xe9di\xe9e qui va requ\xeater l\u2019API en fonction des donn\xe9es g\xe9ographiques du capteur.")),(0,r.mdx)("figure",null,(0,r.mdx)("img",{src:"https://user.oc-static.com/upload/2021/06/17/16239236573998_image38.png",alt:"Screenshot avec les donn\xe9es du fichier `data/weahter-api-mocked-data.json`"}),(0,r.mdx)("figcaption",null,"Le fichier ",(0,r.mdx)("code",null,"data/weahter-api-mocked-data.json"))),(0,r.mdx)("p",null,"Dans la vid\xe9o ci-dessous, vous allez d\xe9couvrir o\xf9 sont r\xe9alis\xe9es ces deux requ\xeates et mieux comprendre leur fonctionnement.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)(o.fG,{vimeoId:"566589712",mdxType:"Vimeo"}),(0,r.mdx)("br",null),(0,r.mdx)("h3",{id:"comprenez-les-messages-derreur-dune-api-externe"},"Comprenez les messages d\u2019erreur d\u2019une API externe"),(0,r.mdx)("p",null,"Vous savez d\xe9sormais comment vous servir de l\u2019API de WeatherCast. Il est maintenant temps de se pencher sur les messages d\u2019erreur. En effet,\npour bien d\xe9boguer une API interne, il est important de comprendre :"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"les codes HTTP renvoy\xe9s par l\u2019API ;"),(0,r.mdx)("li",{parentName:"ul"},"les messages renvoy\xe9s par l\u2019API en cas d\u2019erreurs.")),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Les codes et en-t\xeates HTTP sont la base du web et ces derniers remontent de nombreuses informations. Si vous ne vous sentez pas totalement \xe0\nl\u2019aise et que vous avez besoin d\u2019un rappel, ",(0,r.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/5543061-ecrivez-du-javascript-pour-le-web/5577576-comprenez-ce-que-sont-des-api-et-un-service-web"},'relisez ce chapitre du cours "\xc9crivez du JavaScript pour le web"'),"\net revenez ici.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})))),(0,r.mdx)("h4",{id:"d\xe9couvrez-les-messages-derreur-provenant-dune-api"},"D\xe9couvrez les messages d\u2019erreur provenant d\u2019une API"),(0,r.mdx)("p",null,"Quand on d\xe9veloppe une API et qu\u2019on souhaite la rendre publique, autrement dit, la mettre \xe0 disposition d\u2019autres d\xe9veloppeurs externes \xe0 notre\nstructure, il y a souvent des r\xe8gles \xe0 respecter :"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Il est important d\u2019utiliser des noms au lieu des verbes pour chaque endpoint (cela correspond \xe0 l\u2019URL appel\xe9). Ce sont les m\xe9thodes HTTP\n(GET, POST, PUT, etc.) qui vont pr\xe9ciser l\u2019action \xe0 r\xe9aliser."),(0,r.mdx)("li",{parentName:"ul"},"les status code HTTP doivent vous permettre de traiter les erreurs de fa\xe7on propre. Par exemple, un status code 400 correspond \xe0 des donn\xe9es\nc\xf4t\xe9 client non valides, 403 \xe0 une erreur d\u2019authentification, etc."),(0,r.mdx)("li",{parentName:"ul"},"l\u2019API doit contenir sa version dans son URL. Cela permet d\u2019aider les d\xe9veloppeurs utilisant cette API \xe0 r\xe9aliser des mont\xe9es de versions.")),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Ce cours n\u2019est pas d\xe9di\xe9 \xe0 la cr\xe9ation d\u2019une API Rest. Cela dit, si vous souhaitez en apprendre plus, je vous invite \xe0 lire ce\n",(0,r.mdx)("a",{parentName:"p",href:"https://stackoverflow.blog/2020/03/02/best-practices-for-rest-api-design/"},"blog post de Stackoverflow")," pour en apprendre un peu plus sur les\nbonnes pratiques dans la conception d\u2019API."))),(0,r.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"?")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"J\u2019ai cru voir un statut code de 200 tout \xe0 l\u2019heure sur l\u2019API alors qu\u2019il y avait une erreur. C\u2019est normal ?"))),(0,r.mdx)("p",null,"Bonne remarque !"),(0,r.mdx)("p",null,"En effet, bien que les d\xe9veloppeurs derri\xe8re les API essayent de vous faciliter la vie en affichant des messages d\u2019erreur explicites. Les\nbonnes pratiques ne sont pas toujours respect\xe9es et il faut parfois faire avec."),(0,r.mdx)("figure",null,(0,r.mdx)("img",{src:"https://user.oc-static.com/upload/2021/06/17/16239240995224_image8.png",alt:"Screenshot d'un message d'erreur sur l'API"}),(0,r.mdx)("figcaption",null,"Exemple de message d\u2019erreur de l\u2019API WeatherStack")),(0,r.mdx)("p",null,"Dans la capture d\u2019\xe9cran ci-dessus, j\u2019ai volontairement modifi\xe9 mon ",(0,r.mdx)("inlineCode",{parentName:"p"},"access_key"),"\xa0pour faire en sorte d\u2019avoir une erreur. Vous pouvez noter que :"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Le corps (body) du message d\u2019erreur est assez explicite. La cl\xe9 d\u2019API est invalide."),(0,r.mdx)("li",{parentName:"ul"},"Le statut de la requ\xeate est 200 (alors qu\u2019il devrait plut\xf4t \xeatre 401). Comme je vous le disais, il n\u2019y a pas pr\xe9cis\xe9ment de r\xe8gles.")),(0,r.mdx)("p",null,"Avant de passer \xe0 la suite, faisons une deuxi\xe8me erreur dans notre requ\xeate. Ici, je vais mal orthographier le param\xe8tre ",(0,r.mdx)("inlineCode",{parentName:"p"},"query"),"\xa0en le nommant\n",(0,r.mdx)("inlineCode",{parentName:"p"},"qery"),"."),(0,r.mdx)("figure",null,(0,r.mdx)("img",{src:"https://user.oc-static.com/upload/2021/06/17/16239241781212_image29.png",alt:"Screenshot du message d'erreur sur l'API"}),(0,r.mdx)("figcaption",null,"Message d'erreur sur l'API")),(0,r.mdx)("p",null,'Ici, le message d\u2019erreur nous dit qu\u2019il manque le param\xe8tre query et on nous demande de sp\xe9cifier une position valide en utilisant le param\xe8tre\n"query".'),(0,r.mdx)("p",null,"Une fois encore, le message d\u2019erreur est plut\xf4t compr\xe9hensible m\xeame si le code HTTP reste \xe0 200."),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Il est important de tester de mauvaises requ\xeates sur votre API et l\xe0 encore, le meilleur moyen est de le faire via Postman."))),(0,r.mdx)("p",null,"Cela vous donnera une meilleure compr\xe9hension de l\u2019API.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("h3",{id:"\xe0-vous-de-jouer-"},"\xc0 vous de jouer !"),(0,r.mdx)("p",null,(0,r.mdx)("img",{parentName:"p",src:"https://user.oc-static.com/upload/2021/06/24/16245418386149_A-vous-de-jouer%20%281%29.png",alt:null})),(0,r.mdx)("p",null,"Vous venez de voir que les messages d\u2019erreur des API n\u2019\xe9taient pas uniformis\xe9s entre les API. Mais alors, comment pouvez-vous les d\xe9boguer ?"),(0,r.mdx)("h4",{id:"simplifiez-vos-probl\xe8mes-en-les-isolant"},"Simplifiez vos probl\xe8mes en les isolant"),(0,r.mdx)("p",null,"Ce conseil ne s\u2019applique d\u2019ailleurs pas que pour le d\xe9bogage de vos API.\xa0De mani\xe8re g\xe9n\xe9rale, il est toujours important d\u2019essayer de ",(0,r.mdx)("strong",{parentName:"p"},"tester\nde fa\xe7on isol\xe9e")," les diff\xe9rentes parties de votre code. C\u2019est ce que nous venons justement de faire pour notre API externe. Nous avons d\u2019abord\ntest\xe9 les requ\xeates de l\u2019API via Postman avant de les int\xe9grer \xe0 notre code."),(0,r.mdx)("h4",{id:"utilisez-longlet-r\xe9seau-du-navigateur"},"Utilisez l\u2019onglet r\xe9seau du navigateur"),(0,r.mdx)("p",null,"Au d\xe9but du cours, vous avez pu d\xe9couvrir tous les outils d\xe9di\xe9s au d\xe9bogage. Vous avez pu prendre en main la console, le d\xe9bogueur,\nl\u2019inspecteur, il ne manquait plus que la partie r\xe9seau.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("p",null,"Cet onglet peut vous donner des informations tr\xe8s int\xe9ressantes sur les appels API comme, par exemple, la requ\xeate r\xe9alis\xe9e, la r\xe9ponse re\xe7ue\npar l\u2019API et les en-t\xeates HTTP. Cet outil vous permet de rapidement ",(0,r.mdx)("strong",{parentName:"p"},"voir si une de vos requ\xeates \xe9choue"),"."),(0,r.mdx)("p",null,"Avant de poursuivre sur la vid\xe9o, je vais vous raconter une petite anecdote.\xa0Au moment de r\xe9aliser ce cours, j\u2019ai eu un bug avec l\u2019API\nWeatherCast et j\u2019ai mis un peu de temps \xe0 comprendre d\u2019o\xf9 il venait. J\u2019ai utilis\xe9 la console et l\u2019onglet Network pour essayer de voir d\u2019o\xf9 il\nvenait. Au final, c\u2019\xe9tait un bug assez b\xeate mais comme quoi, \xe7a arrive \xe0 tout le monde et tout le temps.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Avant de regarder la vid\xe9o avec la solution ci-dessous, essayez de trouver la solution par vous-m\xeame. Le bug se trouve sur la branche\n",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/OpenClassrooms-Student-Center/debuggez-l-interface-de-votre-site/tree/partie-4/chapitre-1-section-3%2Fexercise"},"partie-4/chapitre-1-section-3/exercise"),"."))),(0,r.mdx)(o.fG,{vimeoId:"566589776",mdxType:"Vimeo"}),(0,r.mdx)("br",null),(0,r.mdx)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"!")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Il semble que ce bug se reproduise parfois aussi quand la page se recharge directement avec LiveServer. Si \xe7a vous arrive, faites un\nrechargement de la page en vidant le cache (cmd + shift + R sous Mac et \u2026 sur Windows)."))),(0,r.mdx)("h4",{id:"attrapez-vos-erreurs"},"Attrapez vos erreurs"),(0,r.mdx)("p",null,"Dernier point avant de passer au prochain chapitre. Pensez \xe0 ",(0,r.mdx)("strong",{parentName:"p"},"traiter vos messages d\u2019erreur"),". Quand vous travaillez avec la m\xe9thode fetch,\nvous travaillez avec des promesses. Les promesses ont plusieurs statuts :"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Pending (en cours),"),(0,r.mdx)("li",{parentName:"ul"},"Resolve (r\xe9solue),"),(0,r.mdx)("li",{parentName:"ul"},"et Reject (rejet\xe9e).")),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Si vous avez oubli\xe9 les statuts des promesses, ",(0,r.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/5543061-ecrivez-du-javascript-pour-le-web/5866911-parallelisez-plusieurs-requetes-http"},'je vous invite \xe0 relire le cours "\xc9crivez du JavaScript pour le web"'),"\navant de revenir ici."))),(0,r.mdx)("p",null,"La m\xe9thode fetch traite les erreurs de la mani\xe8re suivante :"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"const _retrieveWeatherForecastMockedData = () => fetch('/data/weather-api-mocked-data.json')\n    .then(res => res.json()) /* Ici, le cas de succ\xe8s */\n    .catch(err => console.log(\"Oh no\", err)) /* Ici, le cas d'erreur */\n")),(0,r.mdx)("p",null,"Dans le snippet de code ci-dessous, le ",(0,r.mdx)("inlineCode",{parentName:"p"},".catch"),"\xa0correspond au traitement de l\u2019erreur dans le cadre de la m\xe9thode fetch."),(0,r.mdx)("p",null,"Dans la vid\xe9o ci-dessous, nous allons voir ensemble comment attraper les erreurs de l\u2019API m\xe9t\xe9o aussi bien avec les donn\xe9es mock\xe9es qu\u2019avec les\ndonn\xe9es de l\u2019API."),(0,r.mdx)(o.fG,{vimeoId:"566589825",mdxType:"Vimeo"}),(0,r.mdx)("br",null),(0,r.mdx)("p",null,"Vous \xeates maintenant par\xe9 pour d\xe9boguer des API externes !"),(0,r.mdx)("h3",{id:"en-r\xe9sum\xe9"},"En r\xe9sum\xe9"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Avant de vous lancer dans l\u2019int\xe9gration d\u2019une API c\xf4t\xe9 code, essayez toujours de passer par Postman pour tester votre API."),(0,r.mdx)("li",{parentName:"ul"},"Les API externes respectent le plus souvent des bonnes pratiques dans leur conception : status code, versionnement, etc.",(0,r.mdx)("br",null),"\nUne connaissance de ces bonnes pratiques peut vous permettre de comprendre et d\xe9boguer plus rapidement une API. Cela dit, il arrive parfois que\nles API ne respectent pas les bonnes pratiques."),(0,r.mdx)("li",{parentName:"ul"},"L\u2019onglet Network vous permet d\u2019analyser la requ\xeate et la r\xe9ponse renvoy\xe9es par les API.")),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Vous savez maintenant comment d\xe9boguer une API externe. Il est temps de vous int\xe9resser au d\xe9bogage des API internes !")),(0,r.mdx)("hr",null),(0,r.mdx)("h2",{id:"r\xe9cup\xe9rez-des-donn\xe9es-sur-une-api-interne"},"R\xe9cup\xe9rez des donn\xe9es sur une API interne"),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/7159296-deboguez-l-interface-de-votre-site-internet/7282651-recuperez-des-donnees-sur-une-api-interne"},"R\xe9cup\xe9rez des donn\xe9es sur une API interne - D\xe9boguez l\u2019interface de votre site internet - OpenClassrooms")),(0,r.mdx)("p",null,(0,r.mdx)("img",{parentName:"p",src:"https://user.oc-static.com/upload/2021/06/18/16240257152166_P4C2_Re%CC%81cupe%CC%81rez-des-donne%CC%81es-sur-une-API-interne.png",alt:null})),(0,r.mdx)("p",null,"Avant de commencer ce chapitre, petit rappel : ",(0,r.mdx)("strong",{parentName:"p"},"une API n\u2019est pas forc\xe9ment li\xe9e \xe0 un webservice"),". Votre navigateur comporte de tr\xe8s\nnombreuses API internes :"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Le LocalStorage utilise l\u2019API du Web Storage pour stocker des informations sur votre navigateur ;"),(0,r.mdx)("li",{parentName:"ul"},"L\u2019API Canvas fournit un moyen de dessiner via le JavaScript et le HTML.")),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Le ",(0,r.mdx)("a",{parentName:"p",href:"https://developer.mozilla.org/fr/docs/Web/API"},"MDN vous fournit la liste de toutes les API possibles"),"."),(0,r.mdx)("p",{parentName:"div"},"Certaines sont utilis\xe9es, d\u2019autres sont d\xe9pr\xe9ci\xe9es. Cela dit, \xe7a vous donne une bonne id\xe9e de ce qui est possible.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})))),(0,r.mdx)("h3",{id:"r\xe9cup\xe9rez-des-donn\xe9es-de-g\xe9olocalisation"},"R\xe9cup\xe9rez des donn\xe9es de g\xe9olocalisation"),(0,r.mdx)("p",null,"Dans le cadre du projet Fa\xe7adia, nous allons utiliser l\u2019API de g\xe9olocalisation sur la page de cr\xe9ation d\u2019un formulaire. Vous pouvez trouver\n",(0,r.mdx)("a",{parentName:"p",href:"https://developer.mozilla.org/fr/docs/Web/API/Geolocation_API"},"la documentation de cette API sur le MDN"),"."),(0,r.mdx)("figure",null,(0,r.mdx)("img",{src:"https://user.oc-static.com/upload/2021/06/17/16239386604874_image26.png",alt:"Screenshot de la page du MDN concernant l\u2019API de G\xe9olocalisation"}),(0,r.mdx)("figcaption",null,"La page du MDN concernant l\u2019API de G\xe9olocalisation")),(0,r.mdx)("p",null,"Cela dit, comme toujours, avant de se lancer pleinement dans le code, il est important de d\xe9couvrir comment fonctionne cette API en dehors du\nprojet. Une fois cette API bien comprise, vous pourrez voir comment elle a \xe9t\xe9 int\xe9gr\xe9e au projet."),(0,r.mdx)("h4",{id:"d\xe9couvrez-lapi-de-g\xe9olocalisation"},"D\xe9couvrez l\u2019API de g\xe9olocalisation"),(0,r.mdx)("p",null,"J\u2019ai une bonne nouvelle \xe0 vous annoncer.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("p",null,"La documentation du MDN sur l\u2019API de g\xe9olocalisation est tr\xe8s ",(0,r.mdx)("strong",{parentName:"p"},"tr\xe8s")," claire ! Elle va vous montrer comment l\u2019int\xe9grer facilement au projet,\ncomment g\xe9rer les cas d\u2019erreurs et elle comporte m\xeame un exemple : c\u2019est un peu le r\xeave du d\xe9veloppeur !"),(0,r.mdx)("p",null,"Dans la vid\xe9o ci-dessous, je vais vous montrer comment utiliser l\u2019API. Voici la branche relative \xe0 cette partie :\xa0",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/OpenClassrooms-Student-Center/debuggez-l-interface-de-votre-site/tree/partie-4/chapitre-2%2Fsection-1"},"partie-4/chapitre-2/section-1"),".\nLa page de test se trouve dans le ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/OpenClassrooms-Student-Center/debuggez-l-interface-de-votre-site/blob/partie-4/chapitre-2/section-1/pages/geolocation.html"},"dossier\xa0pages/geolocation.html")),(0,r.mdx)(o.fG,{vimeoId:"566589933",mdxType:"Vimeo"}),(0,r.mdx)("br",null),(0,r.mdx)("p",null,"Quelques \xe9l\xe9ments \xe0 retenir sur l\u2019API avant de poursuivre :"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"L\u2019API de g\xe9olocalisation se trouve dans l\u2019objet ",(0,r.mdx)("inlineCode",{parentName:"li"},"navigator.geolocation"),". Tous les navigateurs ne la prennent pas en charge."),(0,r.mdx)("li",{parentName:"ul"},"Une fois que vous avez pu tester si elle \xe9tait disponible, la m\xe9thode ",(0,r.mdx)("inlineCode",{parentName:"li"},"getCurrentPosition")," vous permet de r\xe9cup\xe9rer votre position actuelle.\nC\u2019est cette m\xe9thode que nous allons utiliser dans le projet Fa\xe7adia."),(0,r.mdx)("li",{parentName:"ul"},"Vous pouvez aussi suivre l\u2019\xe9volution de la position gr\xe2ce \xe0 la m\xe9thode ",(0,r.mdx)("inlineCode",{parentName:"li"},"watchPosition"),".")),(0,r.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"?")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Dans le cadre de l\u2019API de WeatherStack,\xa0on avait mock\xe9 les donn\xe9es. Ce n'est pas fait ici, est-ce g\xeanant ?"))),(0,r.mdx)("p",null,"Bonne question !"),(0,r.mdx)("p",null,"Dans le cas de cette API, il n\u2019y a pas de limite de consommation : vous pouvez demander votre position autant de fois que vous le souhaitez. Il\nn\u2019y a donc pas vraiment besoin de mocker les donn\xe9es.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("h4",{id:"int\xe9grez-lapi-de-g\xe9olocalisation-dans-le-projet-fil-rouge"},"Int\xe9grez l\u2019API de g\xe9olocalisation dans le projet fil rouge"),(0,r.mdx)("p",null,"Maintenant que l\u2019API de g\xe9olocalisation n\u2019a plus de secrets pour vous, il est temps de s\u2019int\xe9resser \xe0 son int\xe9gration dans notre projet Fa\xe7adia !\nPour rappel, nous nous servons de cette API sur la page de cr\xe9ation d\u2019un capteur."),(0,r.mdx)("figure",null,(0,r.mdx)("img",{src:"https://user.oc-static.com/upload/2021/06/17/16239388980081_image48.png",alt:"Screenshot de la page de cr\xe9ation d\u2019un capteur"}),(0,r.mdx)("figcaption",null,"La page de cr\xe9ation d\u2019un capteur, avec la g\xe9olocalisation")),(0,r.mdx)("p",null,"Dans la vid\xe9o ci-dessous, je vais vous montrer comment l\u2019API est int\xe9gr\xe9e sur notre projet. J\u2019utiliserai le code source de la branche main."),(0,r.mdx)(o.fG,{vimeoId:"566589988",mdxType:"Vimeo"}),(0,r.mdx)("br",null),(0,r.mdx)("p",null,"Maintenant que vous avez vu comment l\u2019API fonctionnait et \xe9tait utilis\xe9e dans notre projet Fa\xe7adia, nous pouvons nous int\xe9resser aux messages\nd\u2019erreur.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("h3",{id:"comprenez-les-messages-derreur-dune-api-interne"},"Comprenez les messages d\u2019erreur d\u2019une API interne"),(0,r.mdx)("p",null,"J\u2019ai une bonne et une mauvaise nouvelle !"),(0,r.mdx)("p",null,"La mauvaise nouvelle, c\u2019est que la gestion des erreurs des API internes n\u2019est pas la m\xeame d\u2019une API \xe0 l\u2019autre. Les messages d\u2019erreur ne seront\npas les m\xeames ainsi que les cas d\u2019erreur."),(0,r.mdx)("p",null,"Cela dit, et c\u2019est la bonne nouvelle, la documentation du MDN sur les API internes sera souvent d\u2019excellente facture ; elle vous permettra de\nbien comprendre comment utiliser l\u2019API et comment traiter les erreurs de fa\xe7on \xe9l\xe9gante."),(0,r.mdx)("p",null,"Nous allons voir ici un exemple d\u2019API pour justement vous permettre de mieux comprendre et parcourir la documentation. Je vous invite d\u2019ailleurs\n\xe0 aller en voir d\u2019autres (n\u2019oubliez pas que ",(0,r.mdx)("a",{parentName:"p",href:"https://developer.mozilla.org/fr/docs/Web/API"},"cette page vous donne toutes les API internes possibles"),")\net \xe0 essayer de comprendre comment les erreurs sont g\xe9r\xe9es."),(0,r.mdx)("h4",{id:"d\xe9couvrez-comment-les-erreurs-sont-g\xe9r\xe9es-sur-lapi-de-g\xe9olocalisation"},"D\xe9couvrez comment les erreurs sont g\xe9r\xe9es sur l\u2019API de g\xe9olocalisation"),(0,r.mdx)("p",null,"Si vous vous rendez sur ",(0,r.mdx)("a",{parentName:"p",href:"https://developer.mozilla.org/fr/docs/Web/API/Geolocation_API"},"la documentation de cette API sur le MDN"),', vous\ntrouverez un paragraphe appel\xe9 "G\xe9rer les erreurs".'),(0,r.mdx)("p",null,"On vous y explique que vous allez devoir passer une callback dans la m\xe9thode getCurrentPosition. Cela vous donnera donc le code suivant :"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"/* Ma callback de succ\xe8s */\nfunction success(position) {\n    /* J'ai r\xe9cup\xe9r\xe9 la position et les coordonn\xe9es GPS, je peux faire quelque chose avec */\n}\n/* Ma callback d'erreur */\nfunction error() {\n    /* Quelque chose n'a pas march\xe9 : je traite de fa\xe7on \xe9l\xe9gante l'erreur */\n}\n/* La m\xe9thode getCurrentPosition */\nnavigator.geolocation.getCurrentPosition(success, error);\n")),(0,r.mdx)("p",null,"Plut\xf4t pratique, non ?"),(0,r.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"?")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Est-ce obligatoire de traiter les cas d\u2019erreur ?"))),(0,r.mdx)("p",null,"Oui et m\xeame deux fois oui !"),(0,r.mdx)("p",null,"L\u2019absence de traitement d\u2019un cas d\u2019erreur peut vous causer de gros soucis : votre programme peut planter et il peut planter de fa\xe7on silencieuse\nce qui sera un cauchemar \xe0 d\xe9boguer. Donc, s'il vous pla\xeet, faites-vous une fleur et rajoutez la gestion des messages d\u2019erreur.\xa0",(0,r.mdx)("img",{parentName:"p",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("h3",{id:"\xe0-vous-de-jouer--1"},"\xc0 vous de jouer !"),(0,r.mdx)("p",null,(0,r.mdx)("img",{parentName:"p",src:"https://user.oc-static.com/upload/2021/06/24/16245418386149_A-vous-de-jouer%20%281%29.png",alt:"16245418386149_A-vous-de-jouer%20%281%29.png"})),(0,r.mdx)("p",null,"Avant de passer \xe0 la derni\xe8re partie de ce cours, c\u2019est l\u2019heure du cas pratique ! Il semblerait que la g\xe9olocalisation soit cass\xe9e et ne\nfonctionne plus correctement comme semble l\u2019indiquer ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/tdimnet/debuggez-l-interface-de-votre-site/issues/4"},"cette issue Github"),".\nPrenez le temps de la regarder et d\u2019essayer de trouver le bug par vous-m\xeame avant de regarder la vid\xe9o ci-dessous.\xa0"),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Le bug se trouve sur la branche ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/OpenClassrooms-Student-Center/debuggez-l-interface-de-votre-site/tree/partie-4/chapitre-2%2Fexercise"},"partie-4/chapitre-2/exercise"),"."))),(0,r.mdx)(o.fG,{vimeoId:"566590024",mdxType:"Vimeo"}),(0,r.mdx)("br",null),(0,r.mdx)("div",{className:"admonition admonition-info alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"Vous pouvez trouver la solution au bug sur cette branche : ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/OpenClassrooms-Student-Center/debuggez-l-interface-de-votre-site/tree/partie-4/chapitre-2%2Fexercise-solution"},"partie-4/chapitre-2/exercise-solution"),"."))),(0,r.mdx)("h3",{id:"en-r\xe9sum\xe9-1"},"En r\xe9sum\xe9"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Comme les API externes, les API internes ont aussi une fa\xe7on de traiter les erreurs. Le meilleur moyen de d\xe9couvrir comment elles sont\ntrait\xe9es est de parcourir la documentation."),(0,r.mdx)("li",{parentName:"ul"},"Le MDN est une excellente source d\u2019information pour comprendre comment fonctionne une API et comment elle g\xe8re les cas d\u2019erreur."),(0,r.mdx)("li",{parentName:"ul"},"Il est important de traiter vos messages d\u2019erreur ! En effet, un message d\u2019erreur non trait\xe9 peut compliquer tr\xe8s fortement le d\xe9bogage.")),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Vous savez maintenant d\xe9boguer des API externes et internes, f\xe9licitations ! Il est maintenant temps de passer \xe0 la derni\xe8re partie du cours :\nd\xe9boguer des applications.")),(0,r.mdx)("hr",null),(0,r.mdx)("h2",{id:"quiz--solutionnez-des-bugs-sur-lapi"},"Quiz : Solutionnez des bugs sur l\u2019API"),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/7159296-deboguez-l-interface-de-votre-site-internet/exercises/4155"},"Solutionnez des bugs sur l\u2019API - OpenClassrooms")),(0,r.mdx)("h4",{id:"comp\xe9tences-\xe9valu\xe9es"},"Comp\xe9tences \xe9valu\xe9es"),(0,r.mdx)("i",{class:"bi bi-check2-circle"})," D\xe9boguer des bugs sur l\u2019API",(0,r.mdx)("hr",null),(0,r.mdx)("h4",{id:"question-1--quappelle-t-on-le-mocking-quand-on-parle-dapi-"},'Question 1 : Qu\u2019appelle-t-on le "mocking" quand on parle d\u2019API ?'),(0,r.mdx)("i",{class:"bi bi-circle"})," C\u2019est le fait de d\xe9signer l\u2019API Rest : quelles vont \xeatre les routes utilis\xe9es, \xe0 quelles ressources vont-elles correspondre, etc.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," C\u2019est le fait de tester une API Rest : est-ce que les routes appel\xe9es retournent bien les bonnes donn\xe9es, s\u2019il y a des erreurs, etc.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," C\u2019est le fait de consommer une API : on va r\xe9cup\xe9rer les informations d\xe9sir\xe9es en fonction des ressources appel\xe9es pour les afficher dans son interface front-end.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-record-circle"})," C\u2019est le fait de simuler un call API : on va sauvegarder les r\xe9ponses dans un fichier pour \xe9viter de d\xe9passer le quota de requ\xeates autoris\xe9es.",(0,r.mdx)("br",null),(0,r.mdx)("br",null),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},'"Mocker" permet de ne pas d\xe9passer les quotas/limites d\u2019une API. On va enregistrer la r\xe9ponse dans un fichier \xe0 part (un fichier json) et\nsimuler le call API.')),(0,r.mdx)("hr",null),(0,r.mdx)("h4",{id:"question-2--dans-cette-question-vous-allez-devoir-utiliser-postman-et-r\xe9aliser-un-call-http-aupr\xe8s-de-lapi-de-weatherstack"},"Question 2 : Dans cette question, vous allez devoir utiliser Postman et r\xe9aliser un call HTTP aupr\xe8s de l\u2019API de WeatherStack."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"R\xe9alisez une requ\xeate GET sur cette URL : ",(0,r.mdx)("a",{parentName:"strong",href:"http://api.weatherstack.com/current?access_key=931f119b9236cc4743d277b1e73b6e77&uery=Paris"},"http://api.weatherstack.com/current?access","_","key=ajouteIciVotreAccessKey&uery=Paris"))),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Pensez bien \xe0 ajouter votre acc\xe8s key.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Quel est le status code retourn\xe9 ?")),(0,r.mdx)("i",{class:"bi bi-circle"})," 101",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-record-circle"})," 200",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," 403",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," 601",(0,r.mdx)("br",null),(0,r.mdx)("br",null),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},'Le message retourn\xe9 est un status code 200 bien qu\u2019une erreur soit aussi pr\xe9sente dans le "body" de la r\xe9ponse.')),(0,r.mdx)("figure",null,(0,r.mdx)("img",{src:"https://user.oc-static.com/upload/2021/06/17/16239642798087_image14.png",alt:"Screencast du message retourn\xe9 avec le status code 200."}),(0,r.mdx)("figcaption",null,"Le message retourn\xe9")),(0,r.mdx)("hr",null),(0,r.mdx)("h4",{id:"question-3--pour-cette-question-vous-allez-peut-\xeatre-devoir-faire-un-tour-sur-le-mdn"},"Question 3 : Pour cette question, vous allez peut-\xeatre devoir faire ",(0,r.mdx)("a",{parentName:"h4",href:"https://developer.mozilla.org/fr/docs/Web/HTTP/Status"},"un tour sur le MDN")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"\xc0 quoi correspond le status code 401 ?")),(0,r.mdx)("i",{class:"bi bi-record-circle"})," Une authentification est n\xe9cessaire pour acc\xe9der \xe0 la ressource.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," Requ\xeate trait\xe9e avec succ\xe8s. La r\xe9ponse d\xe9pendra de la m\xe9thode de requ\xeate utilis\xe9e.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," Document d\xe9plac\xe9 de fa\xe7on permanente.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," Service temporairement indisponible ou en maintenance.",(0,r.mdx)("br",null),(0,r.mdx)("br",null),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Vous n\u2019avez pas besoin de conna\xeetre tous les status code : il y en a beaucoup trop. Cela dit, il est important de conna\xeetre les principaux\npour \xe9viter d\u2019avoir \xe0 chercher leur signification trop r\xe9guli\xe8rement ",(0,r.mdx)("img",{parentName:"em",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"}),".\nLe MDN est une ressource \xe0 avoir toujours \xe0 port\xe9e de main !")),(0,r.mdx)("hr",null),(0,r.mdx)("h4",{id:"question-4--pour-cette-question-vous-aurez-besoin-de-changer-de-branche"},"Question 4 : Pour cette question, vous aurez besoin de changer de branche.\xa0",(0,r.mdx)("img",{parentName:"h4",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Commencez par faire un ",(0,r.mdx)("inlineCode",{parentName:"strong"},"git checkout partie-4/quiz/question-4")," ",(0,r.mdx)("a",{parentName:"strong",href:"https://github.com/OpenClassrooms-Student-Center/debuggez-l-interface-de-votre-site/tree/partie-4/quiz%2Fquestion-4"},"partie-4/quiz/question-4"),",\nouvrez le projet avec l\u2019extension LiveServer et rendez-vous sur la page concernant le d\xe9tail d\u2019un capteur.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Il semblerait que les donn\xe9es m\xe9t\xe9o ne se mettent plus \xe0 jour. \xc0 l\u2019aide des outils \xe0 votre disposition (console, inspecteur, network),\nd\xe9couvrez le bug.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Pensez \xe0 bien ajouter votre access key dans le fichier\xa0",(0,r.mdx)("inlineCode",{parentName:"strong"},"weatherStackAPI"),"\xa0avant de vous lancer dans le d\xe9bogage.")),(0,r.mdx)("i",{class:"bi bi-circle"})," Il y a une erreur de typographie pour le param\xe8tre query.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," Les coordonn\xe9es g\xe9ographiques ne sont pas pass\xe9es comme il faut.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-record-circle"})," Il y a une erreur de typographie pour le param\xe8tre access_key.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," On doit passer le nom de la ville et non les coordonn\xe9es GPS.",(0,r.mdx)("br",null),(0,r.mdx)("br",null),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Essayez d\u2019aller regarder dans la r\xe9ponse de l\u2019API : vous y verrez un message d\u2019erreur indiquant que l\u2019access_key est manquante.")),(0,r.mdx)("figure",null,(0,r.mdx)("img",{src:"https://user.oc-static.com/upload/2021/06/17/16239648765844_image7.png",alt:"Screencast du message d\u2019erreur"}),(0,r.mdx)("figcaption",null,"Le message d\u2019erreur")),(0,r.mdx)("hr",null),(0,r.mdx)("h4",{id:"question-5--quand-on-travaille-avec-une-api-interne-au-navigateur-telle-que-lapi-de-webstorage-de-canvas-ou-celle-de-g\xe9olocalisation-les-messages-derreur-sont-ils-les-m\xeames-"},"Question 5 : Quand on travaille avec une API Interne au navigateur, telle que l\u2019API de WebStorage, de canvas ou celle de g\xe9olocalisation, les messages d\u2019erreur sont-ils les m\xeames ?"),(0,r.mdx)("i",{class:"bi bi-circle"})," Oui. Il est important que les messages d\u2019erreur soient les m\xeames entre les API. Cela permet de garder de la consistance entre les API.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-record-circle"})," Non. Les messages d\u2019erreur ne sont pas les m\xeames et il faut lire la documentation de chaque API avant de devoir les utiliser.",(0,r.mdx)("br",null),(0,r.mdx)("br",null),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Les messages d\u2019erreur entre les API ne peuvent pas \xeatre les m\xeames \xe9tant donn\xe9 qu\u2019elles ne font pas la m\xeame chose. Au moment de d\xe9couvrir une\nAPI interne, vous allez devoir passer par la case documentation.")),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Cela dit, pas de panique, le MDN fournit des documentations tr\xe8s d\xe9taill\xe9es de chaque API : ",(0,r.mdx)("a",{parentName:"em",href:"https://developer.mozilla.org/en-US/docs/Web/API"},"https://developer.mozilla.org/en-US/docs/Web/API"),".")),(0,r.mdx)("hr",null),(0,r.mdx)("h4",{id:"question-6--pour-cette-question-vous-aurez-besoin-de-changer-de-branche"},"Question 6 : Pour cette question, vous aurez besoin de changer de branche.\xa0",(0,r.mdx)("img",{parentName:"h4",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Commencez par faire un ",(0,r.mdx)("inlineCode",{parentName:"strong"},"git checkout partie-4/quiz/question-6")," ",(0,r.mdx)("a",{parentName:"strong",href:"https://github.com/OpenClassrooms-Student-Center/debuggez-l-interface-de-votre-site/tree/partie-4/quiz%2Fquestion-6"},"partie-4/quiz/question-6"),",\nouvrez le projet avec l\u2019extension LiveServer et rendez-vous sur la page d\u2019ajout d\u2019un capteur.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"On dirait que la g\xe9olocalisation est encore cass\xe9e. En utilisant les m\xe9thodes vues dans le cours, r\xe9solvez le bug.")),(0,r.mdx)("i",{class:"bi bi-record-circle"})," Il y a une erreur de typographie pour la g\xe9olocalisation.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," On a invers\xe9 la callback de succ\xe8s et la callback d\u2019erreur : le formulaire n\u2019est jamais rempli.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," On n\u2019utilise pas la bonne API de g\xe9olocalisation : elle n\u2019est jamais ex\xe9cut\xe9e.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," Il y a une erreur de typographie pour la s\xe9lection des \xe9l\xe9ments sur le DOM. On compl\xe8te des noeuds qui n\u2019existent pas.",(0,r.mdx)("br",null),(0,r.mdx)("br",null),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Il y a une erreur de typographie dans le code : on utilise ",(0,r.mdx)("inlineCode",{parentName:"em"},"geolocatio"),"\xa0au lieu de ",(0,r.mdx)("inlineCode",{parentName:"em"},"geolocation"),". Comme\xa0",(0,r.mdx)("inlineCode",{parentName:"em"},"geolocatio")," n\u2019existe pas dans l\u2019objet\n",(0,r.mdx)("inlineCode",{parentName:"em"},"navigator"),", le code n\u2019est jamais ex\xe9cut\xe9.")),(0,r.mdx)("hr",null),(0,r.mdx)("h4",{id:"question-7--pour-cette-question-vous-aurez-besoin-de-changer-de-branche"},"Question 7 : Pour cette question, vous aurez besoin de changer de branche.\xa0",(0,r.mdx)("img",{parentName:"h4",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Commencez par faire un ",(0,r.mdx)("inlineCode",{parentName:"strong"},"git checkout partie-4/quiz/question-7")," ",(0,r.mdx)("a",{parentName:"strong",href:"https://github.com/OpenClassrooms-Student-Center/debuggez-l-interface-de-votre-site/tree/partie-4/quiz%2Fquestion-7"},"partie-4/quiz/question-7"),",\nouvrez le projet avec l\u2019extension LiveServer et rendez-vous sur la page d\u2019accueil connect\xe9e.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"A\xefe ! On dirait qu\u2019on n\u2019arrive plus \xe0 afficher les capteurs. On a bien une erreur en console mais cela ne ressemble pas \xe0 une erreur d\u2019API.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Les capteurs n\u2019apparaissent pas sur la page, \xe0 gauche.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"En utilisant les techniques de d\xe9bogage vues dans le cours, trouvez la bonne r\xe9ponse.")),(0,r.mdx)("i",{class:"bi bi-circle"})," Il s\u2019agit d\u2019un probl\xe8me de requ\xeate asynchrone. On n\u2019attend pas d\u2019avoir re\xe7u le r\xe9sultat pour lancer les traitements.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," Il s\u2019agit d\u2019un probl\xe8me avec le fichier. On n\u2019appelle pas le bon fichier pour r\xe9aliser la requ\xeate.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," Il s\u2019agit d\u2019un probl\xe8me lors de la r\xe9cup\xe9ration des donn\xe9es. On retourne mal les donn\xe9es contenues dans les capteurs.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-record-circle"})," Il s\u2019agit d\u2019un probl\xe8me avec la m\xe9thode fetch. On appelle la m\xe9thode ",(0,r.mdx)("code",null,".json")," de la mauvaise fa\xe7on.",(0,r.mdx)("br",null),(0,r.mdx)("br",null),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"On appelle la m\xe9thode\xa0",(0,r.mdx)("inlineCode",{parentName:"em"},"res.json")," et non ",(0,r.mdx)("inlineCode",{parentName:"em"},"res.json()"),". Le ",(0,r.mdx)("inlineCode",{parentName:"em"},".catch")," n\u2019est pas compl\xe9t\xe9. On n\u2019a aucune information concernant l\u2019erreur lors du\nfetch.")),(0,r.mdx)("hr",null),(0,r.mdx)("h4",{id:"question-8--pour-cette-question-vous-aurez-besoin-de-changer-de-branche"},"Question 8 : Pour cette question, vous aurez besoin de changer de branche.\xa0",(0,r.mdx)("img",{parentName:"h4",src:"https://openclassrooms.com/bundles/common/images/smiley/smile.png",alt:":)"})),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Commencez par faire un ",(0,r.mdx)("inlineCode",{parentName:"strong"},"git checkout partie-4/quiz/question-8")," ",(0,r.mdx)("a",{parentName:"strong",href:"https://github.com/OpenClassrooms-Student-Center/debuggez-l-interface-de-votre-site/tree/partie-4/quiz%2Fquestion-8"},"partie-4/quiz/question-8"),",\nouvrez le projet avec l\u2019extension LiveServer et rendez-vous sur la page concernant le d\xe9tail d\u2019un capteur.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"On dirait bien que les donn\xe9es m\xe9t\xe9o ne sont plus r\xe9cup\xe9r\xe9es aupr\xe8s de WeatherStack. Pensez bien \xe0 ajouter votre cl\xe9 d\u2019API \xe0 la ligne 1 du\nfichier ",(0,r.mdx)("inlineCode",{parentName:"strong"},"weatherStackAPI.js"),".")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"D\u2019o\xf9 le bug peut-il venir ?")),(0,r.mdx)("i",{class:"bi bi-circle"})," L\u2019API de WeatherStack est mal appel\xe9e : on ne lui passe pas le bon param\xe8tre ",(0,r.mdx)("code",null,"query"),".",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," On utilise les donn\xe9es mock\xe9es au lieu d\u2019utiliser les donn\xe9es de l\u2019API. Cela donne une erreur de compatibilit\xe9.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-record-circle"})," L\u2019API de WeatherStack est mal appel\xe9e : on utilise https au lieu de http.",(0,r.mdx)("br",null),(0,r.mdx)("i",{class:"bi bi-circle"})," Il y a une erreur de typo dans l\u2019URL de l\u2019API o\xf9 on utilise ",(0,r.mdx)("code",null,"ap.weatherstack.com")," au lieu de",(0,r.mdx)("code",null,"api.weatherstack.com"),(0,r.mdx)("br",null),(0,r.mdx)("br",null),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"On utilise ",(0,r.mdx)("inlineCode",{parentName:"em"},"https"),"\xa0au lieu de ",(0,r.mdx)("inlineCode",{parentName:"em"},"http")," et comme la callback d\u2019erreur n\u2019est pas compl\xe9t\xe9e aucune erreur ne s\u2019affiche \xe0 l\u2019\xe9cran.")),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Pour rappel, nous ne pouvons pas utiliser le ",(0,r.mdx)("inlineCode",{parentName:"em"},"https"),"\xa0car nous utilisons la version gratuite de l\u2019API.")))}c.isMDXComponent=!0}}]);