<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/Mon_Web_Dev_Wiki/blog/rss.xml" title="Mon wiki de développement web RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Mon_Web_Dev_Wiki/blog/atom.xml" title="Mon wiki de développement web Atom Feed"><title data-react-helmet="true">Communiquez via une API avec un service web | Mon wiki de développement web</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://gylgyl2000.github.io/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/2-Communiquez_via_une_API_avec_un_service_web"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Communiquez via une API avec un service web | Mon wiki de développement web"><meta data-react-helmet="true" name="description" content="Comprenez ce que sont des API et un service web"><meta data-react-helmet="true" property="og:description" content="Comprenez ce que sont des API et un service web"><link data-react-helmet="true" rel="icon" href="https://monwikidevweb.la-loutre.fr/img/river-otter-silhouette.svg"><link data-react-helmet="true" rel="canonical" href="https://gylgyl2000.github.io/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/2-Communiquez_via_une_API_avec_un_service_web"><link data-react-helmet="true" rel="alternate" href="https://gylgyl2000.github.io/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/2-Communiquez_via_une_API_avec_un_service_web" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://gylgyl2000.github.io/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/2-Communiquez_via_une_API_avec_un_service_web" hreflang="x-default"><link rel="stylesheet" href="/Mon_Web_Dev_Wiki/assets/css/styles.63c1cfd2.css">
<link rel="preload" href="/Mon_Web_Dev_Wiki/assets/js/runtime~main.ce0593c5.js" as="script">
<link rel="preload" href="/Mon_Web_Dev_Wiki/assets/js/main.faca9600.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Mon_Web_Dev_Wiki/"><div class="navbar__logo"><img src="https://monwikidevweb.la-loutre.fr/img/river-otter-silhouette.svg" alt="Otter" class="themedImage_1VuW themedImage--light_3UqQ"><img src="https://monwikidevweb.la-loutre.fr/img/river-otter-silhouette.svg" alt="Otter" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Mon Wiki Dev Web par LaLoutre</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Mon_Web_Dev_Wiki/docs/menu">Menu</a><a class="navbar__item navbar__link" href="/Mon_Web_Dev_Wiki/docs/Outils/menu">Outils</a><a class="navbar__item navbar__link" href="/Mon_Web_Dev_Wiki/docs/Aide-memoire/menu">Aide-mémoire</a><a class="navbar__item navbar__link" href="/Mon_Web_Dev_Wiki/docs/Algorithmes/menu">Algorithmes</a><a class="navbar__item navbar__link" href="/Mon_Web_Dev_Wiki/docs/Lexique/">Lexique</a><a href="https://github.com/gylgyl2000/Mon_Web_Dev_Wiki" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/menu">OpenClassrooms</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Prenez_en_main_votre_formation_de_developpeur_web/mission">Prenez en main votre formation de développeur web</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Transformez_une_maquette_en_site_web_avec_HTML_&amp;_CSS/mission">Transformez une maquette en site web avec HTML &amp; CSS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Dynamisez_une_page_web_avec_des_animations_CSS/mission">Dynamisez une page web avec des animations CSS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Optimisez_un_site_web_existant/mission">Optimisez un site web existant</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/ancienne_mission">Construisez un site e-commerce</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/ancienne_mission">Ancienne mission</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/mission">Mission</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Decouvrez_le_fonctionnement_des_algorithmes/Introduction_du_cours">Découvrez le fonctionnement des algorithmes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Apprenez_a_programmer_avec_JavaScript/Introduction_du_cours">Apprenez à programmer avec JavaScript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/Introduction_du_cours">Écrivez du JavaScript pour le web</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/Introduction_du_cours">Introduction du cours</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/1-Manipulez_le_DOM">Manipulez le DOM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/2-Communiquez_via_une_API_avec_un_service_web">Communiquez via une API avec un service web</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/3-Parallelisez_vos_longues_taches_avec_la_programmation_asynchrone">Parallélisez vos longues tâches avec la programmation asynchrone</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/4-Mettez_en_place_les_bons_outils_pour_travailler">Mettez en place les bons outils pour travailler</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Deboguez_l_interface_de_votre_site_internet/Introduction_du_cours">Déboguez l’interface de votre site internet</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_une_API_securisee_pour_une_application_d_avis_gastronomiques/mission">Construisez une API sécurisée pour une application d&#x27;avis gastronomiques</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Creez_un_reseau_social_d_entreprise/mission">Créez un réseau social d’entreprise</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Definissez_votre_projet_professionnel_et_preparez_vos_outils_de_candidature/mission">Définissez votre projet professionnel et préparez vos outils de candidature</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Candidatez/mission">Candidatez</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Communiquez via une API avec un service web</h1></header><h2 class="anchor anchorWithStickyNavbar_31ik" id="comprenez-ce-que-sont-des-api-et-un-service-web">Comprenez ce que sont des API et un service web<a class="hash-link" href="#comprenez-ce-que-sont-des-api-et-un-service-web" title="Direct link to heading">​</a></h2><p><a href="https://openclassrooms.com/fr/courses/5543061-ecrivez-du-javascript-pour-le-web/5577576-comprenez-ce-que-sont-des-api-et-un-service-web" target="_blank" rel="noopener noreferrer">Comprenez ce que sont des API et un service web - Écrivez du JavaScript pour le web - OpenClassrooms</a></p><div data-testid="general-observer" class="mdx-embed"><div style="height:0;width:100%"></div></div><br><p>Les services web et les API sont des éléments essentiels aux applications web. N’importe quel site sur lequel vous naviguez est un service web,
et il fournit une API pour communiquer avec.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>?</h5></div><div class="admonition-content"><p>Mais qu’est-ce que c’est exactement ?</p></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="quest-ce-quun-service-web-">Qu&#x27;est-ce qu&#x27;un service web ?<a class="hash-link" href="#quest-ce-quun-service-web-" title="Direct link to heading">​</a></h4><p>Un service web est un programme s&#x27;exécutant sur un serveur accessible depuis Internet et fournissant un service.</p><p>Par exemple, Google est un service web qui vous permet de rechercher des sites web. Une application météo communique avec un service web qui
fournit la météo. Un réseau social est un service web qui permet de retrouver ses amis et de communiquer avec.</p><p>Le but d’un service web est donc de fournir un service à celui qui le demande. Et pour ce faire, il met à disposition une <strong>API</strong>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="quest-ce-quune-api-">Qu’est-ce qu’une API ?<a class="hash-link" href="#quest-ce-quune-api-" title="Direct link to heading">​</a></h4><p>Une API, ou <em>Application Programming Interface</em>, est une interface de communication. Il en existe différents types, mais celle qui nous
intéresse est celle qui permet de communiquer avec les services web.</p><p>L’API correspond à l’ensemble des demandes que l’on peut faire à un service web. Ces demandes sont appelées des <strong>requêtes</strong>.</p><p>Par exemple, demander la météo actuelle est une requête. Faire une demande d’ami sur un réseau social est une requête. Ou encore, envoyer un
message via une application de messagerie est une requête.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>?</h5></div><div class="admonition-content"><p>Mais à quoi ressemble une requête ?</p></div></div><p>C&#x27;est une question intéressante, mais aussi complexe. En effet, il a bien fallu se mettre d&#x27;accord sur le <strong>langage</strong> à utiliser pour
communiquer via les API. Mais voilà, un service d&#x27;envoi de mails ne fait pas du tout le même travail qu&#x27;un service nous renvoyant les pages
d&#x27;un site Internet. Il semble donc évident que la manière de communiquer ne sera pas la même pour ces deux services. Des <strong>protocoles de
communication</strong> ont donc été mis en place afin de standardiser la communication entre services faisant la même chose.</p><p>Les <strong>requêtes</strong> sont des données qui respectent le protocole de communication et qui sont envoyées au serveur.</p><p>Nous avons donc un protocole pour l&#x27;envoi de mail (<em>SMTP</em>), la réception de mail (<em>IMAP</em>), les requêtes liées à des ressources web (<em>HTTP),</em>
aux transferts de fichiers (<em>FTP</em>), etc.</p><p>Le protocole qui va nous intéresser est le protocole nous permettant de communiquer avec l’API d’un site Internet : le protocole <strong>HTTP</strong>.
Grâce à lui, nous allons pouvoir récupérer et sauvegarder des données sur un service web, ce qui nous permettra de dynamiser le contenu de nos
pages web.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="quest-ce-que-le-protocole-http-">Qu&#x27;est-ce que le protocole HTTP ?<a class="hash-link" href="#quest-ce-que-le-protocole-http-" title="Direct link to heading">​</a></h4><p><strong><em>HTTP</em></strong> signifie <em>HyperText Transfer Protocol.</em> C&#x27;est un protocole qui permet de <strong>communiquer</strong> avec un site Internet. Il va permettre de
charger des <strong>pages HTML</strong>, des <strong>styles CSS</strong>, des <strong>polices de caractères</strong>, des <strong>images</strong>, etc. Mais ce n&#x27;est pas tout, le protocole HTTP
nous permet aussi d&#x27;envoyer des formulaires et de récupérer et d&#x27;envoyer toutes sortes de données depuis ou vers un serveur implémentant ce
protocole grâce à son API !</p><p>Nous n&#x27;allons pas entrer dans le détail du format des requêtes HTTP<em>,</em> car <a href="https://www.google.fr/search?q=http" target="_blank" rel="noopener noreferrer">de nombreuses références</a> le
font déjà très bien. Tout ce que vous avez besoin de savoir c’est que plusieurs informations se trouvent dans une requête HTTP :</p><ul><li><strong>La méthode</strong>. Il s’agit de l’action que l’on souhaite faire : récupérer une ressource, la supprimer, etc. Voici les méthodes HTTP les plus
courantes :<ul><li><strong>GET</strong> : permet de <strong>récupérer</strong> des ressources, comme par exemple le temps actuel sur un service de météo ;</li><li><strong>POST</strong> : permet de <strong>créer</strong> ou <strong>modifier</strong> une ressource, comme la création d&#x27;un nouvel utilisateur sur votre application ;</li><li><strong>PUT</strong> : permet de <strong>modifier</strong> une ressource, comme le nom de l&#x27;utilisateur que vous venez de créer avec <em>POST</em> ;</li><li><strong>DELETE</strong> : Permet de <strong>supprimer</strong> une ressource, comme un commentaire dans un fil de discussion.</li></ul></li><li><strong>L’URL</strong>. C’est l’adresse sur le service web que vous souhaitez atteindre. Un peu comme un identifiant unique afin que le web service
comprenne ce que vous voulez.</li><li><strong>Les données</strong>. Lorsqu’on fait une requête pour enregistrer des données (par exemple un formulaire) il faut pouvoir envoyer ces données au
service web.</li></ul><p>Une fois votre requête envoyée et traitée par le service web, celui-ci va vous répondre avec, entre autres, les informations suivantes :</p><ul><li><strong>Les données</strong>. Les données que vous avez demandées : une page HTML, etc.</li><li><strong>Le code HTTP</strong>. Il s’agit d’un code numérique qui vous indique comment s’est déroulée la requête. Voici les plus courants :<ul><li><strong>200</strong> : indique que tout s’est bien passé</li><li><strong>400</strong> : indique que votre requête n’est pas conforme à ce qui est attendu</li><li><strong>401</strong> : indique que vous devez être authentifié pour faire cette requête</li><li><strong>403</strong> : indique que vous êtes bien authentifié mais que vous n’êtes pas autorisé à faire cette requête</li><li><strong>404</strong> : indique que la ressource demandée n’existe pas</li><li><strong>500</strong> : indique une erreur avec le service web</li><li><a href="https://fr.wikipedia.org/wiki/Liste_des_codes_HTTP" target="_blank" rel="noopener noreferrer">Voici une liste exhaustive des codes HTTPs</a></li></ul></li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Il s&#x27;agit surtout d&#x27;une convention. Rien n&#x27;oblige un service web à créer une ressource lors d&#x27;une requête <em>POST</em>  par exemple, mais c&#x27;est
généralement le cas.</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="en-résumé">En résumé<a class="hash-link" href="#en-résumé" title="Direct link to heading">​</a></h3><p>Dans ce chapitre, vous avez appris :</p><ul><li>Qu’un service web est une application sur internet qui répond à un besoin : Google qui permet de faire des recherches, Facebook qui permet de
garder contact avec ses amis, etc. ;</li><li>Qu’une API est une interface de communication entre un service web et le navigateur;</li><li>Qu’un protocole de communication permet de définir comment communiquer avec un service. Comme la définition des normes, que tout le monde
peut utiliser.</li><li>Que le protocole HTTP est le protocole de communication utilisé par les services web.</li></ul><p><em>Avec ce que vous venez d&#x27;apprendre, vous êtes maintenant en mesure de communiquer avec un service web. Il ne vous reste plus qu&#x27;à savoir
comment on fait ça en JavaScript, et c&#x27;est justement ce que nous allons voir dans le chapitre suivant !</em></p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="récupérez-des-données-dun-service-web">Récupérez des données d&#x27;un service web<a class="hash-link" href="#récupérez-des-données-dun-service-web" title="Direct link to heading">​</a></h2><p><a href="https://openclassrooms.com/fr/courses/5543061-ecrivez-du-javascript-pour-le-web/5577591-recuperez-des-donnees-dun-service-web" target="_blank" rel="noopener noreferrer">Récupérez des données d&#x27;un service web - Écrivez du JavaScript pour le web - OpenClassrooms</a></p><div data-testid="general-observer" class="mdx-embed"><div style="height:0;width:100%"></div></div><br><p>Maintenant que nous savons ce qu&#x27;est une <strong>requête HTTP</strong>, il ne nous reste plus qu&#x27;à apprendre à en créer une en JavaScript pour récupérer des
données, comme la météo. C&#x27;est là que l’API <strong>Fetch</strong> entre en jeu !</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="quest-ce-que-fetch-">Qu&#x27;est-ce que Fetch ?<a class="hash-link" href="#quest-ce-que-fetch-" title="Direct link to heading">​</a></h3><p>Fetch est un <strong>ensemble d&#x27;objets et de fonctions</strong> mis à disposition par le langage JavaScript, afin d&#x27;exécuter des requêtes HTTP de manière
asynchrone.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Nous verrons en détail ce qu&#x27;<em>asynchrone</em> signifie dans la prochaine partie, retenez simplement pour l’instant que cela permet d&#x27;exécuter du
code (une requête ici), sans bloquer l&#x27;exécution de la page, en attendant la réponse du service web.</p></div></div><p>L’API Fetch  va nous permettre d&#x27;exécuter des requêtes HTTP sans avoir besoin de recharger la page du navigateur. Cela a plusieurs avantages :</p><ul><li><strong>Avoir un site plus réactif</strong> car on n&#x27;a pas besoin de recharger toute la page dès qu&#x27;on a besoin de mettre à jour une partie du contenu ;</li><li><strong>Améliorer l&#x27;expérience utilisateur</strong> avec du nouveau contenu qui se charge au fur et à mesure qu&#x27;on le découvre, par exemple.</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="envoyez-une-première-requête">Envoyez une première requête<a class="hash-link" href="#envoyez-une-première-requête" title="Direct link to heading">​</a></h3><p>Voyons maintenant comment on peut construire et envoyer une requête HTTP.</p><p>Si vous vous souvenez du chapitre précédent, vous devez avoir deviné que nous allons créer une requête HTTP avec la méthode GET, afin de
récupérer des données. C&#x27;est parti !</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://url-service-web.com/api/users&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Ce code nous permet d&#x27;envoyer une requête HTTP de type <em>GET</em> au service web se trouvant à l&#x27;adresse <code>http://url-service-web.com/api/users</code>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="récupérez-les-données-au-format-json">Récupérez les données au format JSON<a class="hash-link" href="#récupérez-les-données-au-format-json" title="Direct link to heading">​</a></h3><p>Maintenant que nous savons comment construire et envoyer une requête HTTP, il faut récupérer et interpréter son résultat.</p><p>Un service web peut choisir le format qu&#x27;il veut pour nous renvoyer des données, mais le plus courant et le plus simple est le <strong>format <em>JSON</em></strong>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="quest-ce-que-le-format-json-">Qu&#x27;est-ce que le format JSON ?<a class="hash-link" href="#quest-ce-que-le-format-json-" title="Direct link to heading">​</a></h4><p><em>JSON</em> signifie <em>JavaScript Object Notation</em>. Il s&#x27;agit d&#x27;un <strong>format textuel</strong> (contrairement à un format binaire plus léger mais impossible à
lire à l&#x27;œil humain), se rapprochant en termes de syntaxe de celui des objets dans le langage JavaScript.</p><p>Ainsi, l&#x27;objet JavaScript suivant :</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mon contenu&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1234</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Voici mon contenu&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    author</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;John&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    comments</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Commentaire 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">46</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Commentaire 2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>sera retranscrit ainsi en JSON :</p><div class="codeBlockContainer_K1bP language-json theme-code-block"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mon contenu&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1234</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Voici mon contenu&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;author&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;John&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;comments&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Commentaire 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">46</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Commentaire 2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Vous pouvez voir comme la syntaxe est similaire entre les 2. Alors qu&#x27;en JavaScript il n&#x27;est pas nécessaire de mettre les propriétés (comme
<code>name</code>, <code>id</code>, <code>message</code>, etc.), entre guillemets, cela l&#x27;est en JSON. En JavaScript, votre objet est assigné à une variable, alors qu&#x27;en JSON
on ne fait que décrire une structure.</p><p>Le gros avantage de ce format lorsqu&#x27;il est utilisé avec le langage JavaScript est qu&#x27;il n&#x27;y a pas besoin de le <em><strong>parser</strong></em> comme on le ferait
avec du <em>XML</em> par exemple. En effet, lorsque l&#x27;on manipule un format de données comme le <em>XML</em>, (que vous pouvez comparer à du HTML dans sa
forme) il est nécessaire de le <em>parser</em>. C&#x27;est-à-dire que notre application doit le <strong>lire</strong> et le <strong>comprendre</strong> afin d&#x27;en faire ce qu&#x27;on veut.
C&#x27;est une opération généralement complexe que l&#x27;on laisse à du code externe développé et éprouvé par d&#x27;autres personnes, afin de gagner du
temps et d&#x27;éviter les erreurs. Mais pour le JSON c&#x27;est différent, car c&#x27;est une syntaxe qui vient des <strong>objets en JavaScript</strong>. Ainsi, votre
navigateur sait directement le lire et le transformer en objets JavaScript. Si l&#x27;on reprend l&#x27;exemple de JSON précédent, il nous fournira donc
un objet JavaScript comme celui du premier échantillon de code ci-dessus.</p><p>Le deuxième avantage de ce format est sa <strong>légèreté</strong> par rapport à un format comme le <em>XML,</em> qui reste bien plus verbeux, c&#x27;est-à-dire avec
plus de texte. C&#x27;est un gros avantage lorsqu&#x27;on communique avec un service web, car cela permet d&#x27;optimiser les temps de réponse. En effet, un
nombre plus faible d&#x27;octets a besoin de transiter dans le réseau.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="récupérez-le-résultat-de-la-requête">Récupérez le résultat de la requête<a class="hash-link" href="#récupérez-le-résultat-de-la-requête" title="Direct link to heading">​</a></h4><p>Avec tout ce que l&#x27;on vient d&#x27;apprendre, il n&#x27;est plus très difficile d&#x27;utiliser le résultat de la requête pour en faire ce que l&#x27;on veut. Pour
cela Fetch va nous renvoyer une <strong>Promise</strong>.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Pour faire simple : la <em>Promise</em> est un objet qui fournit une fonction <em>then</em> qui sera exécutée quand le résultat aura été obtenu, et une
fonction <em>catch</em> qui sera appelée s’il y a une erreur qui est survenue lors de la requête (Nous verrons tout cela plus en détail dans la partie
3).</p></div></div><p>Voici comment procéder avec un service qui fait un simple echo :</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://mockbin.com/request&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ok</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Une erreur est survenue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Vous pouvez voir dans l&#x27;exemple ci-dessus que l&#x27;URL passée à la fonction <code>fetch()</code> a changé et correspond à l’URL de notre service web. Le type
de requête est GET (ce qui est le cas par défaut avec <em>Fetch</em>) car nous voulons récupérer les données.</p><p>Ensuite nous appelons la fonction <code>then()</code> pour récupérer le résultat de la requête au format <em>json</em> en ayant vérifié au préalable que la
requête s’était bien passée avec <code>res.ok</code>. Ce résultat <em>json</em> étant lui aussi une <em>Promise</em>, nous le retournons et récupérons sa vraie valeur
dans la fonction <code>then()</code> suivante.</p><p>Voici ce que nous obtenons de l’API à l’heure où j’écris ces lignes :</p><figure><img src="https://user.oc-static.com/upload/2021/04/04/16175573146865_image8.png" alt="Un extrait JSON de la réponse à la requête"><figcaption>Extrait JSON</figcaption></figure><h3 class="anchor anchorWithStickyNavbar_31ik" id="à-vous-de-jouer-">À vous de jouer !<a class="hash-link" href="#à-vous-de-jouer-" title="Direct link to heading">​</a></h3><p><img src="https://user.oc-static.com/upload/2021/04/20/16189267631776_A-vous-de-jouer%20%282%29.png" alt="16189267631776_A-vous-de-jouer%20%282%29.png"></p><p>Exercez-vous maintenant avec ce que nous venons d&#x27;apprendre.</p><p>Rendez-vous dans <a href="https://codepen.io/fabienhenon/pen/vYxYjpJ" target="_blank" rel="noopener noreferrer">cet éditeur CodePen</a> pour réaliser l&#x27;exercice suivant :
Dans cet exercice nous voulons récupérer les salutations et les afficher dès que nous cliquons sur le bouton <em>&quot;Bien le bonjour&quot;</em></p><ul><li><strong>Etape 1</strong> : Nous allons commencer par la création d&#x27;une fonction <code>askHello</code> qui va créer une requête avec fetch de type <code>GET</code> vers le
service web avec l&#x27;URL <code>https://mockbin.com/request?greetings=salut.</code></li><li><strong>Etape 2</strong> : Maintenant, nous voudrions récupérer la réponse du service web et l&#x27;afficher dans l&#x27;élément ayant pour ID <code>hello-result</code>.
Modifiez donc notre fonction <code>askHello</code> afin de récupérer la réponse du service web dès que tout s&#x27;est bien passé. Le service web vous
retournera une réponse au format JSON, et vous aurez besoin d&#x27;afficher la propriété greetings se trouvant dans l&#x27;objet <code>queryString</code>.</li></ul><p>Voici à quoi ressemble la réponse JSON :</p><div class="codeBlockContainer_K1bP language-json theme-code-block"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;queryString&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;greetings&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Salut&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><strong>Etape 3</strong> : Enfin, nous voulons afficher la salutation (et donc appeler notre fonction <code>askHello</code>) dès que nous cliquons sur le bouton
ayant pour ID <code>ask-hello</code>.</li></ul><div data-testid="general-observer" class="mdx-embed"><div style="height:500px;width:100%"></div></div><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">askHello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://mockbin.com/request?greetings=salut&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ok</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hello-result&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">queryString</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">greetings</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Une erreur est survenue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ask-hello&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;click&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> askHello</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Vous avez essayé ? Voici la <a href="https://codepen.io/fabienhenon/pen/RwovXJd" target="_blank" rel="noopener noreferrer">correction CodePen</a>.</p></div></div><div data-testid="general-observer" class="mdx-embed"><div style="height:500px;width:100%"></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="en-résumé-1">En résumé<a class="hash-link" href="#en-résumé-1" title="Direct link to heading">​</a></h3><p>Dans ce chapitre, vous avez appris :</p><ul><li>Que l’API Fetch permet de faire des requêtes HTTP vers un service web ;</li><li>Comment l&#x27;utiliser pour faire une requête simple à un service web ;</li><li>Que le format JSON est très utilisé dans la communication avec les API des services web car il est très proche des objets JavaScript ;</li><li>Comment récupérer les données envoyées par un service web.</li></ul><p><em>Maintenant que nous savons faire une requête de type GET pour récupérer des données du service web, nous allons voir comment faire une requête
POST pour envoyer des données au service web. Mais avant ça, voyons comment préparer nos données à être envoyées au service web.</em></p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="validez-les-données-saisies-par-vos-utilisateurs">Validez les données saisies par vos utilisateurs<a class="hash-link" href="#validez-les-données-saisies-par-vos-utilisateurs" title="Direct link to heading">​</a></h2><p><a href="https://openclassrooms.com/fr/courses/5543061-ecrivez-du-javascript-pour-le-web/5577611-validez-les-donnees-saisies-par-vos-utilisateurs" target="_blank" rel="noopener noreferrer">Validez les données saisies par vos utilisateurs - Écrivez du JavaScript pour le web - OpenClassrooms</a></p><div data-testid="general-observer" class="mdx-embed"><div style="height:0;width:100%"></div></div><br><p>Avant d&#x27;envoyer nos données à un service web, il est nécessaire de les <strong>valider</strong>. C&#x27;est-à-dire que nous allons vérifier leur <strong>cohérence</strong>
par rapport à ce que le service web attend.</p><p>Les données que l&#x27;on souhaite envoyer à un service web viennent généralement de ce que l&#x27;utilisateur saisit dans un formulaire ; or, ce n&#x27;est
pas parce que vous lui avez explicitement demandé d&#x27;entrer un numéro de téléphone qu&#x27;il va le faire...</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="never-trust-user-input">Never trust user input!<a class="hash-link" href="#never-trust-user-input" title="Direct link to heading">​</a></h3><p>Ce qui se traduit littéralement par : <strong>Ne faites jamais confiance aux données saisies par vos utilisateurs !</strong></p><p>Il est bon de le rappeler :</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Ne faites jamais confiance à vos utilisateurs !</p></div></div><p>Bon, maintenant je pense qu&#x27;il est temps d&#x27;expliquer pourquoi il faut être si méfiant envers vos utilisateurs, et pourquoi c&#x27;est si important.</p><p>Certains de vos utilisateurs peuvent être <strong>malveillants</strong> ou ils peuvent <strong>ne pas bien comprendre</strong> ce que vous souhaitez qu&#x27;ils fassent. Bref,
ils ne vont pas toujours entrer les données que vous attendez d&#x27;eux. Or, cela peut se révéler désastreux pour votre site web, et ce, de
plusieurs façons :</p><ul><li>Si l&#x27;utilisateur ne comprend pas ce que vous attendez de lui, il peut entrer quelque chose qui ne vous convient pas. Votre service web ne
fera pas ce qu&#x27;il faut et l&#x27;utilisateur ne comprendra pas pourquoi ça ne marche pas. Vous risquez de <strong>perdre</strong> cet utilisateur parce que vous
n&#x27;avez pas validé les données saisies et affiché un message d&#x27;erreur indiquant que les données ne sont pas celles attendues ;</li><li>Pire encore, l&#x27;utilisateur pourrait <strong>attaquer</strong> votre service web en entrant des <strong>données malveillantes</strong> dans un champ alors que vous
attendiez simplement un nom, par exemple. Dans ce cas, il pourrait prendre le contrôle de votre service web, collecter des données utilisateurs,
se faire passer pour un administrateur, et j&#x27;en passe... (il existe des tonnes de ressources sur Internet donnant des exemples de ces types
d&#x27;attaques. Si cela vous intéresse, je vous encourage à faire quelques recherches) ;</li><li>De la même manière, l&#x27;utilisateur pourrait <strong>faire planter</strong> votre application s&#x27;il entrait du texte dans un champ où vous attendiez un nombre.</li></ul><p>Nous allons apprendre ici à valider les données utilisateur sur votre site web avant de les envoyer à votre service web. Cela constitue un
premier rempart face aux problèmes cités plus haut, même si ce n&#x27;est pas suffisant, <strong>il faudra toujours avoir une validation poussée des
données utilisateurs sur le service web</strong>.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>C&#x27;est important, car rien n&#x27;empêchera un utilisateur malveillant d&#x27;utiliser un logiciel pour envoyer directement les requêtes HTTP malveillantes
à votre service web. De cette manière, elles ne passeront pas par la case validation côté site web...</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="validez-les-données-suite-à-des-événements">Validez les données suite à des événements<a class="hash-link" href="#validez-les-données-suite-à-des-événements" title="Direct link to heading">​</a></h3><p>Afin de valider les données utilisateurs, vous pouvez vous aider des événements du <em>DOM</em>. Ainsi, vous pouvez écouter l&#x27;événement <code>onChange</code> pour
vérifier la donnée, dès que l&#x27;utilisateur a fini de l&#x27;éditer. Ou bien vous pouvez écouter l&#x27;événement <code>onInput</code> pour vérifier la donnée à chaque
nouveau caractère.</p><p>Par exemple, vous pouvez vérifier que ce qui est saisi commence par <code>Hello</code> avec le code suivant :</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">myInput</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;input&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Hello &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isValid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isValid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="faites-une-validation-plus-complexe-avec-les-regex">Faites une validation plus complexe avec les Regex<a class="hash-link" href="#faites-une-validation-plus-complexe-avec-les-regex" title="Direct link to heading">​</a></h3><p>Si vous n&#x27;avez jamais entendu parlé des <em><strong>Regex</strong>,</em> sachez qu&#x27;il s&#x27;agit d&#x27;un format spécial qui permet de <em>matcher</em> du texte, c&#x27;est-à-dire de
vérifier qu&#x27;un texte corresponde à une <em>description</em> que l&#x27;on a définie. Ainsi, si l&#x27;on veut savoir si notre texte commence par la lettre <code>e</code> et
est suivi d&#x27;au moins 3 chiffres, on écrira la <em>regex</em> suivante :</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isValid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">^e[0-9]{3,}$</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Cela peut paraître barbare comme notation, mais c&#x27;est très puissant et très pratique !</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Pour en savoir plus, <a href="https://regexr.com/" target="_blank" rel="noopener noreferrer">un peu de documentation</a> ne fait pas de mal. 😉</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="découvrez-les-contraintes-html5">Découvrez les contraintes HTML5<a class="hash-link" href="#découvrez-les-contraintes-html5" title="Direct link to heading">​</a></h3><p>Depuis <em>HTML</em> version 5, il est possible d&#x27;ajouter de la validation <strong>directement</strong> dans le code HTML, sans avoir besoin d&#x27;écrire la moindre
ligne de JavaScript.</p><p>Pour cela, différents <strong>attributs</strong> sont ajoutés et permettent d&#x27;<strong>empêcher la soumission d&#x27;un formulaire</strong> si toutes les validations ne sont
pas respectées.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="lattribut-type-pour-les-inputs">L&#x27;attribut type pour les inputs<a class="hash-link" href="#lattribut-type-pour-les-inputs" title="Direct link to heading">​</a></h4><p>Pour valider les informations saisies dans une balise <code>input</code>, il est possible d&#x27;utiliser l&#x27;attribut <code>type</code>.</p><p>L&#x27;attribut <code>type</code> de la balise <code>input</code> ne prend pas seulement comme valeurs <code>text</code> et <code>password</code>. Cela peut aussi être <code>email</code>, <code>tel</code>, <code>URL</code>,
<code>date</code> et bien d&#x27;autres.</p><p>Lorsque vous ajoutez un élément <code>input</code> avec un attribut <code>type=&quot;email&quot;</code>, le navigateur empêchera la soumission du formulaire si ce n&#x27;est pas
une adresse email correcte.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="les-attributs-de-validation-simples">Les attributs de validation simples<a class="hash-link" href="#les-attributs-de-validation-simples" title="Direct link to heading">​</a></h4><p>En fonction du <code>type</code> de l&#x27;<code>input</code>, vous pouvez utiliser différents attributs pour <strong>perfectionner</strong> votre validation :</p><ul><li><code>min</code> / <code>max</code> : fonctionne avec des champs de type <em><strong>nombre</strong></em> ou <em><strong>date</strong></em>. Cela permet de définir une valeur minimum et une valeur
maximum autorisées ;</li><li><code>required</code> : fonctionne avec à peu près <strong>tous les types de champs</strong>. Cela rend obligatoire le remplissage de ce champ ;</li><li><code>step</code> : fonctionne avec les <strong>dates</strong> ou les <strong>nombres</strong>. Cela permet de définir une valeur d&#x27;incrément lorsque vous changez la valeur du
champ via les flèches ;</li><li><code>minlength</code> / <code>maxlength</code> : fonctionne avec les <strong>champs textuels</strong> (<code>text</code>, <code>url</code>, <code>tel</code>, <code>email</code>...). Cela permet de définir un nombre de
caractères minimum et maximum autorisé.</li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="les-patterns">Les patterns<a class="hash-link" href="#les-patterns" title="Direct link to heading">​</a></h4><p>Nous avons vu qu&#x27;il était possible d&#x27;avoir une validation complexe grâce aux Regex en JavaScript. Eh bien c&#x27;est aussi possible directement en
HTML5 avec l&#x27;attribut <code>pattern</code>. Il suffit de définir une Regex dans cet attribut, et vous obligez la valeur du champ correspondant à la
respecter.</p><p>Par exemple, si on prend le code suivant :</p><div class="codeBlockContainer_K1bP language-html theme-code-block"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">pattern</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">[0-9]{,3}</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>il empêchera un utilisateur d&#x27;entrer autre chose que des chiffres, et limitera leur nombre à 3 chiffres.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Pour en savoir plus, vous pouvez aller faire un tour sur <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/Constraint_validation" target="_blank" rel="noopener noreferrer">MDN</a>
(documentation en anglais).</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="à-vous-de-jouer">À vous de jouer !<a class="hash-link" href="#à-vous-de-jouer" title="Direct link to heading">​</a></h3><p><img src="https://user.oc-static.com/upload/2021/04/20/16189267631776_A-vous-de-jouer%20%282%29.png" alt="16189267631776_A-vous-de-jouer%20%282%29.png"></p><p>Voici quelques exercices pour vous faire les dents sur la validation 😎. Rendez-vous sur <a href="https://codepen.io/nicolaspatschkowski/pen/GRJQvGY" target="_blank" rel="noopener noreferrer">cet éditeur CodePen</a>
et réalisez les étapes suivantes:</p><ol><li>Nous souhaitons dans un premier temps valider le champ <code>Code</code> du formulaire. A chaque lettre saisie dans le champ ayant pour ID <code>code</code> nous
voulons vérifier que la valeur du champ commence bien par <code>CODE-</code> grâce à une <em>Regex</em> que voici : <code>/^CODE-/</code>. Si la valeur commence bien par
<code>CODE-</code> alors nous affichons dans l&#x27;élément ayant pour ID <code>code-validation</code> : <code>Code valide</code>, sinon nous affichons dans cet élément
<code>Code invalide</code>.</li><li>Maintenant que nous savons si notre code est valide ou non, nous voudrions griser (grâce à l&#x27;attribut <code>disabled</code>) le bouton de soumission
(L&#x27;input de type <code>submit</code> ayant pour ID <code>submit-btn</code>) quand le code est invalide, et le dégriser quand le code est valide.<br>
Cela signifie que nous allons devoir ajouter un attribut <code>disabled=&quot;true&quot;</code> au bouton de soumission quand le code est invalide. Et supprimer cet
attribut <code>disabled</code> quand le code est valide (Rappelez-vous du cours sur la modification du DOM pour définir et supprimer des attributs).</li><li>Finalement, nous avons un champ <code>Email</code> et nous voudrions le rendre obligatoire et obliger l&#x27;utilisateur à entrer une adresse email valide.
Il faudra aussi empêcher le formulaire de se soumettre s&#x27;il n&#x27;est pas valide.<br>
Mais nous voudrions faire tout ça uniquement avec le HTML5, sans utiliser de code JavaScript.<br>
Vous pouvez changer le <code>type</code> du champ email plutôt que d&#x27;utiliser une Regex via <code>pattern</code> <img src="https://openclassrooms.com/bundles/common/images/smiley/clin.png" alt=";)"></li></ol><div data-testid="general-observer" class="mdx-embed"><div style="height:500px;width:100%"></div></div><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;input&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">^CODE-</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;code-validation&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Code valide&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;submit-btn&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">removeAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;disabled&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;code-validation&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Code invalide&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;submit-btn&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;disabled&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-html theme-code-block"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Email : </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">email</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">email</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">required</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">label</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Vous avez terminé ? Voici la <a href="https://codepen.io/fabienhenon/pen/JjbxgaZ" target="_blank" rel="noopener noreferrer">solution CodePen</a> !</p><div data-testid="general-observer" class="mdx-embed"><div style="height:500px;width:100%"></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="en-résumé-2">En résumé<a class="hash-link" href="#en-résumé-2" title="Direct link to heading">​</a></h3><p>Dans ce chapitre, vous avez appris :</p><ul><li>Qu&#x27;il ne faut jamais faire confiance à l&#x27;utilisateur ;</li><li>À valider des données lors d&#x27;événements ;</li><li>À utiliser les Regex pour valider les données ;</li><li>À utiliser les attributs fournis par HTML pour valider les données.</li></ul><p><em>Maintenant qu&#x27;on peut protéger notre site web de nos utilisateurs, et leur afficher de beaux messages d&#x27;erreur quand les données saisies ne
sont pas celles attendues, nous allons pouvoir sauvegarder nos données sur notre service web !</em></p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="sauvegardez-des-données-sur-le-service-web">Sauvegardez des données sur le service web<a class="hash-link" href="#sauvegardez-des-données-sur-le-service-web" title="Direct link to heading">​</a></h2><p><a href="https://openclassrooms.com/fr/courses/5543061-ecrivez-du-javascript-pour-le-web/5577626-sauvegardez-des-donnees-sur-le-service-web" target="_blank" rel="noopener noreferrer">Sauvegardez des données sur le service web - Écrivez du JavaScript pour le web - OpenClassrooms</a></p><div data-testid="general-observer" class="mdx-embed"><div style="height:0;width:100%"></div></div><br><h3 class="anchor anchorWithStickyNavbar_31ik" id="envoyez-des-données-comment-ça-marche-">Envoyez des données, comment ça marche ?<a class="hash-link" href="#envoyez-des-données-comment-ça-marche-" title="Direct link to heading">​</a></h3><p>Nous avons vu précédemment que grâce au protocole HTTP, nous pouvions demander à récupérer des données de notre service web.</p><p>Eh bien, c&#x27;est aussi possible d&#x27;en envoyer au service web en les ajoutant à notre requête !</p><p>Cependant, cela ne se fait pas avec toutes les méthodes (qu&#x27;on appelle aussi des <em>verbs</em>) HTTP. En effet, la méthode <strong>GET</strong> est seulement
faite pour récupérer des données, alors que des méthodes comme <strong>POST</strong> et <strong>PUT</strong> sont faites pour en envoyer et en recevoir.</p><p>Le fonctionnement d&#x27;un verb à l&#x27;autre est très similaire. Avec les verbs <strong>POST</strong> et <strong>PUT</strong>, nous allons simplement ajouter des données dans
le corps de notre requête.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="envoyez-des-données-avec-une-requête-post">Envoyez des données avec une requête POST<a class="hash-link" href="#envoyez-des-données-avec-une-requête-post" title="Direct link to heading">​</a></h3><p>Afin d&#x27;envoyer des données à un service web avec la méthode <strong>POST</strong> via AJAX, nous allons devoir passer par la méthode <code>send()</code> en lui passant
en paramètres les données à envoyer.</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://url-service-web.com/api/users&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;POST&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;Accept&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">jsonBody</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Comme vous pouvez le voir, nous avons passé le contenu à envoyer au service web à notre fonction <code>fetch()</code>. Étant donné que l&#x27;on souhaite
<strong>envoyer du JSON</strong> à notre service web, nous avons d&#x27;abord besoin de transformer notre objet JavaScript en JSON (qui, rappelons-le, est un
format textuel, c&#x27;est-à-dire que c&#x27;est simplement du texte, contrairement à un objet JavaScript qui est une structure complexe du langage).</p><p>Pour faire cette transformation, nous utilisons la fonction <code>JSON.stringify(json)</code>. Toujours parce que l&#x27;on souhaite envoyer du JSON à notre
service web, il faut alors le prévenir qu&#x27;il va <strong>recevoir du JSON</strong>. Cela se fait grâce à des <strong>headers</strong>, qui sont des en-têtes envoyés en
même temps que la requête pour donner plus d&#x27;informations sur celle-ci. Les headers en question sont  :</p><ul><li><code>Content-Type</code>, avec la valeur  application/json,</li><li><code>Accept</code>, avec la valeur application/json .</li></ul><p>Ces options sont envoyées avec la requête grâce au second paramètre de la fonction <em>fetch()</em>. Ce paramètre est un objet qui permet de définir : </p><ul><li>la <strong>méthode HTTP</strong>, le <strong>body</strong>, c’est à dire les données qu’on souhaite envoyer,</li><li>les <strong>headers</strong> qui donnent un peu plus d’information sur notre requête.</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p><em>PUT</em> fonctionne exactement de la même manière que <em>POST</em>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="à-vous-de-jouer--1">À vous de jouer !<a class="hash-link" href="#à-vous-de-jouer--1" title="Direct link to heading">​</a></h3><p><img src="https://user.oc-static.com/upload/2021/04/20/16189267631776_A-vous-de-jouer%20%282%29.png" alt="16189267631776_A-vous-de-jouer%20%282%29.png"></p><p>Voici un petit exercice, à réaliser sur <a href="https://codepen.io/nicolaspatschkowski/pen/OJVQjBq" target="_blank" rel="noopener noreferrer">cet éditeur CodePen</a>.</p><p>Dans cet exercice nous voulons pouvoir entrer du texte dans le formulaire et l&#x27;envoyer vers un service web. Ce service web va simplement nous
renvoyer notre contenu en plus d&#x27;autres informations et nous allons afficher le contenu renvoyé par le serveur.</p><ol><li>Nous allons commencer par créer une fonction appelée <code>send</code> et qui va créer notre requête.<br>
Nous souhaitons créer une requête de type <code>POST</code> vers l&#x27;adresse suivante : <code>https://mockbin.com/request</code>, et y envoyer un contenu JSON ayant
une propriété <code>value</code> qui contiendra la valeur du champ de saisie de la page (avec l&#x27;ID <code>value</code>). Par exemple :
<code>{value: document.getElementById(&quot;value&quot;).value}</code>.<br>
Nous souhaitons aussi, lorsque la requête s&#x27;est bien envoyée, afficher le résulat renvoyé par le service web. Pour ce faire, nous allons
afficher ce qui se trouve dans <code>postData.text</code> de la réponse dans le contenu HTML de l&#x27;élément ayant pour ID <code>result</code>.</li><li>Maintenant nous voulons envoyer notre requête, et donc appeler notre fonction <code>send</code> dès que nous soumettons le formulaire ayant pour ID
<code>form</code>.</li></ol><p>N&#x27;oubliez pas d&#x27;annuler le comportement par défaut de la soumission du formulaire, sinon votre page va se recharger.</p><div data-testid="general-observer" class="mdx-embed"><div style="height:500px;width:100%"></div></div><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">preventDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://mockbin.com/request&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;POST&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;Accept&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ok</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;result&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">postData</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">text</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;form&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;submit&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> send</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Voici le <a href="https://codepen.io/fabienhenon/pen/GRNepeG" target="_blank" rel="noopener noreferrer">CodePen avec la solution</a> pour vous corriger. 😉</p><div data-testid="general-observer" class="mdx-embed"><div style="height:500px;width:100%"></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="en-résumé-3">En résumé<a class="hash-link" href="#en-résumé-3" title="Direct link to heading">​</a></h3><p>Dans ce chapitre, vous avez appris :</p><ul><li>Que l&#x27;envoi de données en HTTP se fait via certains verbs : <code>POST</code> ou <code>PUT</code>.</li><li>À envoyer des données en HTTP.</li></ul><p><em>Vous savez comment envoyer des requêtes à un service web pour lui demander des ressources ou en créer de nouvelles. Dans la partie suivante,
nous aborderons l&#x27;asynchronisme en JavaScript afin d&#x27;exécuter du code en &quot;parallèle&quot;.</em></p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="quiz--communiquez-avec-un-service-web">Quiz : Communiquez avec un service web<a class="hash-link" href="#quiz--communiquez-avec-un-service-web" title="Direct link to heading">​</a></h2><p><a href="https://openclassrooms.com/fr/courses/5543061-ecrivez-du-javascript-pour-le-web/exercises/3182" target="_blank" rel="noopener noreferrer">Communiquez avec un service web - OpenClassrooms</a></p><h4 class="anchor anchorWithStickyNavbar_31ik" id="compétences-évaluées">Compétences évaluées<a class="hash-link" href="#compétences-évaluées" title="Direct link to heading">​</a></h4><i class="bi bi-check2-circle"></i> Communiquer avec un service web<hr><h4 class="anchor anchorWithStickyNavbar_31ik" id="question-1--quest-ce-que-le-http-">Question 1 : Qu&#x27;est-ce que le HTTP ?<a class="hash-link" href="#question-1--quest-ce-que-le-http-" title="Direct link to heading">​</a></h4><i class="bi bi-circle"></i> Un protocole permettant de communiquer avec tout ce qu&#x27;on veut<br><i class="bi bi-record-circle"></i> Un protocole permettant de communiquer avec un service web<br><i class="bi bi-circle"></i> Un objet JavaScript permettant de communiquer avec tout ce qu&#x27;on veut<br><i class="bi bi-circle"></i> Un objet JavaScript permettant de communiquer avec un service web<br><br><p><em>HTTP est un protocole permettant de communiquer avec des services web. Il signifie <strong>HyperText Transfer Protocol</strong>.</em></p><hr><h4 class="anchor anchorWithStickyNavbar_31ik" id="question-2--quel-objet-permet-de-créer-des-requêtes-http-en-javascript-">Question 2 : Quel objet permet de créer des requêtes HTTP en JavaScript ?<a class="hash-link" href="#question-2--quel-objet-permet-de-créer-des-requêtes-http-en-javascript-" title="Direct link to heading">​</a></h4><i class="bi bi-circle"></i><code>HttpRequest</code><br><i class="bi bi-circle"></i><code>FetchRequest</code><br><i class="bi bi-circle"></i><code>HttpFetch</code><br><i class="bi bi-record-circle"></i><code>Fetch</code><br><br><p><em>C&#x27;est <code>Fetch</code> qui permet de faire des requêtes HTTP vers un service web en JavaScript.</em></p><p><em>Elle prend en paramètre l’URL de destination ainsi que des options liées au paramétrage de la requête HTTP, et elle nous renverra une
<code>Promise</code> contenant la réponse du service web. Pour plus d’informations, je vous invite à lire la <a href="https://developer.mozilla.org/fr/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener noreferrer">documentation de Fetch</a>.</em></p><hr><h4 class="anchor anchorWithStickyNavbar_31ik" id="question-3--quest-ce-que-le-json-">Question 3 : Qu&#x27;est-ce que le JSON ?<a class="hash-link" href="#question-3--quest-ce-que-le-json-" title="Direct link to heading">​</a></h4><i class="bi bi-circle"></i> Un format de données binaire, illisible et difficile à parser<br><i class="bi bi-record-circle"></i> Un format textuel, peu verbeux et très proche de la syntaxe des objets JavaScript<br><i class="bi bi-circle"></i> Un format textuel, très verbeux, mais que l&#x27;on peut tout de même utiliser en JavaScript<br><br><p><em>JSON signifie : <strong>JavaScript Object Notation</strong>. Il s&#x27;agit d&#x27;un format textuel très simple et peu verbeux, que JavaScript comprend très
facilement car il est proche de sa syntaxe objet (d&#x27;où son nom).</em></p><hr><h4 class="anchor anchorWithStickyNavbar_31ik" id="question-4--que-fait-cet-extrait-">Question 4 : Que fait cet extrait ?<a class="hash-link" href="#question-4--que-fait-cet-extrait-" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><i class="bi bi-record-circle"></i> Il transforme un contenu JSON en objet JavaScript<br><i class="bi bi-circle"></i> Il transforme un objet JavaScript en contenu JSON<br><i class="bi bi-circle"></i> La fonction  `parse`  n’existe pas<br><br><p><em><code>JSON.parse(value)</code> permet bien de transformer du texte JSON en un objet JavaScript.</em></p><hr><h4 class="anchor anchorWithStickyNavbar_31ik" id="question-5--que-fait-cet-extrait-">Question 5 : Que fait cet extrait ?<a class="hash-link" href="#question-5--que-fait-cet-extrait-" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><i class="bi bi-circle"></i> Il transforme un contenu JSON en objet JavaScript<br><i class="bi bi-record-circle"></i> Il transforme un objet JavaScript en contenu JSON<br><i class="bi bi-circle"></i> La fonction stringify n’existe pas<br><br><p><em><code>JSON.stringify(value)</code> va transformer un objet JavaScript passé en paramètre en un texte au format JSON.</em></p><hr><h4 class="anchor anchorWithStickyNavbar_31ik" id="question-6--que-va-afficher-cet-extrait-dans-la-console-">Question 6 : Que va afficher cet extrait dans la console ?<a class="hash-link" href="#question-6--que-va-afficher-cet-extrait-dans-la-console-" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://url-de-mon-service&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><i class="bi bi-circle"></i> Une Promise qui sera résolue avec le contenu au format JSON de la réponse à la requête GET<br><i class="bi bi-record-circle"></i> Une Promise qui sera résolue avec l’objet JavaScript qui correspond à la réponse à la requête GET (parsée depuis du JSON)<br><i class="bi bi-circle"></i> Le contenu de la réponse à la requête GET au format JSON<br><i class="bi bi-circle"></i> Le contenu de la réponse à la requête GET directement en objet JavaScript<br><br><p><em>Il s&#x27;agit de la 2e réponse. En effet, la fonction <code>json()</code> permet de transformer du contenu JSON en objet JavaScript. Mais elle ne retourne
pas directement l’objet, elle retourne une Promise, qui devra être résolue.</em></p><hr><h4 class="anchor anchorWithStickyNavbar_31ik" id="question-7--comment-sera-traité-ce-champ-">Question 7 : Comment sera traité ce champ ?<a class="hash-link" href="#question-7--comment-sera-traité-ce-champ-" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_K1bP language-html theme-code-block"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value" style="color:#e3116c">”email”</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">required</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><i class="bi bi-record-circle"></i> Il sera obligatoire et devra être au format d’un e-mail<br><i class="bi bi-circle"></i> Il sera obligatoire mais pourra contenir n’importe quoi, dont une adresse e-mail<br><i class="bi bi-circle"></i> Il n’est pas obligatoire mais doit contenir une adresse e-mail<br><i class="bi bi-circle"></i> Il n’est obligatoire que s’il contient une adresse e-mail<br><br><p><em>Pour forcer le champ à être une adresse e-mail, il faut que son <code>type</code> soit <code>email</code>. Pour obliger l&#x27;utilisateur à entrer une valeur dans ce
champ, il faut lui ajouter l&#x27;attribut <code>required</code>.</em></p><hr><h4 class="anchor anchorWithStickyNavbar_31ik" id="question-8--que-fait-cet-extrait-">Question 8 : Que fait cet extrait ?<a class="hash-link" href="#question-8--que-fait-cet-extrait-" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://url-service-web&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> “</span><span class="token constant" style="color:#36acaa">POST</span><span class="token plain">”</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;Accept&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">foo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> “bar”</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><i class="bi bi-circle"></i> Il fait une requête de type GET avec le contenu JSON <code>&quot;{&quot;foo&quot;: &quot;bar&quot;}&quot;</code><br><i class="bi bi-record-circle"></i> Il fait une requête de type POST avec le contenu JSON <code>&quot;{&quot;foo&quot;: &quot;bar&quot;}&quot;</code><br><i class="bi bi-circle"></i> Il fait une requête de type GET avec le contenu JSON <code>{foo: &quot;bar&quot;}</code><br><i class="bi bi-circle"></i> Il fait une requête de type POST avec le contenu JSON <code>{foo: &quot;bar&quot;}</code><br><br><p><em>Faites bien attention au fait que la fonction JSON.stringify transforme notre objet JavaScript en JSON, et que le JSON n’est rien d’autre que
du texte. Dans notre exemple, la réponse 4 n’est pas valide car <code>{foo: &quot;bar”}</code> est du JavaScript et non du JSON.</em></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/gylgyl2000/Mon_Web_Dev_Wiki/edit/master/website/docs/OpenClassrooms/5-Construisez_un_site_e-commerce/3-Ecrivez_du_JavaScript_pour_le_web/2-Communiquez_via_une_API_avec_un_service_web.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/1-Manipulez_le_DOM"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Manipulez le DOM</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Mon_Web_Dev_Wiki/docs/OpenClassrooms/Construisez_un_site_e-commerce/Ecrivez_du_JavaScript_pour_le_web/3-Parallelisez_vos_longues_taches_avec_la_programmation_asynchrone"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Parallélisez vos longues tâches avec la programmation asynchrone</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#comprenez-ce-que-sont-des-api-et-un-service-web" class="table-of-contents__link toc-highlight">Comprenez ce que sont des API et un service web</a><ul><li><a href="#en-résumé" class="table-of-contents__link toc-highlight">En résumé</a></li></ul></li><li><a href="#récupérez-des-données-dun-service-web" class="table-of-contents__link toc-highlight">Récupérez des données d&#39;un service web</a><ul><li><a href="#quest-ce-que-fetch-" class="table-of-contents__link toc-highlight">Qu&#39;est-ce que Fetch ?</a></li><li><a href="#envoyez-une-première-requête" class="table-of-contents__link toc-highlight">Envoyez une première requête</a></li><li><a href="#récupérez-les-données-au-format-json" class="table-of-contents__link toc-highlight">Récupérez les données au format JSON</a></li><li><a href="#à-vous-de-jouer-" class="table-of-contents__link toc-highlight">À vous de jouer !</a></li><li><a href="#en-résumé-1" class="table-of-contents__link toc-highlight">En résumé</a></li></ul></li><li><a href="#validez-les-données-saisies-par-vos-utilisateurs" class="table-of-contents__link toc-highlight">Validez les données saisies par vos utilisateurs</a><ul><li><a href="#never-trust-user-input" class="table-of-contents__link toc-highlight">Never trust user input!</a></li><li><a href="#validez-les-données-suite-à-des-événements" class="table-of-contents__link toc-highlight">Validez les données suite à des événements</a></li><li><a href="#faites-une-validation-plus-complexe-avec-les-regex" class="table-of-contents__link toc-highlight">Faites une validation plus complexe avec les Regex</a></li><li><a href="#découvrez-les-contraintes-html5" class="table-of-contents__link toc-highlight">Découvrez les contraintes HTML5</a></li><li><a href="#à-vous-de-jouer" class="table-of-contents__link toc-highlight">À vous de jouer !</a></li><li><a href="#en-résumé-2" class="table-of-contents__link toc-highlight">En résumé</a></li></ul></li><li><a href="#sauvegardez-des-données-sur-le-service-web" class="table-of-contents__link toc-highlight">Sauvegardez des données sur le service web</a><ul><li><a href="#envoyez-des-données-comment-ça-marche-" class="table-of-contents__link toc-highlight">Envoyez des données, comment ça marche ?</a></li><li><a href="#envoyez-des-données-avec-une-requête-post" class="table-of-contents__link toc-highlight">Envoyez des données avec une requête POST</a></li><li><a href="#à-vous-de-jouer--1" class="table-of-contents__link toc-highlight">À vous de jouer !</a></li><li><a href="#en-résumé-3" class="table-of-contents__link toc-highlight">En résumé</a></li></ul></li><li><a href="#quiz--communiquez-avec-un-service-web" class="table-of-contents__link toc-highlight">Quiz : Communiquez avec un service web</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Mon_Web_Dev_Wiki/docs/menu">Menu</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Mon_Web_Dev_Wiki/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/gylgyl2000/Mon_Web_Dev_Wiki" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Mon Wiki Dev Web, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/Mon_Web_Dev_Wiki/assets/js/runtime~main.ce0593c5.js"></script>
<script src="/Mon_Web_Dev_Wiki/assets/js/main.faca9600.js"></script>
</body>
</html>